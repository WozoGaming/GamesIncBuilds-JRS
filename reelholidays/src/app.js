var DO;!function(a){!function(b){!function(c){function d(a,b,c){var d=setInterval(function(){a()&&(clearInterval(d),b())},c||250)}function e(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function f(a){var b,c,d;for(d=a.length;d;d-=1)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c;return a}function g(b){function c(){d.off(a.Core.Events.getTouchEvent(),b),d.off(a.Core.Events.getClickEvent(),b),$("#touch_to_skip").remove()}$("#touch_to_skip").remove();var d=$("body").add('<div id="touch_to_skip" style="position: absolute; left: 0; right: 0; width: 100%; height: 100%";></div>');return d.on(a.Core.Events.getTouchEvent(),b),d.on(a.Core.Events.getClickEvent(),b),c}function h(a){for(var b=a.split("."),c=window||this,d=0,e=b.length;d<e;d++)c=c[b[d]];if("function"!=typeof c)throw"[Utils.getReference] Cannot get reference to class : "+a;return c}function i(a){var b=decodeURI((RegExp(a+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);return"null"!=b&&0!=b.length||(b=null),b}function j(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){"true"==d&&(d=!0),"false"==d&&(d=!1),a[c]=d});return a}c.poll=d,c.debounce=e,c.shuffleArray=f;var k=function(){function b(b){this.wasSkipped=!1,this._tasks=[],this._juggler=b||a.Core.Time.juggler}return b.prototype.add=function(a,b){var c={func:a,canSkip:b};this._tasks.push(c)},b.prototype.start=function(a){this._onComplete=a,this._tasks.length?this.nextTask():this._onComplete&&this._onComplete()},b.prototype.nextTask=function(){this._currentTask=this._tasks.shift();var a=this;this._currentTask.func(function(){a._tasks.length?a.nextTask():(a._currentTask=null,a._onComplete&&a._onComplete())})},b.prototype.skip=function(){this._currentTask&&this._currentTask.canSkip&&this.nextTask()},b.prototype.skipToEnd=function(){this._onComplete()},b}();c.Queue=k,c.touchToSkip=g,c.getReference=h,c.getUrlVar=i,c.getUrlVars=j,c.formatTime=function(a){var c=Math.floor(a/60),d=b.Lang.getPhrase("settings_hour"),e=b.Lang.getPhrase("settings_hours"),f=b.Lang.getPhrase("settings_minute"),g=b.Lang.getPhrase("settings_minutes");if(c){var h=a%(60*c);return h?l(c,d,e)+", "+l(h,f,g):l(c,d,e)}return l(a,f,g)};var l=function(a,b,c){return a>1?a+" "+c:a+" "+b}}(b.Utils||(b.Utils={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){function c(){return null}function d(c){console.log("[Core] Initializing...");var d=new f.Queue;d.add(function(a){a()}),d.add(function(a){b.Events.init(),a()}),d.add(function(a){b.Time.init(),a()}),d.add(function(a){b.Environment.init(),a()}),d.add(function(a){b.SoundManager.globalSounds=new b.SoundManager,a()}),d.add(function(b){a.Core.Environment.NetworkStats.loadTestFile("./network",function(a){b()})}),d.start(function(){console.log("[Core] Initialization complete!"),c()}),e(),$(window).blur(function(c){g=(new Date).getTime(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_LOSE_FOCUS,c,g)}),$(window).focus(function(c){var d=(new Date).getTime()-g;b.Events.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,d,c)}),window.onerror=function(c,d,e,f,g){console.error("[Core] *** APP EXCEPTION ***",c,g.stack),b.Events.coreEvents.emit(a.Core.Events.ON_APP_EXCEPTION,c)},window.onresize=f.debounce(function(c){b.Events.coreEvents.emit(a.Core.Events.ON_APP_RESIZE,c,b.Environment.getOrientation())},100);var h,i=0,j=!1,k=$("body");k.on({touchmove:function(c){j=!0,h=$(this).scrollTop(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,c),i=h}}),k.on({touchend:function(c){console.log("Environment","end",j),j&&b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL_END,c),j=!1}}),window.onscroll=f.debounce(function(c){b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,c)},250)}function e(){var c,d;void 0!==document.hidden?("hidden",d="visibilitychange",c="visibilityState"):void 0!==document.mozHidden?("mozHidden",d="mozvisibilitychange",c="mozVisibilityState"):void 0!==document.msHidden?("msHidden",d="msvisibilitychange",c="msVisibilityState"):void 0!==document.webkitHidden&&("webkitHidden",d="webkitvisibilitychange",c="webkitVisibilityState"),document.addEventListener(d,function(){switch(document[c]){case"visible":var d=(new Date).getTime()-g;b.Events.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,d,null);break;case"hidden":g=(new Date).getTime(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_LOSE_FOCUS,g,null)}})}var f=a.Core.Utils,g=(new Date).getTime();b.isDebugMode=c,b.init=d}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(){t.currentStats=new t(0,0,999999),b.launchVariables=a.Core.Utils.getUrlVars(),b.launchVariables.branding=!0,b.launchVariables.music="1",b.launchVariables.sfx="1",screenfull.enabled&&screenfull.onchange(function(){a.Core.Events.coreEvents.emit(b.EVENT_FULL_SCREEN,screenfull.isFullscreen)}),"iOS"==b.getPlatformData().os.family&&(document.addEventListener("gesturestart touchmove",function(a){a=a.originalEvent||a,1!==a.scale&&"SELECT"!==a.target.tagName&&"INPUT"!==a.target.tagName&&(a.preventDefault(),document.body.style.transform="scale(1)",console.log(" document.body.style.transformv: ",document.body.style.transform))}),document.addEventListener("touchend",function(a){"SELECT"!=a.target.tagName&&"INPUT"!=a.target.tagName&&(a.preventDefault(),$(a.target).trigger("click"),console.log(" document.body.style.transformvip : ",document.body.style.transform))},!1))}function d(){document.addEventListener("touchstart",function(a){if("SELECT"!=a.target.tagName&&"INPUT"!=a.target.tagName){var b=a.timeStamp,c=a.currentTarget.dataset.lastTouch||b,d=b-c,e=a.touches.length;if(a.currentTarget.dataset.lastTouch=b,!d||d>200||e>1)return;a.preventDefault(),$(a.target).trigger("click")}})}function e(){return"16:9"}function f(){return this._lastHeight=this._lastHeight||window.innerHeight,window.innerHeight>=this._lastHeight?b.barsHeight=0:b.barsHeight=this._lastHeight-window.innerHeight,this._lastHeight=window.innerHeight,b.barsHeight>0}function g(){return screenfull.isFullscreen}function h(){return!b.isDesktop()&&screenfull.enabled}function i(){b.isDeviceMobile()&&screenfull.request()}function j(){return window.platform}function k(){return n()==b.ORIENTATION_LANDSCAPE}function l(){return n()==b.ORIENTATION_PORTRAIT}function m(a,c){if(c){if(!(a.indexOf(c)>=0))throw"[Environment] Variant type not found : "+b.variant+".  Allowed types for this application are : "+a;b.variant=c}else b.getDeviceType()==b.DEVICE_MOBILE?b.variant=b.DEVICE_MOBILE:b.variant=b.DEVICE_DESKTOP,b.launchVariables.variant=b.variant}function n(){return window.innerWidth>window.innerHeight?a.Core.Environment.ORIENTATION_LANDSCAPE:a.Core.Environment.ORIENTATION_PORTRAIT}function o(){return r()==b.DEVICE_MOBILE}function p(){return!o()}function q(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function r(){var a=b.launchVariables.device||b.launchVariables.variant;return a||q()&&(a=b.DEVICE_MOBILE),a}function s(){a.Core.Events.coreEvents.emit(a.Core.Events.ON_APP_EXIT)}b.EVENT_FULL_SCREEN="env_full_screen",b.DEVICE_MOBILE="mobile",b.DEVICE_DESKTOP="desktop",b.ORIENTATION_LANDSCAPE="landscape",b.ORIENTATION_PORTRAIT="portrait",b.force43aspectRatio=!1,b.variant="default",b.barsHeight=50;b.init=c,b.preventDoubleTab=d,b.getAspectRatio=e,b.isChromeVisible=f,b.isFullScreen=g,b.isFullScreenAvailable=h,b.goFullScreen=i,b.getPlatformData=j,b.isLandscape=k,b.isPortrait=l;var t=function(){function a(b,c,d){this.bitsPerSecond=0,this.kiloBytesPerSecond=0,this.megaBytesPerSecond=0,this.megaBitsPerSecond=0,this.bytesPerSecond=0,this.durationSeconds=0,this.rating=null,this.durationSeconds=(c-b)/1e3,this.bytesPerSecond=d/this.durationSeconds,this.bitsPerSecond=8*this.bytesPerSecond,this.kiloBytesPerSecond=this.bytesPerSecond/1024,this.megaBytesPerSecond=this.kiloBytesPerSecond/1024,this.megaBitsPerSecond=this.bitsPerSecond/1e6,this.megaBytesPerSecond>=2?this.rating=a.BANDWITH_RATING_HIGH:this.rating=a.BANDWITH_RATING_LOW}return a.loadTestFile=function(b,c){a.startTest(),$.ajax({type:"HEAD",url:b+"?v=1.0.7",success:function(b,d,e){var f=Number(e.getResponseHeader("Content-Length")),g=a.endTest(f);console.log("[NetworkStats] Test file loaded - file size (bytes) : "+f,g.getReport()),console.log("[NetworkStats] Download time for 1 KB byte file (seconds) : ",g.getDownloadTime(1e3)),console.log("[NetworkStats] Download time for 500 KB byte file (seconds) : ",g.getDownloadTime(5e4)),console.log("[NetworkStats] Download time for 1 MB byte file (seconds) : ",g.getDownloadTime(1e6)),console.log("[NetworkStats] Download time for 10 MB byte file (seconds) : ",g.getDownloadTime(1e7)),a.currentStats=g,c&&c(g)}.bind(this),error:function(a){console.warn("[NetworkStats] Unable to load network file :",b),c&&c(null)}})},a.startTest=function(){a.startTime=(new Date).getTime()},a.endTest=function(b){return new a(a.startTime,(new Date).getTime(),b)},a.prototype.getDownloadTime=function(a){return a/this.bytesPerSecond},a.prototype.getReport=function(){return{rating:this.rating,megaBytesPS:this.megaBytesPerSecond,kiloBytesPS:this.kiloBytesPerSecond,bytesPS:this.bytesPerSecond,megaBitsPS:this.megaBitsPerSecond,bitsPS:this.bitsPerSecond,duration:this.durationSeconds}},a.BANDWITH_RATING_HIGH="BANDWIDTH_HIGH",a.BANDWITH_RATING_LOW="BANDWIDTH_LOW",a}();b.NetworkStats=t,b.setVariant=m,b.getOrientation=n,b.isMobile=o,b.isDesktop=p,b.isDeviceMobile=q,b.getDeviceType=r,b.exit=s}(b.Environment||(b.Environment={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){c.juggler=new h(!0),f=a.Core.Events.createEmitter()}function e(){return"_dotime:"+ ++g}var f,g=0;c.init=d;var h=function(){function a(a){this._objects={},this.timeMultiplier=1,this.isActive=!0,this.currentTime=0,this._autoStart=a,a&&this.start(),this.id="_juggler:"+e(),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(a){}.bind(this))}return a.prototype.start=function(){this._lastTime=TweenLite.ticker.time,this._tickBind=this.update.bind(this),TweenLite.ticker.addEventListener("tick",this._tickBind)},a.prototype.stop=function(){TweenLite.ticker.removeEventListener("tick",this._tickBind)},a.prototype.update=function(){var a=1e3*(TweenLite.ticker.time-this._lastTime);if(this.currentTime+=a,this.isActive){for(var b in this._objects)this._objects[b].onUpdate(a*this.timeMultiplier);this._lastTime=TweenLite.ticker.time}},a.prototype.purge=function(){for(var a in this._objects)this.remove(this._objects[a])},a.prototype.add=function(a){var b=e();a._animateableId=b,this._objects[b]=a},a.prototype.remove=function(a){delete this._objects[a._animateableId]},a.prototype.setInterval=function(a,b){var c=this.delayCall(a,b,-1);return c.start(),c},a.prototype.setTimeout=function(a,b){var c=this.delayCall(a,b);return c.start(),c},a.prototype.clearTimeout=function(a){this.remove(a)},a.prototype.delayCall=function(a,b,c,d){return new i(a,b,this,c,d)},a}();c.Juggler=h;var i=function(){function a(a,b,c,d,e){this.iterations=0,this._isPaused=!1,this._juggler=c,this._originalDelay=b,this._delay=b,this._onTick=a,this._onComplete=e,this._repeatCount=d||1,this.iterations=0}return a.prototype.pause=function(){this._isPaused=!0},a.prototype.resume=function(){this._isPaused=!1},a.prototype.start=function(){this._juggler.add(this)},a.prototype.stop=function(){this._juggler.remove(this)},a.prototype.onUpdate=function(a){this._isPaused||(this._delay-=a,this._delay<=0&&(this._onTick(++this.iterations),0==--this._repeatCount?(this.stop(),this._onComplete&&this._onComplete()):this._delay=this._originalDelay))},a}();c.DelayCall=i}(b.Time||(b.Time={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(){a.coreEvents=new PIXI.utils.EventEmitter}function c(){return"touchend"}function d(){return"mouseup"}function e(){return"mousedown"}function f(){return new PIXI.utils.EventEmitter}a.ON_CREATE="on_create",a.ON_DESTROY="on_destroy",a.ON_SHOWN="on_shown",a.ON_HIDDEN="on_hidden",a.ON_INTERACTION="on_touch",a.ON_APP_EXIT="on_app_exit",a.ON_APP_READY="on_app_ready",a.ON_APP_LOSE_FOCUS="on_app_lose_focus",a.ON_APP_GET_FOCUS="on_app_get_focus",a.ON_APP_EXCEPTION="on_app_exception",a.ON_APP_RESIZE="on_app_resize",a.ON_APP_SCROLL="on_app_scroll_start",a.ON_APP_SCROLL_END="on_app_scroll_end",a.init=b,a.getTouchEvent=c,a.pressup=d,a.getClickEvent=e,a.createEmitter=f;var g=function(){function a(){this._events=f()}return a.prototype.getListenerCount=function(a){return this._events.listeners(a).length},a.prototype.subscribe=function(a,b,c){this._events.on(b,c,a),this.outputCount()},a.prototype.subscribeOnce=function(a,b,c){this._events.once(b,c,a),this.outputCount()},a.prototype.broadcast=function(a,b,c,d,e,f){this._events.emit(a,b,c,d,e,f)},a.prototype.outputCount=function(){console.log("[EventManager] Subscriber count :",this.getListenerCount())},a}();a.EventManager=g}(a.Events||(a.Events={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=a.Core.Environment.NetworkStats,d=function(){function d(){this.loadProgress=0,this._hasLoaded=!1,this._cachedMovieClips={},this.itemsPostLoad=[],this.preLoadNumber=0,Howler.iOSAutoEnable=!1}return d.prototype.purge=function(){this._PIXILoader.reset()},d.prototype.areAssetsAvailable=function(a){if(d._instances[a]){return d._instances[a].isLoaded()}return!1},d.get=function(a){var b;return d._instances[a]?b=d._instances[a]:(b=new d,d._instances[a]=b),b},d.prototype.isLoaded=function(){return this._hasLoaded},d.prototype.getMovieClipOld=function(b,c,d,e){var f=this;d=d||"PIXI.extras.MovieClip";var g=null;if(!e&&this._cachedMovieClips[b])for(var h=0;h<this._cachedMovieClips[b].length;h++)if(!this._cachedMovieClips[b][h].parent){g=this._cachedMovieClips[b][h],g.gotoAndStop(0);break}if(g||(this._manifest.items.forEach(function(c){if("atlas"==c.type&&c.movieclips){var e=c.movieclips[b];if(e){var h=[];e.textures.forEach(function(a){h.push(f.getPIXIAtlas(c.id)[a])});var i=a.Core.Utils.getReference(d);g=new i(h),g.animationSpeed=e.speed||1}}}.bind(this)),this._cachedMovieClips[b]=this._cachedMovieClips[b]||[],this._cachedMovieClips[b].push(g)),!g)throw"[AssetManager] Movieclip does not exist in assets (was it filtered by bandwidth?): "+b;return g.gotoAndStop(1),c&&(g.anchor.x=.5,g.anchor.y=.5),g},d.prototype.getMovieClip=function(b,c,d,e){var f=this;d=d||"PIXI.extras.MovieClip";var g=null;return this._manifest.items.forEach(function(c){if("multi_atlas"==c.type&&c.movieclips){var e=c.movieclips[b];if(e){var h=[];e.textures.forEach(function(a){h.push(PIXI.Texture.fromFrame(a))});var i=a.Core.Utils.getReference(d);g=new i(h),g.animationSpeed=e.speed||1}}if("atlas"==c.type&&c.movieclips){var e=c.movieclips[b];if(e){var j=[];e.textures.forEach(function(a){j.push(f.getPIXIAtlas(c.id)[a])});var i=a.Core.Utils.getReference(d);g=new i(j),g.animationSpeed=e.speed||1}}}.bind(this)),g.gotoAndStop(1),c&&(g.anchor.x=.5,g.anchor.y=.5),g},d.prototype.getSoundManager=function(){return this._soundManager},d.prototype.getPIXIAsset=function(a){return this._PIXILoader.resources[a]},d.prototype.getPIXIAtlas=function(a){if(this.getPIXIAsset(a))return this.getPIXIAsset(a).textures;throw"[AssetManager] Atlas does not exist in assets (was it filtered by bandwidth?) : "+a},d.prototype.getPIXISprite=function(a,b){if(!b){var c=this.getAtlasFromRef(a);a=c.ref,b=c.atlas}return new PIXI.Sprite(this.getPIXIAtlas(b)[a])},d.prototype.getPIXITexture=function(a,b){var c;if(!b){var d=this.getAtlasFromRef(a);a=d.ref,b=d.atlas}if(b)c=this.getPIXIAtlas(b)[a];else{if(!this.getPIXIAsset(a))throw"[AssetManager] Texture does not exist in assets (was it filtered by bandwidth?) : "+a;c=this.getPIXIAsset(a).texture}return c},d.prototype.load=function(e,f,g){function h(a){function e(a){var c;if("string"==typeof a.path)c=a.path;else if(!(c=a.path[b.Environment.variant]))return null;var e=c.split("|");return e.length>1?e:(c=e[1]&&window.devicePixelRatio>=2?e[1]:e[0],e[1]&&d.forceHD&&(c=e[1]),e[0]&&d.forceSD&&(c=e[0]),c)}function h(){}function j(){i.loadProgress=m/l,m++,g&&g(m/l),m==l&&(i._hasLoaded=!0,k(),setTimeout(f,500))}function k(){i._manifest.items.forEach(function(a){if("atlas"==a.type&&a.movieclips)for(var b in a.movieclips){var c=a.movieclips[b];if(c.pre_cache=0,c.pre_cache)for(var d=0;d<c.pre_cache;d++){i.getMovieClip(b,!1,null,!0)}}})}i._manifest=a;var l=0,m=0,n=0,o=[];a.items.forEach(function(a){var f=!0;if(d.optimizeLoading&&(a.bandwidth_filter&&(f=a.bandwidth_filter==c.currentStats.rating),f||o.push(a.id)),"cache!"==a.id)i._PIXILoader.add("cached_"+ ++n,e(a)),l++;else if(f){var g=e(a);if(g)switch(a.type){case d.ASSET_TYPE_IMAGE:i._PIXILoader.add(a.id,g),l++;break;case d.ASSET_TYPE_MUL_ATLAS:i._PIXILoader.add(g),l+=2*g.length;break;case d.ASSET_TYPE_AUDIO:var k=[];b.SoundManager.isFormatSupported("mp3")&&(k[0]=g+".mp3?v=1.0.7"),b.SoundManager.isFormatSupported("ogg")&&(k[0]=g+".ogg?v=1.0.7"),b.SoundManager.isFormatSupported("m4a")&&(k[0]=g+".m4a?v=1.0.7");var m=a.properties||{};m.src=k,m.onload=j,m.onloaderror=h;var p=void 0;try{p=new Howl(m),p.once("loaderror",j.bind(this))}catch(a){}l++,a.global&&!b.SoundManager.globalSounds.doesSoundExist(a.id)?b.SoundManager.globalSounds.addSound(a,p):i._soundManager.addSound(a,p);break;case d.ASSET_TYPE_JSON:i._PIXILoader.add(a.id,e(a)),l++;break;case d.ASSET_TYPE_ATLAS:l+=2,i._PIXILoader.add(a.id,g);break;case d.ASSET_TYPE_FONT:i._PIXILoader.add(a.id,g),l++}}}),i._PIXILoader.on("load",j),i._PIXILoader.load()}var i=this;if(this._hasLoaded)return this.preLoadNumber++,this.preLoadNumber++,this.loadProgress=1,g&&g(1),void f();this._PIXILoader=new PIXI.loaders.Loader,this._soundManager=new a.Core.SoundManager,this._PIXILoader.pre(function(a,b){d.antiCaching&&(a.url+="?v=1.0.7"),b()}),this.loadProgress=0,g&&g(0),e.indexOf(".json")?$.getJSON(e+"?v=1.0.7",function(a){h(a)}):h(e)},d.prototype.getAtlasFromRef=function(a){if(a.indexOf(":")>0){var b=a.split(":");return{atlas:b[0],ref:b[1]}}return{atlas:null,ref:a}},d.ASSET_TYPE_IMAGE="image",d.ASSET_TYPE_AUDIO="sound",d.ASSET_TYPE_JSON="json",d.ASSET_TYPE_ATLAS="atlas",d.ASSET_TYPE_FONT="font",d.ASSET_TYPE_MUL_ATLAS="multi_atlas",d.optimizeLoading=!1,d.forceSD=!1,d.forceHD=!1,d.antiCaching=!0,d._instances={},d}();b.AssetManager=d}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(c,d){$.ajax({dataType:"json",url:"assets/lang/"+c.toLowerCase()+".json?v=1.0.7",success:function(b){a.langCode=c,f=b,d()},error:function(){console.warn("[Lang] Language file not found for:"+c,"Defaulting to en"),b("eng",d)}})}function c(b,c){a.langCode=b,f=c}function d(a,b){if(!f)return a.toLowerCase();"@"==a.substr(0,1)&&(a=a.substring(1,9999));var c=f[a];if(c&&(g[a]=g[a]||0,g[a]++),c||(c=a),b)for(var d in b){var e=new RegExp("{"+d+"}","gi");c=c.replace(e,b[d])}return c}function e(){for(var a in f){var b=".lang\\:"+a;f[a];$(b).length&&$(b).html(d(a))}}var f,g={};a.loadDictionary=b,a.setDictionary=c,a.getPhrase=d,a.scanDOM=e}(a.Lang||(a.Lang={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a,b,c){var d=Math.random()*(b-a)+a;return c&&(d=Math.floor(d)),d}function c(a){return a*(Math.PI/180)}function d(a,b){return Math.round(a/b)*b}function e(a,b){return Math.ceil(a/b)*b}function f(a,b){return Math.floor(a/b)*b}function g(a){return Math.acos(a)*v}function h(a){return Math.asin(a)*v}function i(a){return Math.atan(a)*v}function j(a,b){return Math.atan2(a,b)*v}function k(a){return Math.cos(u*a)}function l(a){return Math.sin(u*a)}function m(a){return Math.tan(u*a)}function n(a,b,c,d){return Math.atan2(d-b,c-a)*v}function o(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}function p(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function q(a,b,c){return a<=b?0:a>=c?1:(a-b)/(c-b)}function r(a,b,c){return a+(b-a)*c}function s(a,b){if(a<0)for(;a<0;)a+=b;else if(a>b)for(;a>b;)a-=b;return a}function t(a){return s(a,360)}var u=.0174532925,v=57.2957795;a.getRandomRange=b,a.degToRad=c,a.roundToNearest=d,a.roundUpToNearest=e,a.roundDownToNearest=f,a.Dacos=g,a.Dasin=h,a.Datan=i,a.Datan2=j,a.Dcos=k,a.Dsin=l,a.Dtan=m,a.calcAngle=n,a.calcDistance2=o,a.calcDistance=p,a.getNormalizedByLimits=q,a.lerp=r,a.normalize=s,a.putIn360=t}(a.Maths||(a.Maths={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=function(){function c(){var d=this;this._sounds={},this._atlases={},this._volumeFx=1,this._volumeMusic=1,this._musicRestorePoints={},this._playingSounds={},this.getSpriteAtlas=function(a){return d._atlases&&d._atlases[a]?d._atlases[a]:null},b.Events.coreEvents.on(c.EVENT_SET_MUTE,function(b){a.Common.ApplicationBase.instance.emit(a.Common.Server.LEANDER_SOUND_STATUS,!b),b?this.mute():this.unMute()}.bind(this)),b.Events.coreEvents.on(c.EVENT_SET_MUSIC_VOLUME,function(a){this._volumeMusic=a,!0===this._volumeMusic?this._currentMusic&&this._currentMusic.mute(!1):this._currentMusic&&this._currentMusic.mute(!0)}.bind(this)),b.Events.coreEvents.on(c.EVENT_SET_FX_VOLUME,function(a){this._volumeFx=!0===a?1:0}.bind(this)),b.Events.coreEvents.on(c.EVENT_ON_FX_VOLUME,function(a){this._volumeFx=!0===a?1:0}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){b.Environment.isMobile()&&b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!0)}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(){b.Environment.isMobile()&&b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!1)}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_EXCEPTION,function(){b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!0)}.bind(this)),Howler.mobileAudioEnable=!1}return c.prototype.getCurrentMusic=function(){return this._currentMusic},c.prototype.getatlas=function(){return this._atlases},c.prototype.getCurrentMusicId=function(){return this._currentMusicId},c.prototype.getCurrentMusicId1=function(){return this._currentMusicId1},c.prototype.getVolumeFX=function(){return this._volumeFx},c.prototype.getVolumeMusic=function(){return this._volumeMusic},c.prototype.setVolumeMusic=function(a){this._volumeMusic=a},c.prototype.setVolumeFX=function(a){this._volumeFx=a},c.prototype.purge=function(){this._sounds=null},c.prototype.playCue=function(a,b,c,d){if(void 0===d&&(d=1),a){var e,f;"string"==typeof a?f=a:void 0==b?(f=a.shift(),a.push(f)):f=a[b];var g=this.getSpriteAtlas(f);return g?(g.volume(this._volumeFx*d),e=g.play(f),this._playingSounds[f]=e):(e=this.getSound(a))&&(e.volume(this._volumeFx),e.play()),e.loop=c,e}},c.prototype.stopCue=function(a){if(a){var b;"string"==typeof a?b=a:console.warn("[SoundManager] stopCue() invalid cue parameter:",a);var c=this.getSpriteAtlas(b);c&&this._playingSounds[b]&&c.stop(this._playingSounds[b])}},c.prototype.mute=function(){Howler.mute(!0),this.isMuted=!0},c.prototype.unMute=function(){Howler.mute(!1),this.isMuted=!1},c.prototype.addSound=function(a,b){if(this._sounds[a.id])throw"[SoundManager] Duplicate sound id : "+a.id;if(this._sounds[a.id]=b,a.properties.sprite)for(var c in a.properties.sprite)this._atlases[c]=b},c.prototype.doesSoundExist=function(a){return!!this._sounds[a]},c.prototype.getSound=function(a){if(this._sounds[a])return this._sounds[a];throw"[SoundManager] Sound id doesn't exist : "+a},c.prototype.setMusicRestorePoint=function(a,b){this._musicRestorePoints[a]=b},c.prototype.stopMusic=function(){this._currentMusic&&(this._musicRestorePoints[this._currentMusicId]=this._currentMusic.seek(),this._currentMusic.stop(),this._currentMusic=null)},c.prototype.stopSingleMusic=function(){this._currentMusic&&(this._musicRestorePoints[this._currentMusicId1]=this._currentMusic.seek(),this._currentMusic.stop(),this._currentMusic=null)},c.prototype.fadeMusicOut=function(a,b){b=b||500,a=a||0,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),a*this._volumeMusic,b)},c.prototype.fadeMusicIn=function(a,b){b=b||500,a=a||1,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),this._volumeMusic*a,b)},c.prototype.startMusic=function(a,b,c,d){if(b=b||250,a!=this._currentMusicId)return this.stopMusic(),this._currentMusic=this.getSound(a),c&&this._currentMusic.seek(this._musicRestorePoints[a]||0),this._currentMusic.play(),this._currentMusic.loop(!d),this._currentMusicId=a,this._currentMusic.volume(0),this.fadeMusicIn(1,b),this._currentMusic},c.prototype.startMusicWithSingleSprite=function(a,b,c,d){return b=b||250,this._currentMusic=this.getSound(a),c&&this._currentMusic.seek(this._musicRestorePoints[a]||0),this._currentMusic.play(),this._currentMusic.loop(!d),this._currentMusicId1=a,this._currentMusic.volume(0),this.fadeMusicIn(1,b),this._currentMusic},c.isFormatSupported=function(a){return c.getSupportedFormats().indexOf(a)>-1},c.getSupportedFormats=function(){var a=["ogg","mp3","m4a"],b=[],c=new Audio;return a.forEach(function(a){("probably"==c.canPlayType("audio/"+a)||"maybe"==c.canPlayType("audio/"+a))&&b.push(a)}),b},c.EVENT_SET_FX_VOLUME="sound_manager_set_fx_volume",c.EVENT_ON_FX_VOLUME="sound_manager_on_fx_volume",c.EVENT_SET_MUSIC_VOLUME="sound_manager_set_music_volume",c.EVENT_SET_MUTE="sound_manager_mute",c}();b.SoundManager=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(a,b){if(!h[a]){var c=new i("html_pages_container-"+a.toLowerCase(),b);h[a]=c}return h[a]}var e,f,g={},h={};c.getPageManager=d;var i=function(){function c(a,c){this._pageData={},c?this._$div=c:($("#game_wrapper").append("<div id='"+a+"'></div>"),this._$div=$("#"+a)),this._eventListener=b.Events.createEmitter(),b.Events.coreEvents.on(b.Events.ON_APP_RESIZE,function(){},this)}return c.prototype.getDiv=function(){return this._$div},c.prototype.setVisible=function(a){a?this._$div.show():this._$div.hide()},c.prototype.loadPages=function(d,e,f){function h(){var l=d.shift();k._pageData[l.id]=l,k._$div.append('<div id="'+l.id+'"></div>');var m=$("#"+l.id),n=l.html;"string"!=typeof n&&(n=b.Environment.variant==b.Environment.DEVICE_MOBILE?l.html.mobile:l.html.desktop),$(m).load(n+"?v=1.0.7",function(){var n=a.Core.Utils.getReference(l.module),o=new n(l.id,m);g[l.id]=o,o.emit(a.Core.Events.ON_CREATE),b.Events.coreEvents.emit(c.EVENT_ON_PAGE_LOADED,o),d.length>0?h():(k._$div.show(),k.processCSS(),f()),$(l.div).hide(),e(++j/i,l.id)})}this._$div.hide();var i=d.length,j=0;e(0);var k=this;h()},c.prototype.getPage=function(a){return g[a]},c.prototype.closeOverlay=function(){f&&(f.emit(a.Core.Events.ON_HIDDEN),f=null)},c.prototype.showOverlay=function(b,c){f&&f.id==b||(f&&f.emit(a.Core.Events.ON_HIDDEN),c=c||{},c.isOverlay=!0,f=g[b],f.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.toggleOverlay=function(a,b){f&&f.id==a?this.closeOverlay():this.showOverlay(a,b)},c.prototype.showPage=function(b,c){e&&e.id==b||(e&&e.emit(a.Core.Events.ON_HIDDEN),e=g[b],e.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.processCSS=function(){for(var a in this._pageData){var c=this._pageData[a];if($("head").append('<link id="'+a+'-default" rel="stylesheet" href="'+c.variants_css.default+'?v=1.0.7" type="text/css" />'),b.Environment.variant==b.Environment.DEVICE_MOBILE){var d=c.variants_css.mobile.landscape||c.variants_css.default,e=c.variants_css.mobile.portrait||c.variants_css.default;$("head").append('<link id="'+a+'-landscape" rel="stylesheet" media="all and (orientation:landscape)" href="'+d+'?v=1.0.7">'),$("head").append('<link  id="'+a+'-portrait"rel="stylesheet" media="all and (orientation:portrait)" href="'+e+'?v=1.0.7">')}else{var f=c.variants_css[b.Environment.variant]||c.variants_css.default;$("head").append('<link id="'+a+'" rel="stylesheet" href="'+f+'?v=1.0.7" type="text/css" />')}}},c.EVENT_ON_PAGE_LOADED="page_manager_on_page_loaded",c}();c.PageManager=i}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(c){function d(b,d){var e=c.call(this)||this;return e._$div=d,e.id=b,e._$div.hide(),e._$parent=e._$div.parent(),e._$div.addClass("HTML_page"),e.on(a.Core.Events.ON_HIDDEN,function(){this._$div.hide(),this._data&&this._data.isOverlay&&this._$parent.append(this._$div)}.bind(e)),e.on(a.Core.Events.ON_SHOWN,function(a){this._data=a||{},a&&a.isOverlay?$("body").append(this._$div):this._$parent.append(this._$div),this._$div.show()}.bind(e)),e}return __extends(d,c),d.prototype.getDiv=function(){return this._$div},d.prototype.changeParent=function(a){$("body").append(this._$div),this._$div.show()},d.prototype.hide=function(){this.emit(b.Events.ON_HIDDEN)},d.prototype.show=function(){this.emit(b.Events.ON_SHOWN)},d}(PIXI.utils.EventEmitter);c.Page=d}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){var c=function(){function b(b,c,d){this._onClick=d,this.$_div=$("#"+b),this.$_div.addClass(c),this.$_div.on(a.Core.Events.touchEventType,function(){this.setState(!this.state)}.bind(this))}return b.prototype.setState=function(a){this.state=a,this.$_div.removeClass("switch_on"),this.$_div.removeClass("switch_off"),this.$_div.addClass(a?"switch_on":"switch_off"),this._onClick(this.state)},b}();b.Switch=c}(b.Widgets||(b.Widgets={}))}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=function(){function a(){this.fps=30}return a}();b.StageSetup=c;var d=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(b){a.Core.Renderer.Stage.instance=this,this.setup=b;var d={view:document.getElementById(b.divId),transparent:b.isTransparent,antialias:!0,resolution:b.resolution||2};this._renderer=PIXI.autoDetectRenderer(b.width,b.height,d),a.Core.Time.juggler.add(this),this._update=1e3/this.setup.fps,c.isDebug&&(this._debugLayer=new PIXI.Container,this._debugLayer.name="_debug",this.addChild(this._debugLayer))},c.prototype.onUpdate=function(a){this._update-=a,this._update<=0&&(this._renderer.render(this),this._update=1e3/this.setup.fps,c.isDebug&&this.debug())},c.scaleStage=function(b,c,d){a.Core.Renderer.Stage.instance.x=c||0,a.Core.Renderer.Stage.instance.y=d||0,a.Core.Renderer.Stage.instance.scale.x=b,a.Core.Renderer.Stage.instance.scale.y=b},c.scaleStageBoth=function(b,c,d,e){a.Core.Renderer.Stage.instance.x=d||0,a.Core.Renderer.Stage.instance.y=e||0,a.Core.Renderer.Stage.instance.scale.x=b,a.Core.Renderer.Stage.instance.scale.y=c},c.prototype.debug=function(){function a(c){c.children.forEach(function(c){if("_debug"!=c.name)if(c.children.length>0)a(c);else{var d=new PIXI.Graphics;d.lineStyle(1,65280,1);var e=c.getBounds();d.drawRect(e.x,e.y,e.width,e.height);var f=new PIXI.Point(e.x+c.pivot.x,e.y+c.pivot.y);d.lineStyle(4,65280,1),d.drawCircle(f.x,f.y,10),d.lineStyle(1,65280,1),d.moveTo(f.x-20,f.y),d.lineTo(f.x+20,f.y),d.moveTo(f.x,f.y-20),d.lineTo(f.x,f.y+20),b._debugLayer.addChild(d)}})}this._debugLayer.removeChildren();var b=this;a(this),this.setChildIndex(this._debugLayer,this.children.length-1)},c.isDebug=!1,c}(PIXI.Container);b.Stage=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(c){
function d(a){for(var b in a)o[b]=new p(b,a[b])}function e(a){return o[a]}function f(){return n.length?n[n.length-1]:m}function g(a,c,d,e,f){var g=o[a],h=g.getSceneClass(),i=new h(g,c,e,f);b.Stage.instance.addChild(i),n.push(i),d&&d.process(i)}function h(b){n.length&&n.pop().emit(a.Core.Events.ON_DESTROY)}function i(a){return o[a]}function j(){return m?m.getSceneProfile():null}function k(c,d,e,f,g){if(!o[c])throw"[SceneManager] Scene does not exist : "+c;var h=o[c];if(m&&h.class==m.getSceneProfile().class)e(m,!1);else{m&&m.emit(a.Core.Events.ON_DESTROY);var i=h.getSceneClass(),j=new i(h,d,function(a){b.Stage.instance.addChild(a),e(a,!0)},f);m=j}}function l(c,d,e,f,g){if(!o[c])throw"[SceneManager] Scene does not exist : "+c;var h=o[c];if(m&&h.class==m.getSceneProfile().class)e(m,!1);else{var i=function(b){m&&m.emit(a.Core.Events.ON_DESTROY),m=b},j=h.getSceneClass();new j(h,d,function(a){b.Stage.instance.addChild(a),e(a,!0),g?(m&&(m.cacheAsBitmap=!0),g.process(a,m,function(){i(a)})):i(a)},f)}}var m,n=[],o={},p=function(){function b(a,b){this.id=a,this.class=b.module,this.layoutId=b.layout_id,this.manifestFilename=b.asset_manifest}return b.prototype.getSceneClass=function(){return a.Core.Utils.getReference(this.class)},b.prototype.getLayout=function(a){return a.getPIXIAsset(this.layoutId).data},b}();c.SceneData=p;var q=function(){function a(a,b,c){this.type=a,this.duration=b||.3,this.ease=c||Linear.easeNone}return a.prototype.process=function(b,c,d){switch(this.type){case a.FADE_IN:b.alpha=0,TweenLite.to(b,this.duration,{alpha:1,ease:this.ease,onComplete:d})}},a.FADE_IN="fade_in",a.FADE_OUT="fade_out",a}();c.SceneTransition=q,c.init=d,c.getSceneData=e,c.getCurrentScene=f,c.showSceneAsOverlay=g,c.closeOverlay=h,c.doesSceneExist=i,c.getCurrentSceneProfile=j,c.showScene=k,c.showSceneOLD=l}(b.SceneManager||(b.SceneManager={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i._sceneProfile=e,i._data=f,i.interactive=!0,i.interactiveChildren=!0,i._assets=b.AssetManager.get(e.manifestFilename),i._sounds=i._assets.getSoundManager();var j=new a.Core.Renderer.UI.BoundsFiller(c.Stage.instance.setup.width,c.Stage.instance.setup.height,0,.01);if(j.name="_bounds_",j.x=0,j.y=0,i.addChild(j),!i._sceneProfile.manifestFilename)throw"[Scene] No manifest specified for scene : "+e.class;return i._assets.load(i._sceneProfile.manifestFilename,function(){if(!this._assets.getPIXIAsset(e.layoutId))throw"[Scene] Layout id doesn't exist in assets : "+e.layoutId;this._layout=new c.SceneBuilder(this,this._assets,this._assets.getPIXIAsset(e.layoutId).data),this.emit(a.Core.Events.ON_CREATE),this.onCreate(),g&&g(this)}.bind(i)),i.on(a.Core.Events.ON_DESTROY,i.onDestroy),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,i.onResize,i),i}return __extends(e,d),e.prototype.getLayout=function(){return this._layout},e.prototype.scaleScene=function(b,c,d){this.scale.x=b,this.scale.y=b;var e=this.getBounds();this.x=+((e.width-a.Core.Renderer.Stage.instance.width*b)/2+(c||0)),this.y=+((e.height-a.Core.Renderer.Stage.instance.height)/2+(d||0))},e.prototype.scaleSceneTween=function(b,c,d,e,f){d=d||0,e=e||0;var g=this.getBounds();this.pivot.x=g.width/2,this.pivot.y=g.height/2,this.x=a.Core.Renderer.Stage.instance.width/2+d,this.y=a.Core.Renderer.Stage.instance.height/2+e;var h=this.x+d,i=this.y+e;(new TimelineLite).add([TweenLite.to(this.position,c,{x:h,y:i,ease:Cubic.easeOut}),TweenLite.to(this.scale,c,{x:b,y:b,ease:Cubic.easeOut})]),f&&a.Core.Time.juggler.setTimeout(1e3*c,f)},e.prototype.areAssetsReady=function(){return this._assets.isLoaded()},e.prototype.promotionalchild=function(){},e.prototype.getAssets=function(){return this._assets},e.prototype.getSceneProfile=function(){return this._sceneProfile},e.prototype.onCreate=function(){},e.prototype.onResize=function(b,c){a.Common.SwipeForFullScreen.init()},e.prototype.onDestroy=function(){this.removeAllListeners(a.Core.Events.ON_DESTROY),a.Core.Events.coreEvents.off(a.Core.Events.ON_APP_RESIZE,this.onResize),this._layout.destroy(),this.parent.removeChild(this)},e}(PIXI.Container);c.Scene=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(DO){var Core;!function(Core){var Renderer;!function(Renderer){var SceneBuilder=function(){function SceneBuilder(a,b,c){var d=this;this._components={},this.fit=function(a){var b=a._config;if(b.fit){var c=d.getComponent(b.fit);if(c){var e=b.scale||{x:1,y:1};a.scale.set(e.x,e.y);for(var f=a.height;a.width>.8*c.width;)a.scale.x-=.05,a.scale.y-=.05;if(a.position.y=d.getCoords(b.position.y,"y")-.5*(f-a.height),!a.modifiedSetText){var g=d.fit,h=a.setText;a.setText=function(b,c){h(b,c),g(a)}.bind(a),a.modifiedSetText=!0}}}},this._layoutData=c,this._assets=b,this._parentScene=a,this.build(a,c),this.refresh(),Core.Events.coreEvents.on(Core.Events.ON_APP_RESIZE,function(){},this)}return SceneBuilder.prototype.getLayoutParams=function(){return this._layoutData.params},SceneBuilder.prototype.getLayoutName=function(){return this._layoutData.name||"Unnamed layout"},SceneBuilder.prototype.getAssets=function(){return this._assets},SceneBuilder.prototype.bringComponentToFront=function(a){var b=this.getComponent(a);this._parentScene.addChild(b)},SceneBuilder.prototype.deleteComponent=function(a){var b=this.getComponent(a);b&&(b.parent.removeChild(b),delete this._components[a])},SceneBuilder.prototype.getComponent=function(a){return this._components[a]},SceneBuilder.prototype.getComponentPlugin=function(a,b){var c;return this.applyToComponents(function(d){d.name==a.name&&(c=a._plugins[b])}),c},SceneBuilder.prototype.setComponentText=function(a,b){var c=this.getComponent(a);c&&c.setText&&c.setText(b)},SceneBuilder.prototype.applyToComponents=function(a){for(var b in this._components)a(this._components[b])},SceneBuilder.prototype.destroy=function(){this.applyToComponents(function(a){a.emit(DO.Core.Events.ON_DESTROY),this.destroyPlugins(a)}.bind(this))},SceneBuilder.prototype.refresh=function(){this.applyToComponents(this.updateComponent.bind(this))},SceneBuilder.prototype.triggerFX=function(a){this.applyToComponents(function(b){var c=b._config;if(c.fx&&c.fx[a]){[].concat(c.fx[a]).forEach(function(a){var c=Core.Utils.getReference(a.split("(")[0]),d=a.match(/\(([^)]+)\)/)[1].split(",");d.unshift(b),c(d[0],d[1],d[2],d[3],d[4],d[5])})}})},SceneBuilder.prototype.destroyPlugins=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.applyToComponents(function(b){b.name==a.name&&(a=b)});var d=a._plugins;if(d)for(var e in d){var f=d[e];f.destroy()}},SceneBuilder.prototype.build=function(container,layoutData){layoutData.bounds||(layoutData.bounds={x:0,y:0,width:container.getBounds().width,height:container.getBounds().height}),layoutData.components.forEach(function(componentData){var assets=this._assets;componentData.construct=componentData.construct||"PIXI.Container()";var component;if(0==componentData.construct.indexOf("assets")?component=eval(componentData.construct):"vie"!==Core.Environment.launchVariables.lang.toLowerCase()&&"slo"!==Core.Environment.launchVariables.lang.toLowerCase()&&"lit"!==Core.Environment.launchVariables.lang.toLowerCase()||"button_splash_continue"!==componentData.id?component=eval("new "+componentData.construct):(componentData.construct=componentData.construct.replace("immortal","roboto"),component=eval("new "+componentData.construct)),componentData.components&&this.build(component,componentData),component.name=componentData.id,component._config=componentData,"win_manager"==component.name?container.addChildAt(component,1):container.addChild(component),this._components[componentData.id])throw"[SceneBuilder] Duplicate component name in layout: "+componentData.id;this._components[componentData.id]=component,componentData.plugins&&(component._plugins=ComponentPlugin.createPlugins(component,componentData.plugins,this._assets)),component.emit(DO.Core.Events.ON_CREATE,componentData,this);var plugins=component._plugins;if(plugins)for(var pluginId in plugins){var plugin=plugins[pluginId];plugin.init()}}.bind(this))},SceneBuilder.prototype.updateComponent=function(component){var componentData=component._config;if(componentData.pivot=componentData.pivot||"CENTRE",this.setPivot(componentData.pivot,component),componentData.position&&this.setPosition(componentData.position,component),componentData.scale&&this.setScale(componentData.scale,component),componentData.filters){var filterList_1=[];componentData.filters.forEach(function(filterConstuctor){var filter=eval("new "+filterConstuctor);filterList_1.push(filter)}),component.filters=filterList_1}componentData.blend_mode&&(component.blendMode=componentData.blend_mode),null!=componentData.alpha&&(component.alpha=componentData.alpha),component.visible=null==componentData.visible||1==componentData.visible,componentData.fit&&this.fit(component)},SceneBuilder.prototype.setInteraction=function(a,b){b.interactive=!0,b.on("touchstart",function(b){a.sound&&this._assets.getSound(a.sound).play(),this._parentScene.emit(DO.Core.Events.ON_INTERACTION,b)}.bind(this))},SceneBuilder.prototype.setPosition=function(a,b){a=a||{x:0,y:0},b.x=this.getCoords(a.x,"x"),b.y=this.getCoords(a.y,"y"),b.x+=this._layoutData.bounds.x||0,b.y+=this._layoutData.bounds.y||0},SceneBuilder.prototype.setPivot=function(a,b){var c=b.getBounds(),d=new PIXI.Point;switch(a){case"CENTRE":d.x=c.width/2,d.y=c.height/2;break;case"TOP_LEFT":d.x=0,d.y=0;break;case"TOP_RIGHT":d.x=c.width,d.y=0;break;case"BOTTOM_RIGHT":d.x=c.width,d.y=c.height;break;case"BOTTOM_LEFT":d.x=0,d.y=c.height;break;case"TOP":d.x=c.width/2,d.y=0;break;case"BOTTOM":d.x=c.width/2,d.y=c.height;break;case"LEFT":d.x=0,d.y=c.height/2;break;case"RIGHT":d.x=c.width,d.y=c.height/2}b.pivot=d},SceneBuilder.prototype.setScale=function(a,b){b.scale=new PIXI.Point(a.x||1,a.y||1)},SceneBuilder.prototype.getCoords=function(a,b){var c;if(isNaN(a)){var d=parseFloat(a.substr(a,a.indexOf("%")));c="x"==b?this._layoutData.bounds.width*(d/100):this._layoutData.bounds.height*(d/100)}else c=a;return c},SceneBuilder}();Renderer.SceneBuilder=SceneBuilder;var ComponentPlugin=function(a){function b(b,c,d){var e=a.call(this)||this;return e._validParentConstructors=[],e._params=c||{},e._parentComponent=b,e._assets=d,e.validate(),e}return __extends(b,a),b.createPlugins=function(a,b,c){var d={};for(var e in b){var f=b[e];if(!f.class)throw"[ComponentPlugin] No 'class' specified for plugin : "+e;var g=Core.Utils.getReference(f.class),h=new g(a,f.params,c);d[e]=h}return d},b.prototype.init=function(){},b.prototype.destroy=function(){},b.prototype.validate=function(){Core.isDebugMode()},b}(PIXI.utils.EventEmitter);Renderer.ComponentPlugin=ComponentPlugin}(Renderer=Core.Renderer||(Core.Renderer={}))}(Core=DO.Core||(DO.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(d){var e=a.Core.Events,f=function(a){function b(b,c){var d=a.call(this)||this;return d.beginFill(b||0),d.alpha=c||.5,d.drawRect(0,0,1e4,1e4),d}return __extends(b,a),b}(PIXI.Graphics);d.BackgroundDimmer=f;var g=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.beginFill(d,e),f.drawRect(0,0,b,c),f}return __extends(b,a),b}(PIXI.Graphics);d.BoundsFiller=g;var h=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.clip=b.getMovieClip(c),f.clip.loop=e,d&&f.clip.gotoAndPlay(0),f.addChild(f.clip),f}return __extends(b,a),b}(PIXI.Container);d.MovieClipWrapper=h;var i=function(a){function b(b,c){var d=a.call(this)||this;return d.texture=b.getPIXITexture(c),d}return __extends(b,a),b}(PIXI.Sprite);d.Image=i;var j=function(a){function b(b,c,d,f){var g=a.call(this)||this;return g._state=!0,g._spriteOn=new PIXI.Sprite(b.getPIXITexture(c)),g.addChild(g._spriteOn),g._spriteOff=new PIXI.Sprite(b.getPIXITexture(d)),g.addChild(g._spriteOff),g.setState(f),g.interactive=!0,g.buttonMode=!0,g.on(e.getTouchEvent(),g.onPress.bind(g)),g.on(e.getClickEvent(),g.onPress.bind(g)),g}return __extends(b,a),b.prototype.getState=function(){return this._state},b.prototype.onPress=function(){this.setState(!this._state)},b.prototype.setState=function(a){this._state=a,this._spriteOn.visible=a,this._spriteOff.visible=!a},b}(PIXI.Container);d.Toggle=j;var k=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.setText=function(a,b){e.text=a,e.updateText(),e.anchor.set(.5,.5),e.pivot.x=0},c=a.Core.Lang.getPhrase(c),e.once("added",function(){return e.setText(c)}),e}return __extends(c,b),c}(PIXI.Text);d.StandardText=k;var l=function(a){function b(b,c){var d=a.call(this)||this;return d._chars=[],d._assets=b,d.once(e.ON_CREATE,function(a){this.setup(a),c&&this.setText(c)}.bind(d)),d}return __extends(b,a),b.prototype.setText=function(a){this.cacheAsBitmap=!1,this.visible=!0;var b=0,c=0,d=0,e="";this._chars.forEach(function(f){var g=a.substr(b++,1);if(g){if(this._params.mappings[g]){if(f.texture=this._assets.getPIXITexture(this._params.mappings[g]),f.x=c,this._params.fixed_width){var h=this._params.fixed_width;"."!=g&&","!=g||(f.x-=25,h=40),c+=h,d+=h}else{var i=f.width+(this._params.kerning||0);c+=i,d+=i}this.addChild(f)}e=g}else this.removeChild(f)}.bind(this)),this.cacheAsBitmap=!0,this.pivot.x=d/2.5},b.prototype.setup=function(a){this._params=a.params;for(var b=0;b<this._params.max_chars;b++){var c=new PIXI.Sprite;c.anchor.x=.5,this._chars.push(c)}},b}(PIXI.Container);d.SpriteText=l;var m=function(b){function c(c,d){var e=this;return c=a.Core.Lang.getPhrase(c),e=b.call(this,c,d)||this,e.once(a.Core.Events.ON_CREATE,function(){this._position=this.position.clone(),this.setText(c)}.bind(e)),e}return __extends(c,b),c.prototype.setText=function(a){this.text=a,this.updateText(),this.x=this._position.x-this.textWidth/2,this.y=this._position.y-this.textHeight/2},c}(PIXI.extras.BitmapText);d.BitmapText=m;var n=function(d){function f(c,f,g,h,i,j){var k=d.call(this)||this;return k._assets=c,k._textureIdUp=f,k._textureIdDown=g,k._uses=i||9999999,k._buttonImage=c.getPIXISprite(f),k.addChild(k._buttonImage),k.buttonMode=!0,k.interactive=!0,k.on(e.pressup(),k.onPress.bind(k)),k.on(e.getTouchEvent(),k.onPress.bind(k)),h&&(j=j||{},j.align="center",k._label=new PIXI.Text(b.Lang.getPhrase(h),j),k.addChild(k._label),k._label.anchor.x=.5,k._label.anchor.y=.5,k._label.pivot.x=k._label.width/2,k._label.pivot.y=k._label.height/2,k._label.x=k.width/2,k._label.y=k.height/2),k.on(a.Core.Events.ON_DESTROY,function(){this.off(e.pressup(),this.onPress),this.off(e.getClickEvent(),this.onPress)}.bind(k)),k}return __extends(f,d),f.prototype.onPress=function(){this.interactive=!1;var b={x:this.scale.x,y:this.scale.y};this.scale.x=.9*b.x,this.scale.y=.9*b.y,this._textureIdDown&&(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdDown)),a.Core.Time.juggler.setTimeout(function(){this.scale=b,this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp),c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name),this._uses--,this._uses>0?this.interactive=!0:this.interactive=!1}.bind(this),150)},f}(PIXI.Container);d.SpriteButton=n}(c.UI||(c.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){!function(b){function c(b,c,d,e){c=Number(c)||0,d=Number(d)||.25,e=Number(e||5);var f=b.scale.x,g=b.scale.y;b.visible=!1,b.scale.x=.7*f,b.scale.y=.7*g,a.Core.Time.juggler.setTimeout(function(){b.visible=!0,TweenLite.to(b.scale,d,{x:f,y:g,ease:Back.easeOut.config(e)})},c)}function d(b,c,d,e){c=Number(c)||0,d=Number(d)||.4,e=Number(e)||1.3;var f=b.scale.x,g=b.scale.y;b.scale.x=e,b.scale.y=e,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b.scale,d,{x:f,y:g,ease:Cubic.easeOut})},c)}function e(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=0,b.visible=!0,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1})},c)}function f(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=1,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:0,onComplete:function(){b.visible=!1}})},c)}b.popOut=c,b.slam=d,b.fadeIn=e,b.fadeOut=f}(b.FX||(b.FX={}))}(b.UI||(b.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(c){var d=function(){function b(a){this.speed=100,this.totalLength=0,this._waypoints=[],this.id=a}return b.prototype.addWaypoint=function(a){var b={x:a.x,y:a.y};this._waypoints.push(b),this.calcPathLength(),b.distance=this.totalLength},b.prototype.getPosition=function(b){for(var c,d=a.Core.Maths.normalize(b/1e3*this.speed,this.totalLength),e=this._waypoints.length-2;e>=0;e--){var f=this._waypoints[e];if(d>f.distance){var g=this._waypoints[e+1],h=g.distance-f.distance,i=d-f.distance,j=i/h;c=new PIXI.Point(a.Core.Maths.lerp(f.x,g.x,j),a.Core.Maths.lerp(f.y,g.y,j));break}}return c},b.prototype.calcPathLength=function(){this.totalLength=0;for(var b=this._waypoints[0],c=0;c<this._waypoints.length;c++)this.totalLength+=a.Core.Maths.calcDistance(b,this._waypoints[c]),b=this._waypoints[c]},b}();c.ParticlePath=d;var e=function(){function c(a){this.emitDuration=-1,this.emitRate=2,this.lifetime={min:1e3,max:3e3},this.scale={min:1,max:1},this.rotation={min:0,max:360},this.gravity={x:0,y:8},this.speed={min:20,max:40},this.spin={min:0,max:0},this.shrinkFactor=0,this.drag=0,this.acceleration=0,this.direction={min:0,max:360},this.maxParticles=10,this.turbulence={min:0,max:0},this.blendMode=PIXI.BLEND_MODES.NORMAL,this.doRandomTextures=!1,this._textures=[],this._clips=[],this._paths={},a=a||{},this.emitDuration=a.emitDuration||1e3,this.emitRate=a.emitRate||1,this.lifetime=a.lifetime||{min:1e3,max:1e3},this.scale=a.scale||{min:1,max:1},this.rotation=a.rotation||{min:0,max:0},this.gravity=a.gravity||{x:0,y:0},this.speed=a.speed||{min:10,max:10},this.spin=a.spin||{min:0,max:0},this.shrinkFactor=a.shrinkFactor||0,this.drag=a.drag||0,this.direction=a.direction||{min:0,max:360},this.maxParticles=a.maxParticles||10,this.turbulence=a.turbulence||{min:0,max:0},this.blendMode=a.blendMode||PIXI.BLEND_MODES.NORMAL,this.autoStart=a.autoStart||!1,this.textures=a.textures,this.movieclips=a.movieclips,this.paths=a.paths,this.doRandomTextures=a.random_textures,this.touchCallback=a.touch_callback,this.acceleration=a.acceleration||0}return c.prototype.createPath=function(a){var b=new d(a);return this._paths[a]=b,b},c.prototype.setPath=function(a){this._currentPath=this._paths[a]},c.prototype.clearCurrentPath=function(){this._currentPath=null},c.prototype.getNextPosition=function(a){return this._currentPath?this._currentPath.getPosition(a):new PIXI.Point(0,0)},c.prototype.getNextTexture=function(){return this.doRandomTextures?this._textures[b.Maths.getRandomRange(0,this._textures.length-1,!0)]:(this._textures.unshift(this._textures.pop()),this._textures[0])},c.prototype.getNextMovieClip=function(){return this._clips.unshift(this._clips.pop()),this._clips[0]},c.prototype.addTexture=function(a){this._textures.push(a)},c.prototype.addMovieClip=function(b,c){for(var d=0;d<this.maxParticles;d++){var e=b.getMovieClip(c,!0,null,!0);e.loop=!0,this._clips.push(e)}this._clips=a.Core.Utils.shuffleArray(this._clips)},c}();c.ParticleSetup=e;var f=function(b){function c(a,c){var d=b.call(this)||this;return d.isActive=!1,d._dir={x:0,y:0},d._g={x:0,y:0},d._spin=0,d._shrink=0,d._container=a,d._juggler=c,d}return __extends(c,b),c.prototype.onUpdate=function(a){var b=.001*a;this.x+=this._speed*this._dir.x*b,this.y+=this._speed*this._dir.y*b,this._speed+=this._acceleration*b,this._speed-=this._drag*b,this._g.x+=this._gravity.x*b,this._g.y+=this._gravity.y*b,this.x+=this._g.x*b,this.y+=this._g.y*b,this.rotation+=this._spin*b,this._life-=a,this._life<=0&&this.kill(),this.scale.x-=this._shrink*b,this.scale.y-=this._shrink*b,this.scale.x<.01&&this.kill(),this.x+=Math.sin(this.rotation)*this._turbulence*b,this.y-=Math.cos(this.rotation)*this._turbulence*b},c.prototype.start=function(b,c){this._onDead=b,this.isActive=!0,this._container.addChild(this),this._juggler.add(this),this.blendMode=c.blendMode,this._clip&&(this.removeChild(this._clip),this._clip=null);var d=c.getNextTexture();this._clip=c.getNextMovieClip(),d?this.texture=d:(this.addChild(this._clip),this._clip.play()),this.anchor.x=.5,this.anchor.y=.5;var e=a.Core.Maths.getRandomRange;this._shrink=c.shrinkFactor;var f=e(c.scale.min,c.scale.max);this.scale.x=f,this.scale.y=f,this._spin=e(c.spin.min,c.spin.max),this._life=e(c.lifetime.min,c.lifetime.max),this._direction=e(c.direction.min,c.direction.max),this._rotation=e(c.rotation.min,c.rotation.max),this._speed=e(c.speed.min,c.speed.max),this._shrink=c.shrinkFactor,this._drag=c.drag,this._gravity=c.gravity,this._dir={x:a.Core.Maths.Dsin(this._direction),y:-a.Core.Maths.Dcos(this._direction)},this._g={x:0,y:0},this._turbulence=e(c.turbulence.min,c.turbulence.max),this._acceleration=c.acceleration},c.prototype.kill=function(){this.isActive=!1,this._container.removeChild(this),this._juggler.remove(this),this._onDead(this)},c}(PIXI.Sprite);c.Particle=f;var g=function(b){function c(){var c=b.call(this)||this;return c.isActive=!1,c._particles=[],c._activeCount=0,c.interactive=!1,c.interactiveChildren=!1,c.once(a.Core.Events.ON_DESTROY,function(){this.stop()}.bind(c)),c.once(a.Core.Events.ON_CREATE,function(a,b){if(a&&a.params){var c=new e(a.params);if(c.movieclips&&c.movieclips.forEach(function(a){c.addMovieClip(b.getAssets(),a)}.bind(this)),c.textures&&c.textures.forEach(function(a){var d=b.getAssets().getPIXITexture(a);c.addTexture(d)}.bind(this)),c.paths){for(var d in c.paths)!function(a){var b=c.createPath(a),d=c.paths[a];b.speed=d.speed||10,d.waypoints.forEach(function(a){b.addWaypoint(new PIXI.Point(a.x,a.y))}),c.setPath(a)}(d)}this.init(c)}}.bind(c)),c}return __extends(c,b),c.prototype.init=function(b,c){this._setup=b,this._juggler=c||a.Core.Time.juggler;for(var d=0;d<this._setup.maxParticles;d++){var e=new f(this,this._juggler);this._particles.push(e)}this._setup.autoStart&&this.start()},c.prototype.setInteraction=function(a){this._touchCallback=a,a?(this.interactive=!0,this.interactiveChildren=!0,this._particles.forEach(function(a){a.interactive=!0,a.on("mousedown",this._touchCallback)}.bind(this))):(this.interactive=!1,this.interactiveChildren=!1,this._particles.forEach(function(a){a.interactive=!1,a.off("mousedown",this._touchCallback)}.bind(this)))},c.prototype.start=function(){this.isActive||(this.isActive=!0,this._activeCount=0,this._time=0,this._juggler.add(this),this._emissionStopDelay=this._juggler.setTimeout(function(){this.stop()}.bind(this),this._setup.emitDuration),this._emissionDelay=this._juggler.setInterval(this.emitParticles.bind(this),1e3/this._setup.emitRate))},c.prototype.stop=function(){this.isActive&&(this._juggler.remove(this),this._emissionDelay.stop(),this._emissionStopDelay.stop(),this.isActive=!1)},c.prototype.onUpdate=function(a){this._time+=a},c.prototype.emitParticles=function(){var a=this.getParticle();a&&(a.position=this._setup.getNextPosition(this._time)||a.position,this._activeCount++,a.start(this.onParticleDied.bind(this),this._setup))},c.prototype.getParticle=function(){for(var a=null,b=0;b<this._particles.length;b++)if(!this._particles[b].isActive){a=this._particles[b];break}return a},c.prototype.onParticleDied=function(a){0==--this._activeCount&&this.stop()},c}(PIXI.Container);c.Particles=g}(c.FX||(c.FX={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(a,b,d){var f=e.getReference(a.platform);c.server=new f(a,b,d)}var e=a.Core.Utils,f=a.Core.Time;c.RESPONSE_ERROR="response_error",c.RESPONSE_ALERT="response_alert",c.RESPONSE_OPEN="response_open",c.BASE_GAME_BROKEN_RESPONSE_OPEN="base_broke_response_open",c.RESPONSE_AUTH="response_auth",c.RESPONSE_RESULTS="response_results_ready",c.RESPONSE_STATE="response_state",c.RESPONSE_USER="response_user_data",c.RESPIN_EVENT="respin_trigger",c.REQUEST_AUTH="request_auth",c.GAME_LAUNCH_REQUEST="request_game_launch",c.GAME_CONFIG_REQUEST="request_game_config",c.GAME_INITIALIZE_REQUEST="request_game_initializeAfterConfig",c.REQUEST_USER="request_user",c.REQUEST_TRANSACTIONS="request_transactions",c.REQUEST_OPEN="request_open",c.AUTOPLAY_ACTIVATE_REQUEST="autoplay_activation__request",c.ASSETS_LOAD_COMPLETE="assets_load__complete",c.ASSETS_LOAD_COMPLETES="assets_load__completes",c.END_GAME_REQUEST="end_game_request",c.LEANDER_SOUND_STATUS="sound_status_leander",c.REQUEST_RESULTS="request_results",c.REQUEST_PRELOAD_STARTED="request_preload_started",c.REQUEST_PRELOAD_END="request_preload_end",c.LEANDER_REQUEST_PRELOAD_UPDATE="request_preload_update",c.REQUEST_PROGRESS_UPDATED="request_progress_updated",c.autoButtonBool=void 0,c.autobool=void 0,c.betLevel=1,c.unfinishedDataBool=!1;var g=function(){function a(){}return a.SET_BETTING_PARAMS="operator_set_betting_params",a}();c.OperatorEvents=g;var h=function(){function a(a,b,c){this._creationDate=(new Date).getTime(),this._connection=a,this._juggler=f.juggler,this._target=b}return a}();c.InterfaceBase=h;var i=function(){function a(b){var c=this;this._response=b,this.getCreditValues=function(){return c._response.betConfig.creditValues},this.getDefaultBetLevel=function(){return c._response.betConfig.defaultBetState.bet_level},this.getDefaultCoinLevel=function(){return c._response.betConfig.defaultBetState.coin_level},this.getMaxBetLevel=function(){return c._response.betConfig.maxBetLevel},this.getWaysCredits=function(){return c._response.betConfig.waysCredits},a.current=this}return a}();c.ResponseConfig=i;var j=function(){function a(b){this._response=b,a.current=this}return a.prototype.isFreeplay=function(){return this._response.is_freeplay},a.prototype.getLastGameState=function(){return this._response.last_state||{}},a.prototype.getLastGameId=function(){return this.getLastGameState().game},a.prototype.getLanguageData=function(){return this._response.lang},a.prototype.getGameProfile=function(){return this._response.profile},a.prototype.getSessionId=function(){return this._response.session},a.prototype.wasLastRoundAcknowledged=function(){return this._response.last_round_acknowledged},a.prototype.getPlayerNickname=function(){return this._response.player.nickname||"Player"},a.prototype.getPlayerId=function(){return this._response.player.id||-1},a.prototype.getPlayerCurrency=function(){return this._response.player.currency.toUpperCase()},a.prototype.getPrefixCurrency=function(){return this._response.player.prefixCurrency},a.prototype.getSuffixCurrency=function(){return this._response.player.suffixCurrency},a.prototype.getCurrencyDecimalPlaces=function(){return this._response.player.currencyDecimalPlaces},a.prototype.getPlayerLanguage=function(){return this._response.player.lang},a}();c.ResponseAuth=j;var k=function(){function a(b){this._response=b,a.current=this}return a.prototype.getGameId=function(){return this._response.game},a.prototype.getGameState=function(){return this._response.state||{}},a.prototype.getBetState=function(){return this._response.bet_state},a}();c.ResponseOpen=k;var l=function(){function a(b){this._response=b,a.current=this}return a.prototype.getRaw=function(){return this._response},a.prototype.getNextGameId=function(){return this._response.next_game},a.prototype.getLastCashBet=function(){return this._response.total_bet_cash||0},a.prototype.getLastCashWin=function(){return this._response.total_win_cash||0},a.prototype.getGameId=function(){return this._response.game},a.prototype.areGamesPending=function(){return this._response.games_pending},a.prototype.isNextGame=function(a){return!!this.getNextGameId()&&this.getNextGameId().indexOf(a)>-1},a.prototype.isGame=function(a){return!!this.getGameId()&&this.getGameId().indexOf(a)>-1},a.prototype.getEvaluatedResults=function(){return this._response.eval},a.prototype.getState=function(){return this._response.state||{}},a.prototype.isComplete=function(){return this._response.state.is_complete||!1},a.prototype.getRoundId=function(){return this._response.round_id},a}();c.ResponseResults=l;var m=function(){function a(b){this._response=b,a.current=this}return a.prototype.getRaw=function(){return this._response},a.prototype.getNextGameId=function(){return this._response.next_game},a.prototype.getLastCashBet=function(){return this._response.total_bet_cash||0},a.prototype.getLastCashWin=function(){return this._response.total_win_cash||0},a.prototype.getGameId=function(){return this._response.game},a.prototype.areGamesPending=function(){return this._response.games_pending},a.prototype.isNextGame=function(a){return!!this.getNextGameId()&&this.getNextGameId().indexOf(a)>-1},a.prototype.isGame=function(a){return!!this.getGameId()&&this.getGameId().indexOf(a)>-1},a.prototype.getEvaluatedResults=function(){return this._response.eval},a.prototype.getState=function(){return this._response.state||{}},a.prototype.isComplete=function(){return this._response.state.is_complete||!1},a.prototype.getRoundId=function(){return this._response.round_id},a}();c.ResponseState=m;var n=function(){function a(b){this._response=b,this._response.stats=this._response.stats||{},a.current=this}return a.prototype.getCashLoss=function(){return this._response.cash_loss},a.prototype.getBalance=function(){return this._response.balance},a.prototype.setBalance=function(a){return this._response.balance=a},a.prototype.getBalanceFormatted=function(){return b.Currency.format(this._response.balance)},a.prototype.getSessionDuration=function(){return this._response.stats.session_duration},a.prototype.getSessionBetCount=function(){return this._response.stats.bet_count},a.prototype.getSessionTotalBetCash=function(){return this._response.stats.total_bet_cash},a.prototype.getSessionTotalWinCash=function(){return this._response.stats.total_win_cash},a.prototype.getSessionRTP=function(){return this._response.stats.rtp||0},a}();c.ResponseUser=n;var o=function(){function a(b){this._response=b,a.current=this}return a.prototype.getResponseData=function(){return this._response},a}();c.ResponseTransactions=o;var p=function(){function b(a){this._response=a,b.current=this}return b.prototype.getPlayerMessage=function(){return this._response.lang?a.Core.Lang.getPhrase(this._response.lang):a.Core.Lang.getPhrase("err_server_generic")},b.prototype.isFatal=function(){return this._response.fatal},b.prototype.getErrorObject=function(){return this._response.err},b.prototype.getErrorMessage=function(){return this._response.err?this._response.err.msg||"no error msg available":"no error object available"},b}();c.ResponseAlert=p;var q=function(){function a(){}
return a.setTime=function(b){a.time.setTime(b)},a.getFormattedTime=function(){var b=new Date;return a.timeFormat.format(b)},a.time=new Date,a.timeFormat=Intl?Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"}):{format:function(a){var b=a.toLocaleTimeString();return b.substring(0,b.lastIndexOf(":"))}},a}();c.ServerTime=q,c.createInstance=d}(b.Server||(b.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Common.Server,e=a.Core.Environment,f=function(f){function g(c,g,h){var i=f.call(this,c,g,h)||this;return i._queue=[],i.stickyWildPositions=[],i.stackedWildReels=[],i.featureOffset=[],i.symbol=["B1","W1","H1","H2","H3","M1","M2","M3","L1","L2","L3","L4","L5","B2","B3"],i.symbolMap={0:"B1",1:"W1",2:"H1",3:"H2",4:"H3",5:"M1",6:"M2",7:"M3",8:"L1",9:"L2",10:"L3",11:"L4",12:"L5"},i.freeSpinData={spins:0,total:0,remain:0,freeSpinWin:0},i.isBaseGameBroken=!1,i.Socket=new WebSocket("wss://staging.reach-dev.com:445/rgs/endpoint"),i.Socket.onopen=function(a){console.log("error")},i.Socket.onerror=function(a){console.log("WebSocket Error "+a)},setInterval(function(){this.Socket.send("h")}.bind(i),1e4),i.launchVariables=a.Core.Utils.getUrlVars(),a.Common.Server.UKGC=!0,b.ApplicationBase.instance.on("force_result",function(a){if(null!=a){var b={results:[{force_feature:[a],variables:[],view:[]}]};if("free_easter"==a||"free_halloween"==a||"free_christmas"==a){var c=a.split("_");b.results[0].force_feature[0]=c[0],b.results[0].force_feature[1]=a}var d=e.launchVariables.playToken,f="https://staging.reach-dev.com:445/rgs/rest/rig/"+d,g=new XMLHttpRequest;g.onreadystatechange=function(){4===g.readyState&&g.status},g.open("POST",f,!0),g.withCredentials=!0,g.send(JSON.stringify(b))}}.bind(i),i),i._target.on(d.REQUEST_AUTH,function(a){this.sendInit("AUTH",{action:"init"})}.bind(i)),i._target.on(d.GAME_LAUNCH_REQUEST,function(a){this.sendGameLaunch("LAUNCH",{game_session:a})}.bind(i)),i._target.on(d.GAME_CONFIG_REQUEST,function(a){this.sendConfigRequest("CONFIG",{game_name:e.launchVariables.gameId})}.bind(i)),i._target.on(d.GAME_INITIALIZE_REQUEST,function(a){this.sendInitializeConfigRequest("INITIALIZE",{game_name:e.launchVariables.gameId})}.bind(i)),i._target.on(d.REQUEST_OPEN,function(c){c={USER:{balance:a.Common.Server.gameBalance},STATE:{},OPEN:{game:a.Common.Server.brokenGameBoolean?"$FREE_SPINS":"$BASE",bet_state:{bet_level:1,coin_level:1},state:{game:a.Common.Server.brokenGameBoolean?"$FREE_SPINS":"$BASE",is_complete:!a.Common.Server.brokenGameBoolean},persisted_progress:[]}},a.Common.Server.brokenGameBoolean&&(c.OPEN.state.month=a.Common.Server.brokenMonth,c.OPEN.state.total_win_cash=a.Common.Server.brokenTotalwinAmount,c.OPEN.state.remain=a.Common.Server.brokenSpinCount,c.OPEN.state.total=a.Common.Server.brokenTotalSpinCount),this.prevResponse&&(this.prevResponse.RESULTS.game!=this.prevResponse.RESULTS.next_game&&this.prevResponse.RESULTS.next_game_state?(c.OPEN.state=this.prevResponse.RESULTS.next_game_state,c.OPEN.game=this.prevResponse.RESULTS.next_game,c.OPEN.persisted_progress.push(this.prevResponse.RESULTS.state)):"$BASE"!=this.prevResponse.RESULTS.next_game?(c.OPEN.game=this.prevResponse.RESULTS.next_game,c.OPEN.state=this.prevResponse.RESULTS.state,"$FREE_SPINS"==this.prevResponse.RESULTS.next_game&&(c.OPEN.state.game="$FREE_SPINS")):this.prevResponse.RESULTS.next_game==this.prevResponse.RESULTS.game&&"$BASE"===this.prevResponse.RESULTS.game&&(c.OPEN.game=this.prevResponse.RESULTS.next_game,c.OPEN.state=this.prevResponse.RESULTS.state));var e=a.Common.Server.freegameFlag?"$FREE_SPINS":"$BASE";1==this.isBaseGameBroken?(a.Common.ApplicationBase.instance.once(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,function(){var a=e;this.emit(d.RESPONSE_USER,new d.ResponseUser(c.USER),a)}),a.Common.Server.brokenInBaseGameFeature&&(b.ApplicationBase.instance.emit(d.END_GAME_REQUEST),a.Common.Server.brokenInBaseGameFeature=void 0),this._target.emit(d.RESPONSE_OPEN,new d.ResponseOpen(c.OPEN),e),this.isBaseGameBroken=!1):this._target.emit(d.RESPONSE_OPEN,new d.ResponseOpen(c.OPEN),e),this._isPendingOpen=!1}.bind(i)),i._target.on(d.REQUEST_USER,function(b){var c=a.Common.Server.freegameFlag?"$FREE_SPINS":"$BASE";b={USER:{balance:a.Common.Server.gameBalance},time:0},this._target.emit(d.RESPONSE_USER,new d.ResponseUser(b.USER),c)}.bind(i)),i._target.on(d.END_GAME_REQUEST,function(a){var b={type:"end"};this.Socket.send(JSON.stringify(b)),this.Socket.onmessage=function(a){console.log("Server: "+a.data);var b=JSON.parse(a.data);this.endResponse(b)}.bind(this)}.bind(i)),i._target.on(d.REQUEST_RESULTS,function(b){b=b||{},b.force=this._forceResult,0==this._forceResult&&(b.force=void 0);var c=a.Slots.SettingsPages.BettingSetup.coinValues,d=(a.Slots.SettingsPages.BettingSetup.currentBetLevel,a.Slots.SettingsPages.BettingSetup.currentCoinLevel),e=a.Slots.SettingsPages.BettingSetup.wayCredits,f=1*c[d-1],g=c.indexOf(f);if(f/=100,void 0!==b.stake&&(b.stake.amount=f/20),a.Common.Server.completeGameBet=f,a.Common.Server.gameBetIndexValue=g,"ERROR"==this._forceResult)throw"An error has occurred";var h="spin";a.Common.Server.freegameFlag?(this._target.emit(a.Common.GameEvents.UPDATE_BALACE,a.Common.Server.gameBalanceForFreeSpins/100),h="freespin"):!a.Common.Server.promotionalfreeplaysreelholidays&&a.Common.Server.gameBalance/100>=a.Common.Server.completeGameBet*e&&this._target.emit(a.Common.GameEvents.UPDATE_BALACE,a.Common.Server.gameBalance/100-a.Common.Server.completeGameBet*e);var i=setInterval(function(){this._isPendingOpen?console.log("PENDING!"):(clearInterval(i),this.featureOffset=[],(a.Common.Server.gameBalance/100>=a.Common.Server.completeGameBet*e||a.Common.Server.freegameFlag)&&this.sendSpin("RESULTS",{action:h,stake:f,sessionId:a.Common.Server.sessionId,cheat:b.force}))}.bind(this),50);this._forceResult=!1}.bind(i)),h(),i}return __extends(g,f),g.prototype.parseMessage=function(e,f,g){var h=this;switch(f){case"settle":e=this.parseSettleResponse(e);break;case"init":e=this.parseAuthResponse(e);break;case"spin":e=this.parseSpinResponse(e);break;case"freeSpin":e=this.parseFreeSpinResponse(e);break;case"alert":e=this.showAlertMessage(e)}if(e.ALERT){var i=new d.ResponseAlert(e.ALERT);return void this._target.emit(d.RESPONSE_ALERT,i)}if(e.AUTH&&(this._auth=new d.ResponseAuth(e.AUTH),this._target.emit(d.RESPONSE_AUTH,this._auth)),e.CONFIG){var j=new d.ResponseConfig(e.CONFIG);b.ApplicationBase.instance.emit(c.OperatorEvents.SET_BETTING_PARAMS,j)}e.OPEN&&(this._target.emit(d.RESPONSE_OPEN,new d.ResponseOpen(e.OPEN)),this._isPendingOpen=!1),e.RESULTS&&(this.prevResponse=e,this._target.emit(d.RESPONSE_RESULTS,new d.ResponseResults(e.RESULTS))),e.USER&&(e.RESULTS?b.ApplicationBase.instance.once(a.Slots.WinManager.GAME_FINISHED,function(){h.previousResponse=e;var b=h.previousResponse.RESULTS.next_game;h._target.emit(d.RESPONSE_USER,new d.ResponseUser(e.USER),b),!0===a.Common.Server.forGameFinishedRequest&&(h._target.emit(d.END_GAME_REQUEST),a.Common.Server.forGameFinishedRequest=!1),console.log("winPresentationEnd")}):this._target.emit(d.RESPONSE_USER,new d.ResponseUser(e.USER))),e.STATE&&this._target.emit(d.RESPONSE_STATE,new d.ResponseState(e.STATE)),void 0!==e.gameSessionToken&&b.ApplicationBase.instance.emit(d.GAME_LAUNCH_REQUEST,e.gameSessionToken)},g.prototype.parseMessageForConfigRequest=function(a){setTimeout(function(){b.ApplicationBase.instance.emit(d.GAME_CONFIG_REQUEST)},3e3)},g.prototype.sendInit=function(a,b){var c=this,d=this.parseMessage.bind(this);"OPEN"==a&&(this._isPendingOpen=!0),this._auth&&(b.playerId=this._auth.getPlayerId());var e={type:"init",freeplay:this.launchVariables.isFreeplay,playToken:this.launchVariables.playToken.toString(),vendor:this.launchVariables.vendor.toString(),requestId:"",game:{code:"jrs_005_sgs",version:"1.0.0"},userAgent:"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/76.0.3809.87 safari/537.36",launchParams:{playToken:this.launchVariables.playToken.toString(),operator:this.launchVariables.operator.toString(),vendor:this.launchVariables.vendor.toString(),lang:this.launchVariables.lang.toString(),isFreeplay:this.launchVariables.isFreeplay,casinoId:"test",partnerid:"10"}};c.Socket.send(JSON.stringify(e)),c.Socket.onmessage=function(a){var b=JSON.parse(a.data);b=[].concat(b),b[0].error?d(b[0],"alert"):b.forEach(function(a){d(a,"init")})}},g.prototype.showAlertMessage=function(a){return{ALERT:{lang:""+a.error.mes,err:{msg:"test"},fatal:0==a.error.sev}}},g.prototype.socketerror=function(){var b={lang:""+a.Core.Lang.getPhrase("connection_lost"),err:{msg:"test"},fatal:!0},c=new d.ResponseAlert(b);this._target.emit(d.RESPONSE_ALERT,c)},g.prototype.sendSpin=function(b,c){var d=this,e=this.parseMessage.bind(this);"OPEN"==b&&(this._isPendingOpen=!0),this._auth;var f;a.Common.Server.freegameFlag?(f={type:"update",subType:"hit"},d.Socket&&1==d.Socket.readyState?(d.Socket.send(JSON.stringify(f)),d.Socket.onmessage=function(a){console.log("Server: "+a.data);var b=JSON.parse(a.data);b=[].concat(b),b[0].error?e(b[0],"alert"):b.forEach(function(a){e(a,"freeSpin")})},d.Socket.onerror=function(a){console.log("surakk",a)}):this.socketerror()):(a.Common.Server.endResponseBoolean=void 0,f={type:"start",promotions:a.Common.Server.freePlaysId?[{id:a.Common.Server.freePlaysId,consume:1}]:[],bet:{stake:{cv:a.Common.Server.freePlaysId?a.Common.Server.freePlaysStakeLevel:a.Common.Server.gameBetIndexValue,cl:a.Common.Server.freePlaysId?a.Common.Server.freePlaysStakeLevel:a.Common.Server.gameBetIndexValue}}},d.Socket&&1==d.Socket.readyState?(d.Socket.send(JSON.stringify(f)),d.Socket.onmessage=function(a){var b="spin";console.log("Server: "+a.data);var c=JSON.parse(a.data);c=[].concat(c),c[0].error&&(b="alert"),c.forEach(function(a){e(a,b)})},d.Socket.onerror=function(a){console.log("surakk",a)}):this.socketerror())},g.prototype.parseSettleResponse=function(b){a.Common.Server.server.freespins=0,a.Common.Server.gameBalance=100*b.cust.pbal,a.Common.Server.gameBalanceForFreeSpins=100*b.cust.bal,a.Common.Server.isAutoPlay||a.Common.Server.freegameFlag||(a.Common.Server.server.spinButtonBoolean=!1);var c=b[1],d=b[0];if(a.Common.Server.freegameFlag||this._target.emit(a.Common.GameEvents.UPDATE_BALACE,d),a.Common.Server.gameBalanceForFreeSpins=100*b.cust.bal,void 0!=c.freePlaysData&&void 0!=c.freePlaysData.promotionPlaysRemaining&&0===c.freePlaysData.promotionPlaysRemaining){if(a.Common.Server.promotionalFreePlaysBoolean=!1,0!=a.Common.Server.completeGameBet)for(var e=0;e<this.param.betPerLine.length;e++)a.Common.Server.completeGameBet===20*this.param.betPerLine[e]&&(a.Common.Server.betLevel=e+1);else a.Common.Server.betLevel=1;a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.PROMOTIONAL_BUTTON_ENABLE),a.Common.ApplicationBase.instance.emit(a.Slots.Aperture.PROMOTIONAL_PANEL_CHANGE),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{coinLevel:a.Common.Server.betLevel,betLevel:1})}return c},g.prototype.parseAuthResponse=function(c){var e="$BASE";"start"===c.game.view.next_request&&(e="$BASE"),a.Common.Server.realitySessionTimeAsPerServerBoolean=!0,a.Common.Server.autoPlayList=[10,25,50,75,100,"∞"],a.Common.Server.payTable=c.game.view.paytable;for(var f=[],g=0;g<c.game.view.paylines.length;g++){for(var h=[],i=0;i<c.game.view.paylines[g].length;i++){var j=c.game.view.paylines[g][i];h.push(3*i+j+1)}f.push(h)}if(a.Common.Server.payLines=f,c.game.res&&"CYCLE"==c.game.rm&&"update"===c.game.view.next_request){if(this.isBaseGameBroken=!0,c.game.view.update_level>0){switch(c.game.view.update_level){case 1:a.Common.Server.freeGameFeature="symbolreveal",a.Common.Server.brokenMonth="December",a.Common.Server.brokenTotalSpinCount=10;break;case 2:a.Common.Server.freeGameFeature="bunny",a.Common.Server.brokenMonth="April",a.Common.Server.brokenTotalSpinCount=7;break;case 3:a.Common.Server.freeGameFeature="wildreel",a.Common.Server.brokenMonth="October",a.Common.Server.brokenTotalSpinCount=4}e="$FREE_SPINS",a.Common.Server.freegameFlag=!0,a.Common.Server.brokenGameBoolean=!0,a.Common.Server.month=a.Common.Server.brokenMonth,a.Common.Server.brokenSpinCount=c.game.view.freespin_count,a.Common.Server.brokenTotalwinAmount=100*c.game.view.freespin_win_total}}else c.game.res&&"CYCLE"==c.game.rm&&"end"===c.game.view.next_request?(this.isBaseGameBroken=!0,a.Common.Server.brokenBooleanAfterFreegame=!0,a.Common.Server.brokenTotalBalanceAfterFreegame=100*c.game.view.freespin_win_total,a.Common.Server.brokenSpinCount=c.game.view.freespin_count,a.Common.Server.brokenTotalwinAmount=100*c.game.view.freespin_win_total,b.ApplicationBase.instance.emit(d.END_GAME_REQUEST)):c.game.res&&"CYCLE"==c.game.rm&&"start"===c.game.view.next_request&&(this.isBaseGameBroken=!0,a.Common.Server.brokenInBaseGameFeature=!0);c.game.promo[0]&&(a.Common.Server.promotionalfreeplaysreelholidays=!0,a.Common.Server.freePlaysGameAwarded=c.game.promo[0].ga,a.Common.Server.freePlaysId=c.game.promo[0].id,a.Common.Server.freePlaysStatus=c.game.promo[0].status,a.Common.Server.freePlaysStakeLevel=c.game.promo[0].sl,a.Common.Server.freePlaysStakeValue=c.game.promo[0].sv,a.Common.Server.freePlaysWinAmount=100*c.game.promo[0].wa,a.Common.Server.freePlaysRemainingSpinsCount=a.Common.Server.freePlaysGameAwarded-c.game.promo[0].gc,"COMPLETE"!=a.Common.Server.freePlaysStatus?a.Common.Server.freePlaysAfterFreespin=!0:a.Common.Server.freePlaysAfterFreespin=!1);for(var g=0;g<c.game.view.stakes.length;g++)c.game.view.stakes[g]=100*c.game.view.stakes[g];a.Common.Server.betPanelValue=c.game.view.stakes;var k={game:e,is_complete:"$BASE"===e,total_win_cash:a.Common.Server.brokenGameBoolean?a.Common.Server.brokenTotalwinAmount:0,remain:a.Common.Server.brokenGameBoolean?a.Common.Server.brokenSpinCount:0,month:a.Common.Server.brokenMonth,total:a.Common.Server.brokenTotalSpinCount,spin_pending:"$BASE"!==e};a.Common.Server.betLevel=c.game.view.stake_index+1,this.Prefix=decodeURIComponent(c.cust.curr.maj);var l=c.game.view.stakes;a.Common.Server.gameBalance=100*c.cust.pbal,a.Common.Server.gameBalanceForFreeSpins=100*c.cust.bal;var m={AUTH:{player:{currency:c.cust.curr.code,prefixCurrency:this.Prefix,suffixCurrency:c.cust.curr.min,currencyDecimalPlaces:c.cust.curr.dp,localeId:"en",lang:"eng",nickname:"TestUser13",id:166},session:null,is_freeplay:a.Common.Server.promotionalFreePlaysBoolean},USER:{balance:100*c.cust.pbal},CONFIG:{betConfig:{maxBetLevel:1,waysCredits:1,creditValues:l,defaultBetState:{bet_level:1,coin_level:a.Common.Server.betLevel}},autoSpinOptions:a.Common.Server.autoPlayList},STATE:{game:e,bet_state:{bet_level:1,coin_level:a.Common.Server.betLevel},state:k}};return console.log("[initialization data]",m),m},g.prototype.getSymbolGrid=function(b,c,d){for(var e=b.game.view.X1_modify,f=b.game.view.X2_modify,g=[],h=0;h<c.length;h++){for(var i=["H2"],j=0;j<c[h].length;j++)i.push(this.symbolMap[c[h][j][0]]);i.push("L3"),g.push(i)}for(var k in e){var l=e[k];g[l[0]][l[1]+1]=this.symbolMap[c[l[0]][l[1]][1]]}for(var k in f){var l=f[k];g[l[0]][l[1]+1]=this.symbolMap[c[l[0]][l[1]][1]]}if(a.Common.Server.totalBunnyWildOffsets){var m=[],n=[];console.log("totalBunnyWildOffsets",a.Common.Server.totalBunnyWildOffsets);for(var o=0;o<a.Common.Server.totalBunnyWildOffsets.length;o++)m.push(Math.floor((a.Common.Server.totalBunnyWildOffsets[o]-1)/3),(a.Common.Server.totalBunnyWildOffsets[o]-1)%3),console.log("beforeconvertedArray",n),n.push(m.splice(0,2)),console.log("AfterconvertedArray",n);for(var o=0;o<m.length;o++)n.push(m.splice(0,2)),console.log("newconvertedArray",n);for(var k in n){var l=n[k];g[l[0]][l[1]+1]=this.symbolMap[1],console.log("newconvertedArraysymbolGrid",g[l[0]][l[1]+1]),console.log("newconvertedArraysymbolGrid",l[0],l[1]+1)}}if(d)for(var p=0;p<g.length;p++)for(var q=0;q<g[p].length;q++)"B1"===g[p][q]&&(g[p][q]=this.changeScatter(d));return console.log("newsymbolGrid",g),g},g.prototype.changeScatter=function(a){return{December:"B3",April:"B2",October:"B4"}[a]},g.prototype.endResponse=function(c){a.Common.Server.endResponseBoolean=!0,a.Common.Server.gameBalance=100*c.cust.pbal,a.Common.Server.freeSpinTotalBalance=100*c.game.view.win_amount,a.Common.Server.freegameFlag||void 0!=a.Common.Server.freeSpinPlaying||this._target.emit(a.Common.GameEvents.UPDATE_BALACE,a.Common.Server.gameBalance/100),1==a.Common.Server.promotionalfreeplaysreelholidays&&c.game.promo[0]&&(a.Common.Server.freePlaysGameAwarded=c.game.promo[0].ga,a.Common.Server.freePlaysId=c.game.promo[0].id,a.Common.Server.freePlaysStatus=c.game.promo[0].status,a.Common.Server.freePlaysStakeLevel=c.game.promo[0].sl,a.Common.Server.freePlaysStakeValue=c.game.promo[0].sv,a.Common.Server.freePlaysWinAmount=100*c.game.promo[0].wa,a.Common.Server.freePlaysRemainingSpinsCount=a.Common.Server.freePlaysGameAwarded-c.game.promo[0].gc,b.ApplicationBase.instance.emit(b.GameEvents.PROMOTIONAL_WIN),"COMPLETE"!=a.Common.Server.freePlaysStatus?a.Common.Server.freePlaysAfterFreespin=!0:(a.Common.Server.freePlaysAfterFreespin=!1,a.Common.Server.promotionalfreeplaysreelholidays=void 0,a.Common.Server.freePlaysId=void 0,b.ApplicationBase.instance.emit(b.GameEvents.PROMOTIONAL_END)))},g.prototype.parseSpinResponse=function(c){if(a.Common.Server.winend=void 0,a.Common.Server.freeSpinPlaying=void 0,this.stickyWildPositions=[],this.stackedWildReels=[],a.Common.Server.gameBalance=100*c.cust.pbal,a.Common.Server.gameBalanceForFreeSpins=100*c.cust.bal,1==a.Common.Server.promotionalfreeplaysreelholidays&&(a.Common.Server.freePlaysGameAwarded=c.game.promo[0].ga,a.Common.Server.freePlaysId=c.game.promo[0].id,a.Common.Server.freePlaysStatus=c.game.promo[0].status,a.Common.Server.freePlaysStakeLevel=c.game.promo[0].sl,a.Common.Server.freePlaysStakeValue=c.game.promo[0].sv,a.Common.Server.freePlaysWinAmount=100*c.game.promo[0].wa,a.Common.Server.freePlaysRemainingSpinsCount=a.Common.Server.freePlaysGameAwarded-c.game.promo[0].gc,b.ApplicationBase.instance.emit(b.GameEvents.ON_SPIN_PROMOTIONAL_COUNT)),void 0==a.Common.Server.promotionalfreeplaysreelholidays&&0==c.game.view.win_amount&&(this._target.emit(d.END_GAME_REQUEST),a.Common.Server.winend=!0),a.Common.Server.gameResponse=c,c.game.view.update_level>0)switch(c.game.view.update_level){case 1:a.Common.Server.freeGameFeature="symbolreveal";break;case 2:a.Common.Server.freeGameFeature="bunny";break;case 3:a.Common.Server.freeGameFeature="wildreel"}this.setFreeSpinData(0,0,0);var e="$BASE";"update"===c.game.view.next_request&&(a.Common.Server.freegameFlag=!0,e="$FREE_SPINS");var f=[];this.featureOffset=[];var g,h="",i="";if(c.game.view.wild_reels){h="PUMPKIN";for(var j=0;j<c.game.view.wild_reels.length;j+=4)this.featureOffset.push(c.game.view.wild_reels[j][0]+1);console.log("Pumpkin",this.featureOffset)}else if(c.game.view.symbol_reveal){h="SANTA";var k=c.game.view.reels[c.game.view.symbol_reveal[0][0]][c.game.view.symbol_reveal[0][1]];g=this.symbolMap[k[k.length-1]];for(var j=0;j<c.game.view.symbol_reveal.length;j++)this.featureOffset.push(3*c.game.view.symbol_reveal[j][0]+c.game.view.symbol_reveal[j][1]+1);console.log("SANTA",this.featureOffset)}else if(c.game.view.wild_symbols){h="BUNNY";for(var j=0;j<c.game.view.wild_symbols.length;j++)this.featureOffset.push(3*c.game.view.wild_symbols[j][0]+c.game.view.wild_symbols[j][1]+1);console.log("BUNNY",this.featureOffset)}if(this.featureOffset.sort(function(a,b){return a-b}),a.Common.Server.freegameFlag){var l=void 0;switch(c.game.view.update_level){case 3:i="October",l=4;break;case 1:i="December",l=10;break;case 2:i="April",l=7;break;default:i=""}this.setFreeSpinData(l,l,0)}return a.Common.Server.month=i,c.game.view.win_amount>0&&(f=this.getWinningDetails(c.game.view.winlines,c,i)),this.getResponseData(c,a.Common.Server.completeGameBet,"$BASE",e,h,this.featureOffset,f,g,i)},g.prototype.parseFreeSpinResponse=function(b){var c,d=[],e="";a.Common.Server.freeSpinPlaying=!0,a.Common.Server.gameBalance=100*b.cust.pbal,this.freeSpinData.spins++,this.freeSpinData.total=b.game.view.freespin_count,this.freeSpinData.remain=b.game.view.freespin_count,this.setFreeSpinData(b.game.view.freespin_count,b.game.view.freespin_count,b.game.view.freespin_win_total);var f="$FREE_SPINS";if(b.game.view.wild_reels){e="PUMPKIN";for(var g=0;g<b.game.view.wild_reels.length;g+=3){var h=b.game.view.wild_reels[g][0]+1;-1==this.stackedWildReels.indexOf(h)&&(this.featureOffset.push(h),this.stackedWildReels.push(h))}console.log("Pumpkin",this.featureOffset)}else if(b.game.view.symbol_reveal){e="SANTA";var i=b.game.view.reels[b.game.view.symbol_reveal[0][0]][b.game.view.symbol_reveal[0][1]];c=this.symbolMap[i[i.length-1]];for(var g=0;g<b.game.view.symbol_reveal.length;g++)this.featureOffset.push(3*b.game.view.symbol_reveal[g][0]+b.game.view.symbol_reveal[g][1]+1);console.log("SANTA",this.featureOffset)}else if(b.game.view.wild_symbols){e="BUNNY";for(var g=0;g<b.game.view.wild_symbols.length;++g){var h=3*b.game.view.wild_symbols[g][0]+b.game.view.wild_symbols[g][1]+1;-1==this.stickyWildPositions.indexOf(h)&&(this.featureOffset.push(h),this.stickyWildPositions.push(h))}console.log("BUNNY",this.featureOffset)}return this.featureOffset=this.featureOffset.sort(),b.game.view.win_amount>0&&(d=this.getWinningDetails(b.game.view.winlines,!1,void 0)),0===b.game.view.freespin_count&&(f="$BASE",a.Common.Server.freegameFlag=!1),this.featureOffset.sort(function(a,b){return a-b}),this.getResponseData(b,a.Common.Server.completeGameBet,"$FREE_SPINS",f,e,this.featureOffset,d,c,void 0)},g.prototype.getWinningDetails=function(b,c,d){for(var e=[],f=0;f<b.length;f++){for(var g=[],h=0;h<b[f].winline.length;h++){var i=[],j=b[f].winline[h];i.push(3*h+j+1),g.push(i)}var k=g;console.log("Match",k),e.push({symbol:this.symbol[b[f].symbol],credits:100*b[f].win,oak:b[f].symbol_count,positions:k,type:"$LINE",cash:100*b[f].win,line:b[f].index+1,feature:null}),5==b[f].symbol_count&&(a.Common.Server.server.winlength=b[f].symbol_count)}return e.length>0?e:null},g.prototype.getResponseData=function(b,c,d,e,f,g,h,i,j){return{RESULTS:{eval:{aperture:this.getSymbolGrid(b,b.game.view.reels,j),multiplier:1,freeSpinsCount:0,wins:h?{credits:100*b.game.view.win_amount,multiplier:1,wildMultiplier:1,cash:100*b.game.view.win_amount,detail:h}:null},gameID:a.Common.Server.sessionId,game:d,games_pending:!1,next_game:e,next_game_state:d!=e?this.getNextGameState(d,e,j):null,total_bet_cash:c,total_win_cash:100*b.game.view.win_amount,state:this.getGameState(d,e,b,f,g,i,j),balance_after_bet:100*b.cust.pbal,balance:100*b.cust.pbal,persisted_progress:null},USER:{balance:100*b.cust.pbal},TIME:null}},g.prototype.getNextGameState=function(a,b,c){var d={game:b,rounds:0,is_complete:!1,month:c,total_win_cash:"$FREE_SPINS"==b?this.freeSpinData.freeSpinWin:null,total:"$FREE_SPINS"==b?this.freeSpinData.total:null,remain:"$FREE_SPINS"==b?this.freeSpinData.remain:null,spins:this.freeSpinData.spins};return"$BASE"==b?null:d},g.prototype.getGameState=function(a,b,c,d,e,f,g){return{game:a,rounds:this.freeSpinData.spins,is_complete:"$BASE"==a||"$BASE"==b,featureName:d,featureOffset:e,month:g,revealSymbol:f,total_win_cash:"$BASE"==a?100*c.game.view.win_amount:100*this.freeSpinData.freeSpinWin,spins:this.freeSpinData.spins,total:this.freeSpinData.total,remain:this.freeSpinData.remain}},g.prototype.setFreeSpinData=function(a,b,c){this.freeSpinData={spins:0,total:a,remain:b,freeSpinWin:c}},g}(c.InterfaceBase);c.Interface_RGS=f}(b.Server||(b.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(c,e){if(b.prefixCurrency||b.suffixCurrency||(e=!0),b.formatAsCredits)return Math.floor(c/b.creditValue).toLocaleString(void 0,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:a.Common.Server.server.useGrouping});var f=c/100;if(e||!b.isoCode){for(var g="",h=f.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:a.Common.Server.server.useGrouping}),i=0;i<h.length;++i)160!==h.charCodeAt(i)&&(g+=h.charAt(i));return g}return b.prefixCurrency||b.suffixCurrency||b.localeId?(d(b.prefixCurrency)?"":b.prefixCurrency)+f.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:b.currencyDecimalPlaces?b.currencyDecimalPlaces:2,maximumFractionDigits:b.currencyDecimalPlaces?b.currencyDecimalPlaces:2,useGrouping:a.Common.Server.server.useGrouping})+(d(b.suffixCurrency)?"":" "+b.suffixCurrency):f.toLocaleString(b.localeId,{currency:b.isoCode,style:"currency",minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:a.Common.Server.server.useGrouping})}function d(a){return null==a||void 0==a||0===a.length}function e(a){var b=this.format(a);return"00"==b.split(".")[1]?b.split(".")[0]:b}b.creditValue=1;b.format=c,b.formatNoDp=e}(b.Currency||(b.Currency={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Events,d=a.Core.Utils.Queue,e=function(b){function e(){return null!==b&&b.apply(this,arguments)||this}return __extends(e,b),e.prototype.init=function(){e.instance=this;var b=new d;b.add(function(a){$.getJSON("./package.json?v=1.0.7",function(b){e.version=b.version,a()})}),b.add(function(b){a.Core.init(this.onAppInit.bind(this))}.bind(this)),b.start()},e.prototype.onAppInit=function(){a.Core.Events.coreEvents.on(c.ON_APP_RESIZE,this.onAppResize),a.Core.Events.coreEvents.on(c.ON_APP_LOSE_FOCUS,this.onAppLoseFocus),a.Core.Events.coreEvents.on(c.ON_APP_GET_FOCUS,this.onAppGetFocus),a.Core.Events.coreEvents.on(c.ON_APP_EXCEPTION,this.onAppException),a.Core.Events.coreEvents.on(c.ON_APP_EXIT,this.onAppExit)},e.prototype.onAppExit=function(){},e.prototype.onAppException=function(a){},e.prototype.onAppGetFocus=function(a,b){},e.prototype.onAppLoseFocus=function(a,b){},e.prototype.onAppResize=function(a,b){},e.saveAppValue=function(b,c){var d="reelfeel-gaming."+a.getConfig().server.game_id+"."+b;localStorage.setItem(d,c.toString())},e.getValues=function(b){var c="reelfeel-gaming."+a.getConfig().server.game_id+"."+b;return localStorage.getItem(c)},e.getAppValue=function(b,c){var d="reelfeel-gaming."+a.getConfig().server.game_id+"."+b,f=localStorage.getItem(d);return!f&&c&&(e.saveAppValue(b,c),f=localStorage.getItem(d)),"true"==f?f=!0:"false"==f&&(f=!1),f},e}(PIXI.utils.EventEmitter);b.ApplicationBase=e}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(c,g){f=g,e=c,e.code_mappings=e.code_mappings||{},e.target=e.target||window.parent,a.Core.Events.coreEvents.on(b.EVENT_IFRAME,d,this)}function d(a){if(f){var b=e.code_mappings[a]||a;console.log("iFrame -> ",e.target+", ",b,f),alert(a+"->"+b),e.target.postMessage(b,f)}}b.EVENT_IFRAME="iframe_event",b.IFRAME_USER_EXIT="IFRAME_USER_EXIT",b.IFRAME_INSUFFICIENT_FUNDS="IFRAME_INSUFFICIENT_FUNDS",b.IFRAME_SESSION_EXPIRED="IFRAME_SESSION_EXPIRED",b.IFRAME_ERROR="IFRAME_ERROR";var e,f;b.init=c}(b.IFrame||(b.IFrame={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a){d=a}function c(a){if(d.games[a])return new e(d.games[a]);throw"Game id doesn't exist in profile : "+a}var d;a.init=b,a.getSubGameProfile=c;var e=function(){function a(a){this._profile=a}return a.prototype.getGameId=function(){return this._profile.game_id},a.prototype.get=function(){return this._profile},a}();a.SubGameProfile=e}(a.GameProfile||(a.GameProfile={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(a){var b=function(){function a(){}return a.ON_GAME_INITIALIZED="on_game_initialized",a.ON_GET_GAME_RESULTS="on_player_results",a.ON_GET_CLEAR_ALL_SCREEN="on_clear_screen",a.ENABLE_ALL_BUTTONS="enable_all_buttons",a.ON_RESULTS_READY="on_results_ready",a.ON_STATE_READY="on_state_ready",a.ON_SPIN_PROMOTIONAL_COUNT="on_player_promotional",a.ON_RESULTS_DISPLAYED="on_results_displayed",a.ON_PLAYER_PROMPT="on_player_prompt",a.ON_PLAYER_PROMPT_IDLE="on_player_prompt_idle",a.ON_PLAYER_PROMPT_IDLE_KILL="on_player_prompt_idle_kill",a.ON_PLAYER_PROMPT_WIN="on_player_prompt_win",a.ON_GAME_CHANGED="on_game_change",a.ON_GAME_SUMMARY_ACCEPTED="on_game_summary_accepted",a.ON_GAME_ACCEPTED="on_game_accepted",a.ON_GAME_READY="on_game_ready",a.ON_CONTINUE_GAME="on_continue_game",a.ON_FATAL_ERROR="on_game_fatal_error",a.ON_LOAD_PROGRESS="on_game_load_progress",a.UPDATE_BALACE="update_balace",a.PUSH_BALANCE="push_balance",a.PROMOTIONAL_ACTIVE="promotional_active",a.PROMOTIONAL_END="promotional_Completed",a.PROMOTIONAL_WIN="promotional_win_count",a}();a.GameEvents=b;var c=function(b){function c(c){var d=b.call(this)||this;return d._state=c,d._profile=a.GameProfile.getSubGameProfile(d.getGameId()),console.log("[Game] Creating game :",d.getGameId(),d._state),d}return __extends(c,b),c.prototype.end=function(){},c.prototype.getTotalWin=function(){return this._state.total_win_cash||0},c.prototype.getTotalQueueWin=function(){return this._state.queue_win_cash||0},c.prototype.getLastWin=function(){return this._state.last_win_cash||0},c.prototype.getRoundCount=function(){return this._state.rounds},c.prototype.getSpinRemainCount=function(){return this._state.remain},c.prototype.getTotalFreespins=function(){return this._state.total},c.prototype.isComplete=function(){return this._state.is_complete},c.prototype.getProfile=function(){return this._profile},c.prototype.getGameType=function(){return this._state.game.type},c.prototype.isBaseGame=function(){return"$BASE"==this.getGameId()},c.prototype.isRespin=function(){return"RE_SPIN"==this.getGameId()},c.prototype.getGameId=function(){return this._state.game},c.prototype.getState=function(){return this._state},c.prototype.isGame=function(a){return this.getGameId().indexOf(a)>-1},c.prototype.setState=function(a){this._state=a},c.prototype.getResults=function(b){a.ApplicationBase.instance.emit(a.Server.REQUEST_RESULTS,b)},c}(PIXI.utils.EventEmitter);a.SubGame=c}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Common.GameEvents,e=a.Common.Server,f=function(c){function f(a,b,d,e){var f=c.call(this,a,b,d,e)||this;return f._gameResultsIndex={},f._subGame=b.gameLogic,f}return __extends(f,c),f.prototype.onResultsRequested=function(){},f.prototype.onResultsReady=function(a,b){},f.prototype.onStateReady=function(a){},f.prototype.onGameReady=function(a){this._subGame=a,this.onResize(null,null)},f.prototype.onInteraction=function(a,b){},f.prototype.onSummaryAccepted=function(){b.ApplicationBase.instance.emit(d.ON_RESULTS_DISPLAYED)},f.prototype.onGameAccepted=function(){b.ApplicationBase.instance.emit(d.ON_GAME_ACCEPTED),this._announcer&&TweenLite.to(this._announcer,.5,{alpha:0,onComplete:function(){
this._announcer.parent.removeChild(this._announcer)}.bind(this)}),setTimeout(function(){b.ApplicationBase.instance.emit(d.ON_GET_GAME_RESULTS)},1e3)},f.prototype.onContinueGame=function(a,b){},f.prototype.onCreate=function(){c.prototype.onCreate.call(this),b.ApplicationBase.instance.on(d.ON_RESULTS_READY,this.preResultsDelay,this),b.ApplicationBase.instance.on(d.ON_STATE_READY,this.onStateReady,this),b.ApplicationBase.instance.on(e.REQUEST_RESULTS,this.onResultsRequested,this),b.ApplicationBase.instance.on(d.ON_CONTINUE_GAME,this.onContinueGame,this),b.ApplicationBase.instance.on(d.ON_GAME_READY,this.onGameReady,this),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown,this),this.on(a.Core.Events.ON_INTERACTION,this.onInteraction)},f.prototype.onDestroy=function(){c.prototype.onDestroy.call(this),b.ApplicationBase.instance.off(d.ON_RESULTS_READY,this.preResultsDelay),b.ApplicationBase.instance.off(d.ON_GAME_READY,this.onGameReady),b.ApplicationBase.instance.off(d.ON_CONTINUE_GAME,this.onContinueGame),b.ApplicationBase.instance.off(e.REQUEST_RESULTS,this.onResultsRequested),b.ApplicationBase.instance.off(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),this.off(a.Core.Events.ON_INTERACTION,this.onInteraction)},f.prototype.showAnnouncer=function(a){this._layout.getComponent(a)&&(this.interactive=!0,this.interactiveChildren=!0,this._announcer=this._layout.getComponent(a),this._announcer.visible=!0,this._announceTimeout=setTimeout(function(){},1e4))},f.prototype.showSummary=function(a){if(this._layout.getComponent(a)){this.interactive=!0,this.interactiveChildren=!0;this._layout.getComponent(a).visible=!0,this._announceTimeout=setTimeout(function(){},1e4)}},f.prototype.setHTMLBackground=function(a){var b=$("html");b.css("background-image","url('"+a+"')"),b.css("background-size","100% 100%"),b.css("background-repeat","no-repeat"),b.css("background-position","center")},f.prototype.preResultsDelay=function(a,b,c){this._lastResults=b,this._gameResultsIndex[a.getGameId()]=b,setTimeout(function(){this.onResultsReady(b,c)}.bind(this),500)},f.prototype.getGameResults=function(a){var b;for(var c in this._gameResultsIndex)!b&&(c==a||c.indexOf(a)>-1)&&(b=this._gameResultsIndex[c]);return b},f.prototype.onWinsShown=function(){},f}(c);b.GameSceneBase=f}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){l(),b.ApplicationBase.instance.on(b.Server.RESPONSE_USER,function(a){c.user=a},this),b.ApplicationBase.instance.on(b.Server.RESPONSE_RESULTS,function(a){A+=a.getLastCashBet(),B+=a.getLastCashWin(),w=a.getLastCashBet(),"$FREE_SPINS"===a.getState().game&&y<a.getLastCashWin()&&(y=v),"$BASE"===a.getState().game&&(v=a.getLastCashWin())},this),b.ApplicationBase.instance.on(b.Server.REQUEST_RESULTS,function(){z++},this),b.ApplicationBase.instance.on(b.GameEvents.ON_RESULTS_DISPLAYED,function(){x.isBaseGame()&&0===x.getState().total&&b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS,x)}),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS_AT_FS,function(){b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS,x)}),b.ApplicationBase.instance.on(b.GameEvents.ON_GAME_CHANGED,function(a){x=a,!a.isBaseGame()&&t&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_FEATURE_STOP,a),l())},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_REALITY_CHECK_CHANGE,function(a){h(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,function(a){a=a||9999999999,i(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,j(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,k(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,function(a){a||l()},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,function(a){t=a},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,function(a){u=a},this),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS,function(d){console.log("[PlayerMonitoring] Total session duration :",c.user.getSessionDuration()),console.log("[PlayerMonitoring] Current session duration :",n()),console.log("[PlayerMonitoring] Bets :",o()),console.log("[PlayerMonitoring] Bet Cash :",p()),console.log("[PlayerMonitoring] Wins Cash :",q()),console.log("[PlayerMonitoring] RTP :",r()),console.log("[PlayerMonitoring] Cash Loss :",s()),s()>=D&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_CASH_LOSS,D),l()),v&&v>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),y&&y>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),B>=F&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_TOTAL_CASH_WIN,F),l()),v&&v>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),v&&u&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_STOP_ON_ANY_WIN,E),l());var e=(new Date).getTime();(e-H)/6e4>=G&&(a.Common.Server.server._autoSpinsPaused=!0,b.ApplicationBase.instance.emit(c.EVENT_ALARM_REALITY_CHECK,G),H=e)},this)}function e(){return G}function f(a){t=a}function g(a){u=a}function h(a){G=a,H=(new Date).getTime(),console.log("[PlayerMonitoring] Settings reality check limit:"+G)}function i(a){D=a}function j(a){E=a}function k(a){F=a}function l(){console.log("[PlayerMonitoring] Resetting limits"),z=0,A=0,B=0,y=0,D=9007199254740991,E=9007199254740991,F=9007199254740991,t=!1,u=!1,C=(new Date).getTime()}function m(){return v}function n(){return((new Date).getTime()-C)/1e3}function o(){return z}function p(){return A}function q(){return B}function r(){return B/A*100}function s(){return A-B}c.EVENT_ALARM_CASH_LOSS="monitoring_cash_loss_alarm",c.EVENT_ALARM_SINGLE_CASH_WIN="monitoring_single_cash_win_alarm",c.EVENT_ALARM_TOTAL_CASH_WIN="monitoring_total_cash_win_alarm",c.EVENT_ALARM_STOP_ON_ANY_WIN="monitoring_stop_on_any_win",c.EVENT_ALARM_REALITY_CHECK="monitoring_reality_check",c.EVENT_ALARM_FEATURE_STOP="monitoring_feature_stop",c.EVENT_CHECK_ALARMS="monitoring_check_alarms",c.EVENT_CHECK_ALARMS_AT_FS="monitoring_check_alarms_at_fs",c.INSUFFICIENT_FUND="insufficient_fund";var t,u,v,w,x,y,z=0,A=0,B=0,C=0,D=9999999,E=9999999,F=9999999,G=60,H=(new Date).getTime();c.init=d,c.getRealityCheckDuration=e,c.setFeatureStop=f,c.setWinStop=g,c.setLimitRealityCheck=h,c.setLimitCashLoss=i,c.setLimitSingleWin=j,c.setLimitTotalWin=k,c.reset=l,c.getCurrentLastCashWin=m,c.getCurrentDuration=n,c.getCurrentBetCount=o,c.getCurrentTotalBetCash=p,c.getCurrentTotalWin=q,c.getCurrentRTP=r,c.getCurrentLossCash=s}(b.PlayerMonitoring||(b.PlayerMonitoring={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(){d=$("body"),setTimeout(function(){c()},2e3)}function c(){$(window).height(),window.innerHeight}var d;a.init=b}(a.SwipeForFullScreen||(a.SwipeForFullScreen={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Time.Juggler,d=function(b){function d(d){var e=b.call(this)||this;return e._assets=d,e._juggler=new c(!0),e.once(a.Core.Events.ON_CREATE,function(){this.setImage(0)}.bind(e)),e}return __extends(d,b),d.prototype.setImage=function(a){var b=this._assets.getPIXISprite(this._config.params.sprites[a]);this.addChild(b)},d}(PIXI.Container);b.SpriteBanner=d}(b.FX||(b.FX={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Core.Lang,h=a.Common.ApplicationBase,i=a.Common.PlayerMonitoring,j=a.Core.HTML,k=a.Core.SoundManager,l=a.Common.GameEvents,m=a.Common.Server,n=a.Common.Currency,o=a.Common.GameProfile,p=a.Common.Server.OperatorEvents,q=a.Core.Utils.formatTime,r=function(){function a(){}return a.ON_REALITY_CHECK_CHANGE="settings_reality_check_change",a.ON_AUTO_SPIN_COUNT_CHANGE="settings_auto_spin_count_change",a.ON_LOSS_LIMIT_CHANGE="settings_loss_limit_change",a.ON_SINGLE_WIN_LIMIT_CHANGE="settings_single_win_limit_change",a.ON_TOTAL_WIN_LIMIT_CHANGE="settings_total_win_limit_change",a.ON_STOP_ON_FEATURE_WIN_CHANGE="settings_stop_on_feature",a.ON_STOP_ON_ANY_WIN="settings_stop_on_any_win",a.ON_SETTINGS_OPEN="settings_shown",a.ON_SETTINGS_CLOSED="settings_closed",a.ON_BET_CHANGE="settings_bet_change",a.ON_LEFT_HANDED_MODE="settings_left_handed",a.ON_QUICK_SPIN="settings_quick_spin",a.ON_DISPLAY_FORMAT_CHANGE="settings_coins_or_cash",a.ON_SOUND_EFFECTS="settings_sound_effects",a.ON_MUSIC="settings_music",a.ON_BET_EVENT_OUTER="on_bet_load_outer",a.ON_AUTOPLAY_EVENT_OUTER="on_autoplay_load_outer",a.PAYTABLE_STATUS_CHANGED="paytable_status_change",a.OPTION_STATUS_CHANGED="option_status_change",a.ABOUT_STATUS_CHANGED="About_status_change",a}();c.SettingsEvents=r;var s=function(){function a(){}return a.setMaxBetLevel=function(b){a.betLevels=[];for(var c=1;c<=b;c++)a.betLevels.push(c)},a.setCoinDenominations=function(b){a.coinValues=b},a.getCoinValue=function(){return a.coinValues[a.currentCoinLevel-1]},a.getTotalBetCash=function(){return a.getCoinValue()*a.currentBetLevel*a.wayCredits},a.getMaxBetLevel=function(){return a.betLevels.length},a.coinValues=[],a.betLevels=[],a.currentCoinLevel=1,a.currentBetLevel=1,a}();c.BettingSetup=s;var t=function(d){function t(c,m){var o=d.call(this,c,m)||this;o.prevID=void 0,o.firstLoad=0,o._$settingsHolder=$("#settings"),o._$menu=$("#settings_menu"),o._$pages=$("#settings_pages"),o._$header=$("#settings_header"),o._$footer=$("#settings_footer"),o._$buttonAudio=$("#button_settings_audio"),o._$buttonAudio.on("click",function(){e.coreEvents.emit(k.EVENT_SET_MUTE,!k.globalSounds.isMuted)}),o._$buttonHome=$("#button_settings_home"),o._$buttonHome.on("click",function(){$("#button_exit_settings").click(),window.vex.dialog.buttons.YES.text=g.getPhrase("yes_caps"),window.vex.dialog.buttons.NO.text=g.getPhrase("no_caps"),window.vex.dialog.confirm({message:g.getPhrase("confirm_exit"),callback:function(a){a&&h.instance.emit(b.ControlPanel.EVENT_QUIT_GAME)}})}),h.instance.once(l.ON_GAME_READY,function(){this._stopOnFeature.setValue(!1),this._stopOnAnyWin.setValue(!1),this._quickSpin.setValue(1==h.getAppValue("quickSpin",!0)),this._splashScreen.setValue(1==h.getAppValue("splashScreen",!0)),this._spaceBar.setValue(1==h.getAppValue("spaceToSpin",!0)),this._valuesInCoins.setValue(1==h.getAppValue("showWinsAsCoins",!1)),this._leftHanded.setValue(!1),this._sounds.setValue(this.stringtoBoolean(f.launchVariables.sfx)),this._music.setValue(this.stringtoBoolean(f.launchVariables.music))}.bind(o)),h.instance.on(p.SET_BETTING_PARAMS,function(b){s.coinValues=b.getCreditValues();for(var c=1;c<=b.getMaxBetLevel();c++)s.betLevels.push(c);new a.Slots.SettingsPages.StepperCoinValue("cp_stepper_coin_value"),new a.Slots.SettingsPages.StepperBetLevel("cp_stepper_bet_level"),s.setCoinDenominations(b.getCreditValues()),s.setMaxBetLevel(b.getMaxBetLevel()),s.wayCredits=b.getWaysCredits()||s.wayCredits,o._coinValue=new y("stepper_coin_value"),o._betLevel=new x("stepper_bet_level"),o._totalBet=new z("stepper_total_bet"),o._betLevel.setValue(b.getDefaultBetLevel()),o._coinValue.setValue(b.getDefaultCoinLevel()),h.instance.on(r.ON_BET_CHANGE,function(){return o.updatePays()}),h.instance.on(r.ON_BET_EVENT_OUTER,function(){return o.showBetPage()}),h.instance.on(r.ON_AUTOPLAY_EVENT_OUTER,function(){return o.showAutoplayPage()}),h.instance.emit(r.ON_BET_CHANGE,{betLevel:b.getDefaultBetLevel(),coinLevel:b.getDefaultCoinLevel()})}),e.coreEvents.on(k.EVENT_SET_MUTE,function(a){a?(this._$buttonAudio.removeClass("audio_on"),this._$buttonAudio.addClass("audio_off")):(this._$buttonAudio.removeClass("audio_off"),this._$buttonAudio.addClass("audio_on"))}.bind(o)),o._sessionLimitSlider=new B("slider_session_limit",1,120,q,2),o._sessionLimitSlider.setValue(i.getRealityCheckDuration()),o._sessionLimitSlider.onChange=function(a){h.instance.emit(r.ON_REALITY_CHECK_CHANGE,a)};a.Core.Utils.getUrlVar("regulation");return $("#session_time_limit").hide(),o._volumeSlider=new B("slider_volume",0,1,function(a){return(100*a).toFixed(0)},.01),o._volumeSlider.setValue(h.getAppValue("soundFxVolume",1)),o._volumeSlider.onChange=function(a){var b=+h.getAppValue("soundEffects",!0)*a;h.saveAppValue("soundFxVolume",b),e.coreEvents.emit(k.EVENT_SET_FX_VOLUME,b),b>0&&e.coreEvents.emit(k.EVENT_ON_FX_VOLUME,!0),e.coreEvents.emit(k.EVENT_SET_MUSIC_VOLUME,+h.getAppValue("music",!0)*a)},o._autoSpinsSlider=new B("slider_autospin_count",0,100,null,5),o._autoSpinsSlider.onChange=function(b){h.instance.emit(r.ON_AUTO_SPIN_COUNT_CHANGE,b),a.Common.Server.autobool=b,b&&a.Common.Server.UKGC?($("#settings_autospin_inputs").show(),this._$inputLossLimit.getValue()?(this._$inputLossLimit.getDiv().fadeIn(),this._$inputLossLimit.getDiv().removeClass("flash-item"),$("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('./assets/html/images/settings/buttonPanel/mobile/continue.png')")):(this._$inputLossLimit.getDiv().addClass("flash-item"),$("#autoplayStartButton").addClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('./assets/html/images/settings/buttonPanel/mobile/continue_Btn_disable.png')"))):($("#settings_autospin_inputs").hide(),$("#autoplayStartButton").removeClass("disabled_settings_item"))}.bind(o),o._$inputLossLimit=new u("input_loss_limit",function(b){h.instance.emit(r.ON_LOSS_LIMIT_CHANGE,b/100),b/100>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(this._$inputLossLimit.getDiv().removeClass("flash-item"),$("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('./assets/html/images/settings/buttonPanel/mobile/continue.png')")):this._$inputLossLimit&&(this._$inputLossLimit.getDiv().addClass("flash-item"),$("#autoplayStartButton").addClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('./assets/html/images/settings/buttonPanel/mobile/continue_Btn_disable.png')"))}.bind(o),"keypad"),o._$inputSingleWinLimit=new u("input_single_win_limit",function(a){h.instance.emit(r.ON_SINGLE_WIN_LIMIT_CHANGE,a)},"keypad"),o._$inputTotalWinLimit=new u("input_total_win_limit",function(a){h.instance.emit(r.ON_TOTAL_WIN_LIMIT_CHANGE,a)},"keypad"),o._stopOnFeature=new A("checkbox_stop_on_feature",function(a){h.instance.emit(r.ON_STOP_ON_FEATURE_WIN_CHANGE,a)}),o._stopOnAnyWin=new A("checkbox_stop_on_any",function(a){h.instance.emit(r.ON_STOP_ON_ANY_WIN,a)}),o._quickSpin=new A("checkbox_quickspin",function(a){h.instance.emit(r.ON_QUICK_SPIN,a),h.saveAppValue("quickSpin",!1)}),o._splashScreen=new A("checkbox_splash",function(b){b||(a.Common.Server.server.spinButtonBoolean=!1),h.saveAppValue("splashScreen",b)}),o._spaceBar=new A("checkbox_spacebar",function(a){h.saveAppValue("spaceToSpin",a)}),o._valuesInCoins=new A("checkbox_coin_values",function(a){h.saveAppValue("showWinsAsCoins",a),n.formatAsCredits=a,h.instance.emit(r.ON_DISPLAY_FORMAT_CHANGE,a),h.instance.emit(r.ON_BET_CHANGE,{betLevel:this.betLevel,coinLevel:this.coinLevel})}),o._leftHanded=new A("checkbox_left_handed",function(a){h.saveAppValue("leftHandedMode",a),h.instance.emit(r.ON_LEFT_HANDED_MODE,a)}),o._sounds=new A("checkbox_soundeffects",function(a){h.saveAppValue("soundEffects",a),h.instance.emit(r.ON_SOUND_EFFECTS,a),e.coreEvents.emit(k.EVENT_SET_FX_VOLUME,a),e.coreEvents.emit(k.EVENT_ON_FX_VOLUME,a)}),o._music=new A("checkbox_music",function(a){h.saveAppValue("music",a),h.instance.emit(r.ON_MUSIC,a),e.coreEvents.emit(k.EVENT_SET_MUSIC_VOLUME,a)}),o._paysPager=new v("pay_page_pager",["page1","page2","page3","page4","page5","page6","page7","page8","page9"]),$(o._$div).find("#settings_autospins").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_pays").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_rules").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_history").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_bets").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_general").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#button_exit_settings").on("click",function(){f.isDesktop()&&h.instance.emit(l.ON_PLAYER_PROMPT_IDLE),"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),this._$buttonSpin=$("#button_spin"),this._$buttonSpin.removeClass("disabled_settings_item"),k.globalSounds.playCue("GENERIC_CLICK"),$("#button_help").removeClass("disabled"),$("#button_auto_cp").removeClass("disabled_settings_item"),$("#button_auto_cp").removeClass("disabled"),$("#button_settings").removeClass("disabled"),$("#button_settings").removeClass("disabled_settings_item"),h.instance.emit(b.ControlPanel.PAYTABLE_SHOW_HIDE_BUTTONPANEL,"close"),a.Common.Server.server.isPaytableVisible=!1,this._$buttonSpin.css("pointer-events","all"),this._$buttonSpin.fadeIn(),$("#bet_wrapper").removeClass("disabled"),j.getPageManager("MAIN").closeOverlay(),j.getPageManager("MAIN").showPage("main"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!1),h.instance.emit(r.OPTION_STATUS_CHANGED,!1)}.bind(o)),$("#autoplayStartButton").on("click",function(){a.Common.Server.autobool>0&&(a.Common.Server.autoButtonBool=!0,j.getPageManager("MAIN").closeOverlay())}),o.on(a.Core.Events.ON_HIDDEN,function(){a.Common.Server.autoButtonBool?(h.instance.emit(r.ON_SETTINGS_CLOSED,{autoSpins:o._autoSpinsSlider.getValue()}),a.Common.Server.autoButtonBool=void 0,a.Common.Server.autobool=void 0):h.instance.emit(r.ON_SETTINGS_CLOSED,{autoSpins:0})}),$("#settings_page_autospins").hide(),$("#settings_page_general").hide(),$("#settings_page_bets").hide(),$("#settings_page_rules").hide(),$("#settings_page_pays").hide(),$("#settings_page_history").hide(),o.on(a.Core.Events.ON_SHOWN,o.onShown,o),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,o.resize,o),o.resize(),o}return __extends(t,d),t.prototype.onbetClick=function(){$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob")},t.loadGameRules=function(b){a.getConfig().languages.indexOf(f.launchVariables.lang)<0&&(f.launchVariables.lang="en");var c=f.launchVariables.lang.toLowerCase();c&&$("#"+c).css("display","block"),$.ajax({type:"GET",url:"assets/lang/rules_"+c+".html?v=1.0.7",success:function(a){$("#settings_page_rules").append(a.replace("{version}","<small><strong>"+h.version+"</strong></small>")),b()},error:function(){throw"Can't load game rules"}})},t.prototype.stringtoBoolean=function(a){return"1"===a||"true"===a||"0"!==a&&"false"!==a&&void 0},t.prototype.onShown=function(){this.resize(),this._autoSpinsSlider.setValue(0),this.updatePays(),this._$inputLossLimit.setValue(null),this._$inputTotalWinLimit.setValue(null),this._$inputSingleWinLimit.setValue(null),this._stopOnAnyWin.setValue(!1),this._stopOnFeature.setValue(!1),h.instance.emit(m.REQUEST_TRANSACTIONS,{from:"day",to:"day2"}),h.instance.emit(r.ON_SETTINGS_OPEN)},t.prototype.onMenuClick=function(b){var d=b.target;if("iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),void 0!==this.prevID&&this.prevID===d.id||!f.isDesktop()){if(void 0===this.prevID||this.prevID!==d.id)switch(this.prevID=d.id,m.server&&(m.server.previousID=d.id),$(this._$div).find("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$("#settings_page_history_more").css("display","none"),$("#settings_autospins").hide(),$("#settings_general").show(),$("#settings_pays").show(),d.id){case"settings_general":$("#quick_spin").css("cssText","display:none"),$(this._$div).find("#settings_general").addClass("icon_selected"),this.showPage("settings_page_general","settings_general_mob"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_pays":this.updatePays(),$(this._$div).find("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!0);break;case"settings_rules":$(this._$div).find("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob")}}else switch(this.prevID=d.id,h.instance.emit(l.ON_PLAYER_PROMPT_IDLE_KILL),m.server&&(m.server.previousID=d.id),$("#button_exit_settings").removeClass("disabled_settings_item"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$(this._$div).find("#settings_rules").removeClass("icon_selected"),$(this._$div).find("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_history").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),d.id){case"settings_autospins":$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),this._autoSpinsSlider.setValue(0);break;case"settings_general":0!=Object.keys(k.globalSounds.getatlas()).length&&k.globalSounds.playCue("GENERIC_CLICK"),$("#quick_spin").hide(),$("#bet_wrapper").addClass("disabled"),$(this._$div).find("#settings_general").addClass("icon_selected"),this.showPage("settings_page_general","settings_general_mob"),h.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!0),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_bets":$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob");break;case"settings_pays":0!=Object.keys(k.globalSounds.getatlas()).length&&k.globalSounds.playCue("GENERIC_CLICK"),this.updatePays(),$("#bet_wrapper").removeClass("disabled"),$(this._$div).find("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!0),h.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!1);break;case"settings_rules":$(this._$div).find("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob");break;case"settings_history":$(this._$div).find("#settings_history").addClass("icon_selected"),this.showPage("settings_page_history","settings_history_mob"),f.isMobile()&&$("#settings_page_history_more").css("display","block")}},t.prototype.showPage=function(a,b){$(this._$header).find("#settings_page_title").text(g.getPhrase(b)),this._$currentPage&&this._$currentPage.fadeOut(100),setTimeout(function(){var b=$(this._$div).find("#"+a);b.show(),this._$currentPage=b,this._$currentPage.fadeIn()}.bind(this),250)},t.prototype.updatePays=function(){var a=o.getSubGameProfile("$BASE");for(var c in a.get().paytable){var d=a.get().paytable[c];if(d.oak)for(var e in d.oak){var f=d.oak[e].multiplier;f&&("SCATTER"!=d.name?$("#symbol-pays_"+c+e).text(n.format(s.getCoinValue()*s.currentBetLevel*f/20)):$("#symbol-pays_"+c+e).text(n.format(s.getCoinValue()*s.currentBetLevel*f*s.wayCredits)))}}2==this.firstLoad?h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0):this.firstLoad++},t.prototype.showBetPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected")},t.prototype.showAutoplayPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$("#settings_page_rules").hide(),$("#settings_general").hide(),$("#settings_pays").hide(),f.isMobile()&&(this.prevID="settings_autospins"),$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),this._autoSpinsSlider.setValue(0)},t.prototype.resize=function(){var a=0,b=0,c=0;f.isDesktop()?$("body").append(this._$settingsHolder):(this._$settingsHolder.css("z-index",99999),$("body").append(this._$settingsHolder),a=$(window).width(),b=$(window).height(),c=$(document).height(),this._$settingsHolder.css("width",a+"px"),"Android"==f.getPlatformData().os.family&&f.isPortrait()?this._$settingsHolder.css("height",c+"px"):this._$settingsHolder.css("height",b+"px"),f.isLandscape()?(this._$header.css("width",a-80+"px"),this._$pages.css("width",a-100+8+"px"),this._$footer.css("width",a-80+"px"),this._$pages.css("left","90px"),this._$pages.css("height",b-124+"px"),this._$menu.css("height",b+"px"),this._$menu.css("width","80px")):(this._$header.css("width","100%"),this._$footer.css("width","100%"),this._$pages.css("left","10px"),this._$pages.css("width",a-20+8+"px"),this._$pages.css("height",b-204+"px"),this._$menu.css("width",a-10),this._$menu.css("height","80px")))},t}(d);c.Settings=t;var u=function(){function a(b,c,d){this._value=0,this._currentKeypadValue="",this._clickCount=0,this._$div=$("#"+b),this._$keypadDiv=$("#"+d),this._$keypadDisplay=this._$keypadDiv.find(".keypad_display"),this._onChange=c,this._value=0,a.isKeypadInitialized||this.initKeypad(),this._$div.on("click",function(){a.currentInput=this,this.clearKeypad(),this._$keypadDiv.show()}.bind(this)),this.setValue()}return a.prototype.getDiv=function(){return this._$div},a.prototype.getValue=function(){return 100*this._value},a.prototype.setValue=function(a){if(a!=this._value&&this._onChange(this._value=a?100*a:a),a){var b=n.formatAsCredits;n.formatAsCredits=!1,this._$div.text(n.format(100*a||0)),n.formatAsCredits=b}else this._$div.text("0")},a.prototype.clearKeypad=function(){this._clickCount=0,this._currentKeypadValue="0",this._$keypadDisplay.text(this._currentKeypadValue)},a.prototype.addCharacter=function(a){0==this._clickCount&&(this._currentKeypadValue=""),this._currentKeypadValue.length+1<7&&(this._clickCount++,this._currentKeypadValue+=a,this._$keypadDisplay.text(this._currentKeypadValue))},a.prototype.initKeypad=function(){this._$keypadDiv.find(".keypad_1").on("click",function(){this.addCharacter("1")}.bind(this)),this._$keypadDiv.find(".keypad_2").on("click",function(){this.addCharacter("2")}.bind(this)),this._$keypadDiv.find(".keypad_3").on("click",function(){this.addCharacter("3")}.bind(this)),this._$keypadDiv.find(".keypad_4").on("click",function(){this.addCharacter("4")}.bind(this)),this._$keypadDiv.find(".keypad_5").on("click",function(){this.addCharacter("5")}.bind(this)),this._$keypadDiv.find(".keypad_6").on("click",function(){this.addCharacter("6")}.bind(this)),this._$keypadDiv.find(".keypad_7").on("click",function(){this.addCharacter("7")}.bind(this)),this._$keypadDiv.find(".keypad_8").on("click",function(){this.addCharacter("8")}.bind(this)),this._$keypadDiv.find(".keypad_9").on("click",function(){this.addCharacter("9")}.bind(this)),this._$keypadDiv.find(".keypad_0").on("click",function(){this.addCharacter("0")}.bind(this)),this._$keypadDiv.find(".keypad_cancel").on("click",function(){this.clearKeypad(),this._$keypadDiv.hide()}.bind(this)),this._$keypadDiv.find(".keypad_ok").on("click",function(){this._$keypadDiv.hide(),0==this._currentKeypadValue.length?a.currentInput.setValue(null):a.currentInput.setValue(parseInt(this._currentKeypadValue)),this.clearKeypad()}.bind(this)),a.isKeypadInitialized=!0},a.isKeypadInitialized=!1,a}();c.NumericInput=u;var v=function(){function a(a,b){var c=this;this._idx=0,this.hideAll=function(){return c._$pages.forEach(function(a){return a.hide()})},this.updatePage=this.updatePage.bind(this),this._$div=$("#"+a),this._$nextBtn=this._$div.find(".pager-right"),this._$prevBtn=this._$div.find(".pager-left"),this._$text=this._$div.find(".pager-text"),this._$pages=b.map(function(a){return $("#"+a)}),this._$nextBtn.on("click",function(a){return c.updatePage(c._idx+1)}),this._$prevBtn.on("click",function(a){return c.updatePage(c._idx-1)}),this.hideAll(),this.updatePage(this._idx)}return a.prototype.updatePage=function(a){0!==a&&k.globalSounds.playCue("GENERIC_CLICK"),this._$pages[this._idx].hide(),this._idx=a,this._idx<0?this._idx=this._$pages.length-1:this._idx>=this._$pages.length&&(this._idx=0),this._$pages[this._idx].show(),this._$text.text(this._idx+1+"/"+this._$pages.length)},a}();c.PagerWidget=v;var w=function(){function b(b){this._currentIndex=0,this._$div=$("#"+b),this._$value=$(this._$div.find(".value")),this._$buttonNext=$(this._$div.find(".button_next")),this._$buttonPrev=$(this._$div.find(".button_prev")),this._$buttonPrev.on("click",function(){this._currentIndex>0&&("iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),k.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex-1]),f.isMobile()&&(this._$buttonPrev.css("visibility","hidden"),setTimeout(function(){this._$buttonPrev.css("visibility","visible")}.bind(this),100)))}.bind(this)),this._$buttonNext.on("click",function(){this._currentIndex<this._values.length-1&&("iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),k.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex+1]),f.isMobile()&&(this._$buttonNext.css("visibility","hidden"),setTimeout(function(){this._$buttonNext.css("visibility","visible")}.bind(this),100)))}.bind(this))}return b.prototype.getValue=function(){return this._values[this._currentIndex]},b.prototype.setMax=function(){this.setValue(this._values[this._values.length-1])},b.prototype.setValue=function(a,b){var c=a!=this.getValue();this._currentIndex=this._values.indexOf(a),this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},b.prototype.setIndex=function(a,b){this._currentIndex=a,this.showValue(),!b&&this.onChange&&this.onChange()},b.prototype.setValues=function(a,b){this._values=a,this._valueLabels=b,this._currentIndex=0,this.setValue(this._values[0])},b.prototype.setText=function(a){this._$value.text(a)},b.prototype.showValue=function(){this._$value.text(this._valueLabels[this._currentIndex]),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),this._currentIndex===this._values.length-1?this._$buttonNext.addClass("disabled"):0===this._currentIndex&&this._$buttonPrev.addClass("disabled")},b}();c.StepperWidget=w;var x=function(a){function b(b){var c=a.call(this,b)||this;return c.setValues(s.betLevels,s.betLevels),c.onChange=function(a){s.currentBetLevel=a,h.instance.emit(r.ON_BET_CHANGE,{betLevel:a})},h.instance.on(r.ON_BET_CHANGE,function(a){a.betLevel&&this.setValue(a.betLevel,!0)}.bind(c)),c.setValue(1),c}return __extends(b,a),b}(w);c.StepperBetLevel=x;var y=function(a){function b(b){for(var c=a.call(this,b)||this,d=[],e=1;e<=s.coinValues.length;)d.push(e++);return c.setValues(d,function(a,b){var c=[];return a.forEach(function(a){c.push(b(a))}),c}(s.coinValues,n.format)),c.onChange=function(a){s.currentCoinLevel=a,h.instance.emit(r.ON_BET_CHANGE,{coinLevel:a})},h.instance.on(r.ON_BET_CHANGE,function(a){a.coinLevel&&(s.currentCoinLevel=a.coinLevel,this.setValue(a.coinLevel,!0)),n.creditValue=s.getCoinValue()}.bind(c)),c}return __extends(b,a),b}(w);c.StepperCoinValue=y
;var z=function(a){function b(b){var c=a.call(this,b)||this;return c.calculateValues=function(){var a=c.calculateTotalBetCombos(s.coinValues,s.getMaxBetLevel()),b=[];a.forEach(function(a){b.push(n.format(a.total))}),c.setValues(a,b)},c.calculateValues(),c.onChange=function(a){s.currentCoinLevel=a.coinLevel,s.currentBetLevel=a.betLevel,h.instance.emit(r.ON_BET_CHANGE,{coinLevel:s.currentCoinLevel,betLevel:s.currentBetLevel=a.betLevel})},h.instance.on(r.ON_BET_CHANGE,function(a){var b=s.getTotalBetCash();this.setValue(b,!0)}.bind(c)),c}return __extends(b,a),b.prototype.showValue=function(){a.prototype.showValue.call(this),this._$value.text(n.format(this._values[this._currentIndex].total))},b.prototype.setValue=function(a,b){for(var c=a!=this.getValue(),d=0;d<this._values.length;d++)if(this._values[d].total==a){this._currentIndex=d;break}this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},b.prototype.calculateTotalBetCombos=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=1;e<=b;e++)c.push({coinLevel:d+1,betLevel:e,total:a[d]*e*s.wayCredits});c.sort(function(a,b){return a.total>b.total?1:a.total<b.total?-1:0});var f=0,g=[];return c.forEach(function(a){a.total!=f&&g.push(a),f=a.total}),JSON.parse(JSON.stringify(g))},b}(w);c.StepperTotalBet=z;var A=function(){function a(a,b){this._$div=$("#"+a),this._onChange=b,this._$div.addClass("checkbox"),this._$div.append("<div class='checkbox_handle'></div>"),this._$handle=this._$div.find(".checkbox_handle"),this._$div.on("click",function(a){k.globalSounds.playCue("GENERIC_CLICK"),this.setValue(!this._value)}.bind(this))}return a.prototype.setValue=function(a){this._value=a,this._value?(this._$handle.animate({left:"35px"},200),this._$div.removeClass("checkbox_off"),this._$div.addClass("checkbox_on")):(this._$handle.animate({left:"4px"},200),this._$div.removeClass("checkbox_on"),this._$div.addClass("checkbox_off")),this._onChange(this._value)},a.prototype.getValue=function(){return this._value},a}();c.CheckboxWidget=A;var B=function(){function b(a,c,d,e,g){this._minValue=0,this._maxValue=1,this._isMouseDown=!1,this._$div=$("#"+a),this._$div.addClass("slider"),this._$div.append('\n            <div class="value_label">Label</div>\n            <div class="groove-container">\n                <div class="min_label">0</div>\n                <div class="groove">\n                    <div class="lit"></div>\n                    <div class="handle"></div>\n                </div>\n                <div class="max_label">1</div>\n            </div>'),this._onDisplay=e||function(a){return a},this._clamp=g||1,this._minValue=c,this._maxValue=d,this._$handle=$(this._$div.find(".handle")),this._$litBar=$(this._$div.find(".lit")),this._$groove=$(this._$div.find(".groove")),this._$labelMin=$(this._$div.find(".min_label")),this._$labelMax=$(this._$div.find(".max_label")),this._$labelValue=$(this._$div.find(".value_label")),this._$labelMin.text(this._onDisplay(c)),this._$labelMax.text(this._onDisplay(d)),this._$div.on("mouseup",function(a){this._isMouseDown=!1}.bind(this)),this._$div.on("mousedown",function(a){this._isMouseDown=!0;var c=this._$groove.offset();f.isDesktop()?this.calcValue((a.clientX-c.left)*(1/b.scaleFactor)):this.calcValue(a.clientX-c.left)}.bind(this)),this._$div.on("touchmove",function(a){var b=this._$groove.offset();this.calcValue(a.originalEvent.touches[0].clientX-b.left)}.bind(this)),f.isDesktop()&&this._$div.on("mousemove",function(a){if(this._isMouseDown){var c=this._$groove.offset();this.calcValue((a.originalEvent.clientX-c.left)*(1/b.scaleFactor))}}.bind(this)),this.setValue(0)}return b.prototype.getValue=function(){return this._value},b.prototype.setValue=function(a){this._value=a,this._$labelValue.text(this._onDisplay(a));var b=(a-this._minValue+1)/(this._maxValue-this._minValue+1)*100;this._$litBar.css("width",b+"%"),this._$handle.css("left",b+"%"),this.onChange&&this.onChange(a)},b.prototype.enable=function(a){a?this._$div.removeClass("disabled"):this._$div.addClass("disabled")},b.prototype.calcValue=function(b){var c=b/this._$groove.outerWidth()*(this._maxValue-this._minValue)+this._minValue,d=this._clamp;c<this._minValue+d?c=this._minValue:c>this._maxValue-d&&(c=this._maxValue),this.setValue(a.Core.Maths.roundToNearest(c,d))},b.scaleFactor=1,b}();c.SliderWidget=B}(b.SettingsPages||(b.SettingsPages={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Time.Juggler,d=a.Common.ApplicationBase,e=a.Common.GameEvents,f=a.Common.GameProfile,g=a.Core.Renderer.Stage,h=a.Core.Lang,i=a.Common.Currency,j=a.Core.Environment,k=a.Common.Server.ResponseResults,l=PIXI.Graphics,m=function(h){function i(g,j){var k=h.call(this)||this;if(k._reels=[],k._allSymbols=[],k._wasSpinInterrupted=!1,k._symbolProfiles={},k._reelsSpinning=0,k.showResults=function(a,b){function c(){if(j+=f._setup.animation.drop.delay_adjust||0,i.isQuickSpin&&(j=0),f._wasSpinInterrupted){j=0;for(var b=0;b<f._reels.length;b++)h=b,e();d.instance.emit(i.EVENT_REEL_DROPPED,f._reels,f._wasSpinInterrupted)}else++h<a.aperture.getReelCount()&&(f._juggler.setTimeout(e,j),i.isQuickSpin||(j*=0))}function e(e){var k,l=f._reels[h];if(g=f.getSymbolCounts(),f._wasSpinInterrupted&&d.instance.emit(i.EVENT_REELS_DROPPED,a),!f._wasSpinInterrupted&&h>3)for(var m in g){var n=g[m],o=f.getSymbolProfile(m);o.doTease(n+1)&&(k=o,j=0,f._juggler.timeMultiplier=1,d.instance.emit(i.EVENT_TEASE_REEL,l,k))}l.dropSymbols(f._setup.animation,k,a.aperture.getStrip(h+1),function(e){f._allSymbols=f._allSymbols.concat(l.getVisibleSymbols()),d.instance.emit(i.EVENT_REEL_DROPPED,e,f._wasSpinInterrupted),--f._reelsSpinning>0?c():f._juggler.setTimeout(function(){d.instance.emit(i.EVENT_REELS_DROPPED,a),b&&b()},k?750:200)})}var f=k;k._allSymbols=[];var g,h=0,j=f._setup.animation.drop.delay;k._reelsSpinning=k._reels.length,e()},k._assets=g,k._juggler=new c(!0),!j)throw"[Aperture] Required parameter 'gameId' missing in Aperture constructor in layout.  Valid constructor is : Aperture(assets, gameId)";return k._gameProfile=f.getSubGameProfile(j),k.once(a.Core.Events.ON_DESTROY,k.onDestroy),k.once(a.Core.Events.ON_CREATE,k.onCreate),d.instance.on(b.ControlPanel.EVENT_INTERRUPT_SPIN,k.onInterruptSpin,k),d.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,k.onWinsShown,k),d.instance.on(e.ON_GET_GAME_RESULTS,k.onGameResults,k),d.instance.on(e.ON_GET_CLEAR_ALL_SCREEN,k.onGameResults,k),d.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_START,function(){i._AutoPlay=!0},k),d.instance.on(i.STOP_REEL_SPINNING,k.onStopReelSpinning),d.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,function(){i._AutoPlay=!1},k),d.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_QUICK_SPIN,function(a){i.isQuickSpin=a}.bind(k)),d.instance.on(b.WinManager.EVENT_MODIFY_APERTURE_START,k.hideReel,k),k}return __extends(i,h),i.prototype.onWinsShown=function(a){this._juggler.timeMultiplier=1,this.stopSymbolAnimations()},i.prototype.onGameResults=function(){this.stopSymbolAnimations()},i.prototype.getBackContainer=function(){return this._behindReels},i.prototype.getAnimationLayer=function(){return this._animationLayer},i.prototype.stopSymbolAnimations=function(){this.applyToSymbols(function(a){a.stopAnimation()})},i.prototype.startSpin=function(b,c){if(this._spinTime=(new Date).getTime(),this._wasSpinInterrupted=!1,this.applyToSymbols(function(a){a.fadeIn()}),a.Common.Server.spacebarToQuickSpin?this._juggler.timeMultiplier=3:i.isQuickSpin?this._juggler.timeMultiplier=3:this._juggler.timeMultiplier=1,b)this._reels.forEach(function(a){a.startSpin({start:{}}),a.alpha=1});else{var e=0;this._reels.forEach(function(a){a.alpha=1,this._juggler.setTimeout(function(){a.startSpin(this._setup.animation)}.bind(this),e),i.isQuickSpin,e+=0*this._setup.animation.start.delay}.bind(this))}d.instance.emit(i.EVENT_REELS_SPIN_START)},i.prototype.dropSymbols=function(b,c){this.alpha=1;var d=(this._setup.animation.min_spin_time||1e3)-((new Date).getTime()-this._spinTime);j.launchVariables.rm&&"dk"===j.launchVariables.rm.toLowerCase()?i.isQuickSpin?a.Core.Time.juggler.setTimeout(function(){this.showResults(b,c)}.bind(this),d+500):a.Core.Time.juggler.setTimeout(function(){this.showResults(b,c)}.bind(this),d):i.isQuickSpin?this.showResults(b,c):this._wasSpinInterrupted?this.showResults(b,c):a.Core.Time.juggler.setTimeout(function(){this.showResults(b,c)}.bind(this),d)},i.prototype.getSymbolProfile=function(a){if(this._symbolProfiles[a])return this._symbolProfiles[a];throw"[Aperture] Symbol id does not exist in aperture symbols setup : "+a},i.prototype.getSymbolCounts=function(){var a={};return this.applyToSymbols(function(b){a[b.symbolId]=a[b.symbolId]||0,a[b.symbolId]++}),a},i.prototype.getReel=function(a){return this._reels[a]},i.prototype.getAllSymbols=function(){return this._allSymbols},i.prototype.getSpinningReelsCount=function(){var a=0;return this.applyToReels(function(b){b.isSpinning()&&a++}),a},i.prototype.getSymbols=function(a){var b=[];return a.forEach(function(a){b.push(this.getSymbolAtPosition(a))}.bind(this)),b},i.prototype.getSymbol=function(a,b){return this._reels[a-1].getSymbol(b)},i.prototype.getAbsolutePositionCentre=function(a){var b=Math.floor((a-1)/this._setup.symbols_per_reel),c=a-1-b*this._setup.symbols_per_reel+1,d=this._setup.reel_spacing,e=this._reels[0].getSymbol(1).height;return new PIXI.Point(d/2+d*b,-e/2+c*e)},i.prototype.convertIntoReel=function(a,b){var c=Math.ceil(b/3);return a.match("BUNNY")?this.getAbsolutePositionCentre(3*c):a.match("PUMPKIN")?this.getAbsolutePositionCentre(3*b-1):void 0},i.prototype.getAbsolutePosition=function(a){var b=a%5,c=(a-b)/5,d=this._setup.reel_spacing,e=this._reels[0].getSymbol(1).height;return new PIXI.Point(d*b+222,e*c+e+28)},i.prototype.getSymbolAtPosition=function(a){var b=Math.floor((a-1)/this._setup.symbols_per_reel),c=a-1-b*this._setup.symbols_per_reel+1;return this._reels[b].getSymbol(c)},i.prototype.getPositionCentre=function(a,b){return b=b||g.instance,this.getSymbolAtPosition(a).getLocalCoords(b)},i.prototype.getPositionCentreList=function(a,b){b=b||g.instance;var c=[];return a.forEach(function(a){c.push(this.getPositionCentre(a,b))}.bind(this)),c},i.prototype.restoreAperture=function(a){var b=0;a.forEach(function(a){this._reels[b++].setSymbols(a)}.bind(this))},i.prototype.onInterruptSpin=function(){this._wasSpinInterrupted=!0,this._juggler.timeMultiplier=1},i.prototype.onStopReelSpinning=function(){this._wasSpinInterrupted=!0,this._reels.forEach(function(a){a.animateReelStop()})},i.prototype.onDestroy=function(){d.instance.off(b.ControlPanel.EVENT_INTERRUPT_SPIN,this.onInterruptSpin),d.instance.off(e.ON_GET_GAME_RESULTS,this.onGameResults),d.instance.off(e.ON_RESULTS_DISPLAYED,this.onWinsShown),d.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),d.instance.off(b.WinManager.EVENT_MODIFY_APERTURE_START,this.hideReel),this._reels.forEach(function(a){a.destroy(),a=null})},i.prototype.onCreate=function(b){if(this._setup=b.params,!this._setup.symbols)throw"[Aperture] Missing 'symbols' property in Aperture setup";this._setup.mask_size&&(this.mask=new l,this.mask.beginFill(16777215),this.mask.drawRect(this._setup.mask_size.x,this._setup.mask_size.y,this._setup.mask_size.width,this._setup.mask_size.height),this.mask.endFill(),this.addChild(this.mask));for(var c in this._gameProfile.get().paytable)this._symbolProfiles[c]=new t(c,this._setup.symbols[c],this._gameProfile.get().paytable[c]);this._behindReels=new PIXI.Container,this.addChild(this._behindReels);var d=(this._setup.reel_spacing||150)/2,e=0;this._allSymbols=[],this._setup.strips.forEach(function(b){var c=b.split(","),f=new a.Slots.Reel(this,this._assets,this._setup,c,this._juggler);this._reels.push(f),f.x=d,f.y=this._setup.top_margin||0,d+=this._setup.reel_spacing||0,this.addChild(f),this._allSymbols=this._allSymbols.concat(f.getVisibleSymbols()),f.reelIndex=e++}.bind(this)),this._animationLayer=new PIXI.Container,this.addChild(this._animationLayer)},i.prototype.applyToSymbols=function(a){this._allSymbols.forEach(a)},i.prototype.applyToReels=function(a){this._reels.forEach(a)},i.prototype.hideReel=function(a){this._reels[a-1].alpha=0},Object.defineProperty(i.prototype,"isSpinning",{get:function(){return this._reelsSpinning>0},enumerable:!0,configurable:!0}),i.EVENT_REEL_DROPPED="aperture_reel_dropped",i.EVENT_SYMBOL_DROPPED="aperture_symbol_dropped",i.EVENT_TEASE_REEL="aperture_tease_reel",i.EVENT_TEASE_REEL_END="aperture_tease_reel_end",i.EVENT_REELS_DROPPED="aperture_all_reels_dropped",i.EVENT_REELS_SPIN_START="aperture_reels_start",i.PROMOTIONAL_PANEL_CHANGE="promotional_panel_change",i.STOP_REEL_SPINNING="stop_reel_spinning",i._AutoPlay=!1,i}(PIXI.Container);b.Aperture=m;var n=function(b){function c(a,c,d){var e=b.call(this)||this;return e._setup=d,e._assets=c,e._aperture=a,e._static=new PIXI.Sprite,e.addChild(e._static),e.scale.set(e._setup.default_symbol_scale||1),e._originalPosition=e.position,e}return __extends(c,b),c.prototype.getSymbolProfile=function(){return this._symbolProfile},c.prototype.fadeOut=function(){this.alpha=.4},c.prototype.fadeIn=function(){this.alpha=1},c.prototype.onDropped=function(){},c.prototype.setSymbol=function(a){this.symbolId=a,this._symbolProfile=this._aperture.getSymbolProfile(this.symbolId),this._static.texture=this._assets.getPIXITexture(this._symbolProfile.getTextureId()),this._static.anchor.x=.5,this._static.anchor.y=.5,this._symbolProfile.isInFront()&&this.parent.addChild(this)},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.stopAnimation=function(){this.alpha=1,this.visible=!0,this._originalPosition&&(this.position=this._originalPosition)},c.prototype.animate=function(a,b){var c,d;if(this.stopAnimation(),b=b||this._symbolProfile.getMovieClipId(),this._symbolProfile.getFrameClipId()&&(c=this._assets.getMovieClip(this._symbolProfile.getFrameClipId(),!0),c.scale.set(this._setup.default_symbol_scale||1)),b)d=this._assets.getMovieClip(b,!0),d.scale.set(this._setup.default_symbol_scale||1),this.visible=!1;else var e=!1,f=5,g=setInterval(function(){this.alpha=e?1:.1,e=!e,0==f--&&clearInterval(g)}.bind(this),250);return{animationClip:d,frameClip:c}},c}(PIXI.Container);b.Symbol=n;var o=function(b){function c(c,d,e,f,g){var h=b.call(this)||this;h.rowIndex=0,h._symbols=[],h._speedM=1,h._section=0,h._isSpinning=!1,h._wasInterrupted=!1,h._assets=d,h._setup=e,h._strip=f,h._juggler=g,h._aperture=c,h._container=new PIXI.Container,h.addChild(h._container),h._symbolHeight=e.size.height/e.symbols_per_reel;for(var i=-1;i<=e.symbols_per_reel;i++){var j=new a.Slots.Symbol(c,h._assets,e);h._container.addChild(j),j.y=(i+1.5)*h._symbolHeight+(e.top_margin||0),h._symbols.push(j),j.setSymbol(f[i+1])}return h._section=0,h.changeSection(),h}return __extends(c,b),c.prototype.destroy=function(){this._juggler.remove(this)},c.prototype.dropInstant=function(a){if(this._isSpinning){this._juggler.remove(this),this.filters=null;for(var b=0;b<this._symbols.length;b++)this._symbols[b].setSymbol(a[b]);this._container.y=1*-this._symbolHeight,TweenLite.to(this._container,0,{y:-this._symbolHeight,ease:Linear.easeIn})}},c.prototype.isSpinning=function(){return this._isSpinning},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.getCentroid=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,this._setup.size.height/2)))},c.prototype.getVisibleSymbols=function(){return this._symbols.slice(1,this._symbols.length-1)},c.prototype.getSymbolIds=function(){var a=[];return this._symbols.forEach(function(b){a.push(b.symbolId)}),a},c.prototype.startSpin=function(a){this._isSpinning||(this._wasInterrupted=!1,this._finalSymbols=null,this._container.y=-this._symbolHeight,this.position.y=0,this._isSpinning=!0,TweenLite.to(this,a.start.ramp_time||0,{y:this.y-a.start.ramp_distance||0,ease:Power1.easeInOut,onComplete:function(){this._setup.motion_blur&&(this.filters=[new PIXI.filters.BlurYFilter(this._setup.motion_blur,0)]),this._juggler.add(this),TweenLite.to(this,a.accel_time||0,{_speedM:m.isQuickSpin?1:a.accel_speed||1}),TweenLite.to(this,a.start.back_delay||.5,{y:0})}.bind(this)}))},c.prototype.getSymbolCount=function(a){var b=0;return this.applyToSymbols(function(c){c.symbolId.indexOf(a)>-1&&b++}),b},c.prototype.setSymbols=function(a){var b=0;this._symbols.forEach(function(c){c.setSymbol(a[b++])})},c.prototype.getSymbol=function(a){return this._symbols[a]},c.prototype.dropSymbols=function(b,c,d,e){this._stopAnimData=b,this._onStopped=e,this._teaseSymbolProfile=c,c?(a.Core.Time.juggler.setTimeout(function(){this._finalSymbols=d.slice()}.bind(this),(4==this.reelIndex?2:1)*c.getTeaseDuration()),c.mimicNearMiss()&&(TweenLite.to(this,1,{y:this.y+this._symbolHeight*(this._setup.animation.tease_peek||.5),ease:Linear.easeIn}),d[0]=c.getId())):this._finalSymbols=d.slice()},c.prototype.applyToSymbols=function(a){this.rowIndex=0,this.getVisibleSymbols().forEach(a)},c.prototype.onUpdate=function(a){this._container.y+=this._setup.animation.spin_speed*a*this._speedM,this._container.y>0&&(this._container.y=0),this._container.y>=0&&this.changeSection()},c.prototype.changeSection=function(){this._container.y-=this._symbolHeight,--this._section<0&&(this._section=this._strip.length-1);for(var a,b,c=this._symbols.length-1;c>0;c--)a=this._symbols[c-1],b=this._symbols[c],a&&b.setSymbol(a.symbolId);this._finalSymbols?(this._symbols[0].setSymbol(this._finalSymbols.pop()),this._finalSymbols.length||this.animateReelStop()):this._symbols[0].setSymbol(this._strip[this._section])},c.prototype.animateReelStop=function(){function a(){c.applyToSymbols(function(a){a.onDropped(),d.instance.emit(m.EVENT_SYMBOL_DROPPED,a,c),c.rowIndex++})}var b=this,c=this;this._isSpinning=!1,this._juggler.remove(this),this.filters=null,this._stopAnimData&&(this._container.y=-c._symbolHeight+this._stopAnimData.drop.bounce_distance,TweenLite.to(this._container,this._stopAnimData.drop.bounce_time,{y:-c._symbolHeight,ease:Power2.easeIn,onComplete:function(){a(),c._onStopped(c),b._teaseSymbolProfile&&d.instance.emit(m.EVENT_TEASE_REEL_END,b)}}))},c.blurDistance=0,c}(PIXI.Container);b.Reel=o;var p=function(){function a(a){this._aperture=a}return a.prototype.getStrip=function(a){return this._aperture[a-1]},a.prototype.getReelCount=function(){return this._aperture.length},a.prototype.getVisibleStrip=function(a){var b=this._aperture[a-1];return b=b.slice(1,b.length-1)},a.prototype.getAperture=function(){return this._aperture},a.prototype.getVisibleAperture=function(){var b=[];return this._aperture.forEach(function(a){b.push(a.slice(1,a.length-1))}),new a(b)},a.prototype.isSymbolVisible=function(a,b){return this.getVisibleStrip(b).indexOf(a)>-1},a.prototype.getOccurrences=function(a,b){var c=[];b=b||this._aperture.length;for(var d=0;d<b;d++)this.isSymbolVisible(a,d+1)&&c.push(d+1);return c},a}();b.ApertureResponse=p;var q=function(a){function b(b){var c=a.call(this,b)||this;return c.totalWinCash=0,c.totalWinCredits=0,c._wins=[],c.winMultiplier=b.eval.multiplier||1,c.aperture=new p(b.eval.aperture),b.eval.wins&&b.eval.wins.detail&&b.eval.wins.detail.length>0&&(c.totalWinCash=b.eval.wins.cash,c.totalWinCredits=b.eval.wins.credits,b.eval.wins.detail.sort(function(a,b){return b.credits-a.credits}),b.eval.wins.detail.forEach(function(a){var b=new r(a);this._wins.push(b)}.bind(c))),c}return __extends(b,a),b.prototype.getFeatureWin=function(){var a;return this.applyToAllWins(function(b){b.getFeatureId()&&(a=b)}),a},b.prototype.getCashWinFormatted=function(){return i.format(this.totalWinCash)},b.prototype.applyToAllWins=function(a){this.getWins().forEach(a)},b.prototype.getWins=function(){return this._wins.slice()},b.prototype.getSingleWin=function(){return this._wins[0]},b.prototype.getWinCount=function(){return this._wins.length},b}(k);b.SpinResults=q;var r=function(){function a(a){this._data=a}return a.prototype.getWinFormatted=function(){return i.format(this.getWinCash())},a.prototype.getSubCount=function(){return this._data.sub_count},a.prototype.getMultiplier=function(){return this._data.multiplier},a.prototype.getFeatureId=function(){return this._data.feature},a.prototype.getPositions=function(){return this._data.positions},a.prototype.getLine=function(){return this._data.line||0},a.prototype.getType=function(){return this._data.type},a.prototype.getWinCredits=function(){return this._data.credits},a.prototype.getWinCash=function(){return this._data.cash||0},a.prototype.getSymbolId=function(){return this._data.symbol},a.prototype.getOAK=function(){return this._data.oak},a.prototype.getDescription=function(){var b;switch(this.getType()){case a.TYPE_LINE:b=h.getPhrase("line_x_wins",{line:this.getLine()}),b+=i.format(this.getWinCash()),this.getWinCash()>0&&d.instance.emit(e.ON_PLAYER_PROMPT_WIN,i.format(this.getWinCash()));break;case a.TYPE_SCATTER:b=h.getPhrase("scatter_wins",{win:i.format(this.getWinCash())}),this.getWinCash()>0&&d.instance.emit(e.ON_PLAYER_PROMPT_WIN,i.format(this.getWinCash()));break;case a.TYPE_WAY:}return b},a.TYPE_LINE="$LINE",a.TYPE_WAY="$WAY",a.TYPE_SCATTER="$SCATTER",a}();b.SlotWin=r;var s=function(){function a(a){this.rule=a.rule,this._oak=a.oak}return a.prototype.getOAKMultiplier=function(a){return this._oak?this._oak["x"+a]:0},a.RULE_LINE_LEFT="$LINE_LEFT",a.RULE_LINE_RIGHT="$LINE_RIGHT",a.RULE_LINE_BOTH="$LINE_BOTH",a.RULE_SCATTER="$SCATTER",a.RULE_WAY_LEFT="$WAY_LEFT",a.RULE_WAY_RIGHT="$WAY_RIGHT",a.RULE_WAY_BOTH="$WAY_BOTH",a}();b.SymbolPays=s;var t=function(){function a(a,b,c){this._data=b,this._data.id=a,this._data.pays=c}return a.prototype.isInFront=function(){return this._data.bring_to_front},a.prototype.getAnimationDuration=function(){return this._data.animation.duration},a.prototype.getId=function(){return this._data.id},a.prototype.getTextureId=function(){return this._data.texture},a.prototype.getMovieClipId=function(){return this._data.animation.clip?this._data.animation.clip.id:null},a.prototype.getMovieClipOffsets=function(){return this._data.animation.clip.offsets||{x:0,y:0}},a.prototype.getDropClipId=function(){return this._data.animation.drop},a.prototype.getActiveClipId=function(){return this._data.animation.active},a.prototype.getFrameClipId=function(){return this._data.animation.frame},a.prototype.getAudioDropId=function(){return this._data.audio.drop},a.prototype.getAudioWinId=function(){return this._data.audio.win},a.prototype.getPays=function(){return new s(this._data.pays)},a.prototype.mimicNearMiss=function(){return!!this._data.tease&&Math.random()<=(this._data.tease.near_miss||0)},a.prototype.getTeaseDuration=function(){return this._data.tease.duration||1},a.prototype.getTeaseAudioId=function(a){return this._data.tease&&this._data.tease.audio?this._data.tease.audio[a]?this._data.tease.audio[a]:this._data.tease.audio[0]:null},a.prototype.doTease=function(a){return this.getPays().getOAKMultiplier(a)&&this._data.tease},a}();b.SymbolProfile=t}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Utils.Queue,d=a.Common.GameProfile,e=a.Common.ApplicationBase,f=a.Core.Utils,g=a.Common.GameEvents,h=a.Core.Lang,i=a.Common.Currency,j=a.Common.Server,k=a.Core.Time.Juggler,l=a.Core.Environment,m=a.Core.SoundManager,n=function(n){function o(c,f){var h=n.call(this)||this;if(h._isSkip=!1,h._idleCycling=!1,h._currentWinMultiplier=1,h._assets=c,h._juggler=new k(!0),!f)throw"[WinManager] Required parameter 'gameId' missing in WinManager constructor in layout.  Valid constructor is : WinManager(assets, gameId)";return h._gameProfile=d.getSubGameProfile(f),h.once(a.Core.Events.ON_DESTROY,h.onDestroy,h),h.once(a.Core.Events.ON_CREATE,h.onCreate,h),e.instance.on(g.ON_GAME_CHANGED,h.onGameChanged,h),e.instance.on(g.ON_GET_GAME_RESULTS,h.onPlayerBet,h),e.instance.on(j.RESPONSE_RESULTS,h.onResultsReady,h),e.instance.on(o.STOP_SYMBOLS_ANIMATION,h.buttonClicked,h),e.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_START,h.onAutoStart,h),e.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,h.onAutoEnd,h),e.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,h.onAutoEnd,h),e.instance.on(g.ON_GET_CLEAR_ALL_SCREEN,h.onPlayerBet,h),e.instance.on(o.EVENT_FREE_SPINS_END,h.onAutoStart,h),o.setBigWinTypes({BIG_WIN:20,MEGA_WIN:50,SUPER_MEGA_WIN:100}),h}return __extends(o,n),o.setBigWinTypes=function(a){this._winBandSetup=a},o.getWinBand=function(b){var c=null;for(var d in this._winBandSetup){b>=this._winBandSetup[d]*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100&&(c=d)}return c},o.prototype.onResultsReady=function(a){},o.prototype.onDestroy=function(){this.removeAllListeners(a.Core.Events.ON_CREATE),this.removeAllListeners(a.Core.Events.ON_DESTROY),e.instance.off(g.ON_GAME_CHANGED,this.onGameChanged),e.instance.off(g.ON_GET_GAME_RESULTS,this.onPlayerBet),e.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_START,this.onAutoStart),e.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_END,this.onAutoEnd),e.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,this.onAutoEnd),e.instance.off(j.RESPONSE_RESULTS,this.onResultsReady),e.instance.off(o.STOP_SYMBOLS_ANIMATION,this.buttonClicked),e.instance.off(g.ON_GET_CLEAR_ALL_SCREEN,this.onPlayerBet)},o.prototype.onAutoEnd=function(){this._idleCycling=!0,this._isAutoPlay=!1},o.prototype.onAutoStart=function(){this._idleCycling=!1,this._isAutoPlay=!0},o.prototype.onGameChanged=function(a){this.stopWinDisplay(),this._idleCycling=a.isBaseGame()||a.isRespin()},o.prototype.onPlayerBet=function(){this.stopWinDisplay()},o.prototype.onCreate=function(b,c){if(this._layout=c,this._setup=b.params,this._aperture=c.getComponent(this._setup.aperture_id),!this._layout.getComponentPlugin(this,"payline_renderer"))throw"[WinManager] Missing essential plugin : payline_renderer";if(!this._layout.getComponentPlugin(this,"symbol_animator"))throw"[WinManager] Missing essential plugin : symbol_animator";a.Core.Utils.touchToSkip(function(){this._isSkip}.bind(this))},o.prototype.getAperture=function(){return this._aperture},o.prototype.displaySpinResults=function(d,j){var k=new f.Queue(this._juggler);this.visible=!0;var n=d.getFeatureWin();k.add(function(b){"$BASE"===d.getNextGameId()&&void 0==a.Common.Server.winend&&(a.Common.Server.forGameFinishedRequest=!0,e.instance.emit(o.GAME_FINISHED)),b()}.bind(this));var p=f.touchToSkip(function(){k.skip(),this.winSummaryEnd&&!this._isAutoPlay&&(this.winSummaryEnd=!1)}.bind(this));a.Core.Environment.isDesktop()&&$(document).on("keyup",function(c){32!=c.keyCode||a.Common.Server.server.isPaytableVisible||(k.skip(),e.instance.emit(b.ControlPanel.EVENT_SPACE_BAR))}.bind(this));var q=d.totalWinCash,r=d.getWins();n&&(r=r.filter(function(a){return!a.getFeatureId()}),r.push(n));var s=o.getWinBand(d.totalWinCash/100),t=o._winBandSetup.MEGA_WIN*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),u=o._winBandSetup.SUPER_MEGA_WIN*a.Slots.SettingsPages.BettingSetup.getTotalBetCash();switch(s){case"BIG_WIN":k.add(function(b){a.Core.Time.juggler.setTimeout(function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3]),a.Core.Renderer.SceneManager.showSceneAsOverlay(s,{win:d.totalWinCash,celebrationEnd:!0,callback:b,OnComplete:function(){m.globalSounds.playCue("CELEBRATION_END")}})},250)});break;case"MEGA_WIN":k.add(function(b){a.Core.Time.juggler.setTimeout(function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3]),a.Common.Server.WinSceneGlobal=!1,a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:t,celebrationEnd:!1,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3])}})},250)}),k.add(function(b){a.Common.Server.WinSceneGlobal=!0,a.Core.Renderer.SceneManager.showSceneAsOverlay(s,{win:d.totalWinCash,celebrationEnd:!0,tickupStart:t,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3]),m.globalSounds.playCue("CELEBRATION_END")}})});break;case"SUPER_MEGA_WIN":k.add(function(b){a.Core.Time.juggler.setTimeout(function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3]),a.Common.Server.WinSceneGlobal=!1,a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:t,celebrationEnd:!1,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3])}})},250)}),k.add(function(b){a.Common.Server.WinSceneGlobal=!0,a.Core.Renderer.SceneManager.showSceneAsOverlay("MEGA_WIN",{win:u,celebrationEnd:!1,tickupStart:t,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3])}})}),k.add(function(b){a.Common.Server.WinSceneGlobal=!1,a.Core.Renderer.SceneManager.showSceneAsOverlay(s,{win:d.totalWinCash,celebrationEnd:!0,tickupStart:u,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&l.isMobile()&&navigator.vibrate([1e3]),m.globalSounds.playCue("CELEBRATION_END")}})})}5==a.Common.Server.server.winlength&&k.add(function(a){e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase("5OAK")),e.instance.emit(o.EVENT_SHOW_5AOK),this._juggler.setTimeout(a,2500)}.bind(this)),k.add(function(a){d.winMultiplier!=this._currentWinMultiplier&&e.instance.emit(o.EVENT_WIN_MULTIPLIER_CHANGE,this._currentWinMultiplier,d.winMultiplier),a()}.bind(this)),r.length?(this.visible=!0,k.add(function(a){e.instance.emit(o.EVENT_WIN_PRESENTATION_START,d),e.instance.emit(o.EVENT_SHOW_WIN_SUMMARY,d),this._juggler.setTimeout(a,this._setup.win_summary_duration||1e3),q&&(r.length>1?e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase("player_wins_x_caps",{win:i.format(q)}),1500):(n?e.instance.emit(g.ON_PLAYER_PROMPT,n.getDescription(),1500):e.instance.emit(g.ON_PLAYER_PROMPT,r[0].getDescription(),1500),this.winSummaryEnd=!0))}.bind(this))):!d.isNextGame("$BASE")&&!d.isGame("$BASE")||this._isAutoPlay||d.isGame("$FREE_SPINS")?this.visible=!1:(e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase("@START_GAME",1500)),d.isNextGame("$BASE")&&e.instance.emit(g.ON_PLAYER_PROMPT_IDLE));var v;r.length>1&&!this._isAutoPlay&&!d.isGame("$FREE_SPINS")&&"$FREE_SPINS"===d.getRaw().next_game&&k.add(function(a){var b=new c(this._juggler);r.forEach(function(a){b.add(function(b){e.instance.emit(o.EVENT_SHOW_WIN,a,!0,this._aperture.getSymbolProfile(a.getSymbolId()),!1),"$FREE_SPINS"!==d.getRaw().next_game&&(this.winSummaryEnd=!0),e.instance.emit(g.ON_PLAYER_PROMPT,a.getDescription(),1500),v=this._juggler.setTimeout(b,this._aperture.getSymbolProfile(a.getSymbolId()).getAnimationDuration()||this._setup.win_display_duration)}.bind(this))}.bind(this)),b.start(a)}.bind(this),!0),k.add(function(a){v&&v.stop(),d.getWinCount()>0&&d.isNextGame("$BASE")&&e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase(" ",500)),a()}),k.add(function(a){e.instance.emit(o.EVENT_WIN_PRESENTATION_END,d),a()}),this._idleCycling&&k.add(function(b){n||(this._isSkip=!0,d.getWinCount()>0&&!1===a.Common.Server.server.stopWinTogglingInPopUp&&"$FREE_SPINS"!==d.getRaw().next_game&&(this.idolCycle(r,d),this._cycleDelay=this._juggler.setInterval(function(){this.idolCycle(r,d)}.bind(this),this._setup.win_cycle_delay))),b()
}.bind(this)),k.start(function(){p(),k.wasSkipped&&this.stopWinDisplay(),j()}.bind(this))},o.prototype.getPaylinePositions=function(a){return this._gameProfile.get().paylines[a-1]},o.prototype.stopWinDisplay=function(){this._aperture.stopSymbolAnimations(),this._cycleDelay&&this._cycleDelay.stop(),this.visible=!1,this._juggler.purge(),this._isSkip=!1},o.prototype.buttonClicked=function(){this.stopWinDisplay()},o.prototype.idolCycle=function(a,b){this.visible=!0;var c=a.shift();"$FREE_SPINS"!==b._response.next_game&&(e.instance.emit(o.EVENT_SHOW_WIN,c,!0,this._aperture.getSymbolProfile(c.getSymbolId()),!0),e.instance.emit(g.ON_PLAYER_PROMPT,c.getDescription(),1500)),a.push(c)},o.EVENT_SHOW_WIN="win_manager_show_win",o.EVENT_SHOW_5AOK="win_manager_show_5OAK",o.EVENT_SHOW_WIN_SUMMARY="win_manager_show_win_summary",o.EVENT_SHOW_WIN_TEXT_ANIMATION="win_manager_show_win_text_animation",o.EVENT_WIN_PRESENTATION_END="win_manager_presentation_complete",o.EVENT_MODIFY_APERTURE_START="win_manager_modifier_start",o.EVENT_MODIFY_APERTURE_START_FOR_STICKY_SYMBOLS="win_manager_modifier_start_sticky_sumbols",o.EVENT_MODIFY_APERTURE_END="win_manager_modifier_end",o.EVENT_MODIFY_APERTURE_START5="win_manager_modifier_start5",o.EVENT_MODIFY_APERTURE_START_AFTER="win_manager_modifier_start2",o.EVENT_MODIFY_APERTURE_START5_AFTER="win_manager_modifier_start52",o.GAME_FINISHED="game_finished",o.EVENT_WIN_PRESENTATION_START="win_manager_display_win",o.EVENT_WIN_MULTIPLIER_CHANGE="win_manager_multiplier_change",o.EVENT_BIG_WIN_START="win_manager_big_win_start",o.EVENT_BIG_WIN_END="win_manager_big_win_end",o.EVENT_FREE_SPINS_END="free_spins_feature_end",o.STOP_SYMBOLS_ANIMATION="stop_symbols_animation",o.bigwin=0,o.megawin=0,o.intialwin=0,o}(PIXI.Container);b.WinManager=n}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Common.Server.ResponseUser,h=a.Common.ApplicationBase,i=a.Common.Server,j=a.Common.GameEvents,k=a.Core.Lang,l=a.Core.SoundManager,m=a.Common.Currency,n=a.Common.Server.ServerTime,o=a.Common.PlayerMonitoring,p=a.Common.Server.ResponseResults,q=a.Common.Server.ResponseAuth,r=a.Slots.SettingsPages.BettingSetup,s=a.Core.Time.Juggler,t=a.Core.Utils.formatTime,u=a.Core.Renderer.SceneManager;c.EVENT_HIDE="panel_hide",c.EVENT_SHOW="panel_show",c.EVENT_SHOW_WIN="panel_show_win",c.EVENT_UPDATE_FEATURE_DISPLAY="panel_update_feature_display",c.EVENT_DISABLE="panel_disable",c.EVENT_NO_TOUCHES="panel_no_touches",c.EVENT_INTERRUPT_SPIN="panel_interrupt_spin",c.EVENT_STOP_SPIN="panel_stop_spin",c.EVENT_AUTO_SPIN="panel_auto_spin",c.EVENT_AUTO_SPIN_STOP="auto_spin_stop",c.EVENT_AUTO_SPINS_START="panel_auto_spins_start",c.EVENT_AUTO_SPINS_END="panel_auto_spins_end",c.EVENT_AUTO_SPINS_ENDS="panel_auto_spins_ends",c.EVENT_QUIT_GAME="panel_quit_game",c.EVENT_SPACE_BAR="panel_space_bar",c.EVENT_RE_SPIN_BUTTON_HIDE="re_spin_button_disable",c.EVENT_SHOW_PROMOTIONAL_INTRO="promotional_intro_show",c.PROMOTIONAL_BUTTON_ENABLE="promotional_button_enable",c.HIDE_PANEL_IN_BROKEN="hide_panel_in_broken",c.SHOW_PANEL_IN_BROKEN="show_panel_in_broken",c.PAYTABLE_SHOW_HIDE_BUTTONPANEL="hide button panel ",c.AUTO_SPINS_BUTTON_ENABLE="auto_spins_button_enable",c.SPIN_BUTTON_ENABLE_AFTER_FREEPLAYS_INTRO="spin_button_enable_after_freeplays_intro";var v=function(d){function v(g,n){var q=d.call(this,g,n)||this;return q._autoSpins=0,q.firstLoad=!0,q._juggler=new s(!0),q._isLeftHanded=1==h.getAppValue("leftHandedMode"),e.coreEvents.on(e.ON_APP_RESIZE,q.onResize,q),q.onResize(),h.instance.on(j.ON_GAME_INITIALIZED,function(){this._$textWin.hide(),this.autoSettingsPanel=new w("cp_auto_settings_panel");var b=a.Common.Server.autoPlayList;this._$autoSpinsSlider=new a.Slots.SettingsPages.SliderWidget("cp_slider_autospin_count",b[0],b[b.length],null,5),this._$autoSpinsSlider.onChange=function(b){h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,b)},setInterval(this.updateTimeDisplay.bind(this),15e3),this.updateTimeDisplay()}.bind(q)),h.instance.on(o.EVENT_ALARM_CASH_LOSS,q.onCashLossAlarm,q),h.instance.on(o.EVENT_ALARM_SINGLE_CASH_WIN,q.onSingleWinAlarm,q),h.instance.on(o.EVENT_ALARM_TOTAL_CASH_WIN,q.onTotalWinAlarm,q),h.instance.on(o.EVENT_ALARM_FEATURE_STOP,q.onFeatureStopAlarm,q),h.instance.on(o.EVENT_ALARM_STOP_ON_ANY_WIN,q.onAnyWinAlarm,q),h.instance.on(o.EVENT_ALARM_REALITY_CHECK,q.onRealityCheck,q),h.instance.on(o.INSUFFICIENT_FUND,q.oninsufficientFund,q),h.instance.on(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,q.paytableShowHidePanel,q),h.instance.on(c.EVENT_HIDE,q.hidePanel,q),h.instance.on(c.EVENT_SHOW,q.showPanel,q),h.instance.on(c.EVENT_UPDATE_FEATURE_DISPLAY,q.onUpdateFeatureDisplay,q),h.instance.on(j.ON_GET_GAME_RESULTS,q.onGetGameResults,q),h.instance.on(j.ON_GET_CLEAR_ALL_SCREEN,q.onGetGameResults,q),h.instance.on(j.ON_RESULTS_READY,q.onResultsReady,q),h.instance.on(b.Aperture.EVENT_REELS_DROPPED,q.onReelsDropped,q),h.instance.on(b.Aperture.EVENT_TEASE_REEL,q.onReelTease,q),h.instance.on(b.WinManager.EVENT_BIG_WIN_START,q.onBigWinStart,q),h.instance.on(b.WinManager.EVENT_BIG_WIN_END,q.onBigWinEnd,q),h.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,q.onWinSummaryEnd,q),h.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,q.onWinSummary,q),h.instance.on(c.EVENT_AUTO_SPIN_STOP,q.stopAutoSpinsukgc,q),h.instance.on(c.EVENT_RE_SPIN_BUTTON_HIDE,q.disable,q),h.instance.on(c.PROMOTIONAL_BUTTON_ENABLE,q.enable,q),h.instance.on(c.HIDE_PANEL_IN_BROKEN,q.hidePanelInBrokenPopUp,q),h.instance.on(c.SHOW_PANEL_IN_BROKEN,q.showPanelInBrokenPopUp,q),h.instance.on(c.AUTO_SPINS_BUTTON_ENABLE,q.enableButtonAutoSpins,q),h.instance.on(c.SPIN_BUTTON_ENABLE_AFTER_FREEPLAYS_INTRO,q.freeplays.bind(q)),h.instance.on(j.ON_PLAYER_PROMPT,q.onPlayerPrompt,q),h.instance.on(j.UPDATE_BALACE,q.updateBalance,q),h.instance.on(j.PUSH_BALANCE,q.pushBalance,q),h.instance.on(j.ON_CONTINUE_GAME,q.onContinueGame,q),h.instance.on(c.EVENT_DISABLE,function(a){a?this.disable():this.enable()}.bind(q)),h.instance.on(c.EVENT_SHOW_WIN,function(a){a?(this._$textWin.text(m.format(a)),this._$textWin.show(),this._$textWin.addClass("win_update_throb")):this._$textWin.fadeOut()}.bind(q)),h.instance.on(c.EVENT_QUIT_GAME,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.lobbyURL);b?"close"===b?window.close():window.open(b,"_parent"):window.close()}),h.instance.on(c.EVENT_NO_TOUCHES,q.onNoTouches,q),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,q.onSettingsClosed,q),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_OPEN,q.onSettingsOpen,q),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_DISPLAY_FORMAT_CHANGE,function(b){this._$textBalance.text(m.format(a.Common.Server.gameBalance)),p.current&&this._$textWin.text(m.format(p.current.getLastCashWin())),this._$textBet.text(m.format(a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))}.bind(q)),h.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_START,function(b){var c=0;b.totalWinCash<3*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()&&(c=500),c=!this.hasValue(b,"_response")&&this._autoSpins?250:2250,setTimeout(function(){this.onDisplayWin(b)}.bind(this),c)}.bind(q)),h.instance.on(j.ON_GAME_CHANGED,q.onGameChanged,q),h.instance.on(j.ON_GAME_READY,q.onGameReady,q),h.instance.on(j.ON_GET_GAME_RESULTS,function(){this.disable()}.bind(q)),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,function(b){var c=this;this._$textWin.text(" "),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase("@START_GAME")),setTimeout(function(){f.isDesktop()&&c._$autoSettingsPanel.hide(),c._$textBet.text(m.format(a.Slots.SettingsPages.BettingSetup.getTotalBetCash())),a.Common.Server.gameBalance&&c._$textBalance.text(m.format(a.Common.Server.gameBalance))},0)}.bind(q)),e.coreEvents.on(l.EVENT_SET_MUTE,function(a){a?(this.soundON=!1,$(document).find("#button_audio").removeClass("audio_on"),$(document).find("#button_audio").addClass("audio_off")):(this.soundON=!0,$(document).find("#button_audio").removeClass("audio_off"),$(document).find("#button_audio").addClass("audio_on"))}.bind(q)),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LEFT_HANDED_MODE,function(a){this._isLeftHanded=a,this.onResize()}.bind(q)),a.Core.Environment.isDesktop()&&$(document).on("keyup",function(b){var d=0;32!=b.keyCode||a.Common.Server.server.isPaytableVisible||(a.Common.Server.server.FreeSpinsEnd&&(d=500),setTimeout(function(){h.instance.emit(c.EVENT_SPACE_BAR),a.Common.Server.server.FreeSpinsEnd=!1},d))}.bind(q)),h.instance.on(c.EVENT_SPACE_BAR,function(){a.Common.Server.spacebarToQuickSpin=!1,!h.getAppValue("spaceToSpin")||void 0!=a.Common.Server.freePlaysStatus&&"COMPLETE"==a.Common.Server.freePlaysStatus||("none"==this._$buttonSpin.css("display")||this._$buttonSpin.hasClass("disabled")?"none"==this._$buttonStopSpin.css("display")||this._$buttonStopSpin.hasClass("disabled")||(h.instance.emit(c.EVENT_INTERRUPT_SPIN),this._$buttonStopSpin.hide()):this.onButtonSpin())}.bind(q)),h.instance.on(i.RESPONSE_OPEN,q.onOpenResponse,q),h.instance.on(i.RESPONSE_USER,q.onUserResponse,q),h.instance.on(i.RESPONSE_AUTH,function(a){return $("#info_bar .game_title").text(k.getPhrase("game_title"))}),$(document).on("click",".show-bet",function(a){q.onSelectedBetDisplay(a.target.id)}),$(document).on("click","#fullScreen",function(a){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}),$(document).on("click","#menu_mobile",function(b){var d=document.getElementById("green-base");"hidden"==d.style.visibility||""==d.style.visibility?("iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),d.style.visibility="visible",h.instance.emit(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,q.paytableShowHidePanel("visible"))):(d.style.visibility="hidden",h.instance.emit(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,q.paytableShowHidePanel("hidden")))}),$(document).on("click","#gen_setting",function(){a.Common.Server.server.isPaytableVisible=!0,$("#bet_wrapper").addClass("disabled"),a.Common.Server.server.previousID,$("#settings_general").trigger("click"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,"settings_general"===a.Common.Server.server.previousID),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,"settings_general"!==a.Common.Server.server.previousID),$("#settings_general").hide(),$("#settings_pays").hide(),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase(" ")),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings")}),$(document).on("click","#button_help",function(b){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.server.isPaytableVisible=!0,a.Core.HTML.getPageManager("MAIN").showOverlay("settings"),$("#settings_rules").trigger("click"),$(document).find("#button_help").addClass("disabled"),$("#bet_wrapper").addClass("disabled"),q._$buttonSpin.addClass("disabled_settings_item"),q._$buttonSpin.css("pointer-events","none"),q._$buttonAuto.addClass("disabled_settings_item"),q._$maxBetButton.addClass("disabled"),$("#button_settings").addClass("disabled_settings_item"),$("#settings_rules").show(),$("#settings_general").hide(),$("#settings_pays").hide(),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL)}),$(document).on("click","#maxBet",function(a){q.onSelectedBetDisplay(13)}),$(document).on("click","#confirmBet",function(){var b=Number($(".current-bet")[0].id)+1;a.Common.Server.betLevel=b,a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{coinLevel:a.Common.Server.betLevel,betLevel:1}),$(".close-bet").css("pointer-events","all"),$("#confirmBet").addClass("selectedConfirmButton")}),$.getJSON("./package.json?v=1.0.7",function(a){$("#info_bar .version").text("V "+a.version)}),q._$buttonSettings=$("#menu_mobile"),q._$settingPanel=$("#green-base"),q._$paytableButton=$("#button_settings"),q.$_displayBetPanel=$(".bet_mobile"),q._$removeBetPanel=$(".close-bet"),q.$_betPanelMobile=$("#mobileBetPanel"),q._$buttonNext=$(q._$div.find(".button_next")),q._$buttonPrev=$(q._$div.find(".button_prev")),$(document).on("click","#button_home",function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),window.vex.dialog.buttons.YES.text=k.getPhrase("yes"),window.vex.dialog.buttons.NO.text=k.getPhrase("no"),window.vex.dialog.confirm({message:k.getPhrase("confirm_exit"),callback:function(a){a&&h.instance.emit(c.EVENT_QUIT_GAME)}})}),q._$paytableButton.on("click",q.onButtonSettings.bind(q)),q._$removeBetPanel.on("click",q.removeBet.bind(q)),q.$_displayBetPanel.on("click",q.onBetDisplay.bind(q)),q._$buttonSpin=$("#button_spin"),q._$betMobile=$("#dot"),q._$buttonSpin.on("click",q.onButtonSpin.bind(q)),q._$buttonbet=$("#settings_bets1"),q._$buttonbet.on("click",q.onButtonBet.bind(q)),q._$btnautoplayouter=$("#Autoplay_btn"),q._$btnautoplayouter.on("click",q.onAutoplay.bind(q)),q._$gameWrapper=$("#game_wrapper"),q._$footer=$("#footer"),q._$info_bar=$("#info_bar"),f.isDesktop()&&q._$gameWrapper.append($("#control_panel")),q._$buttonStopAutoSpin=$("#button_stop_autospin"),q._$buttonStopAutoSpin.on("click",function(){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),this.spinResponse.getState().featureName.match("SANTA")||this.spinResponse.getState().featureName.match("PUMPKIN")||h.instance.emit(c.EVENT_INTERRUPT_SPIN),this.onPlayerPrompt(k.getPhrase("START_GAME")),this.stopAutoSpins()}.bind(q)),q._$buttonStopSpin=$("#button_stop_spin"),q._$buttonStopSpin.on("click",function(){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),h.instance.emit(c.EVENT_INTERRUPT_SPIN),this._autoSpins?this._$buttonStopSpin.addClass("disabled"):this._$buttonStopSpin.hide()}.bind(q)),q._$buttonWrapper=$("#main_button_wrapper"),q._$betbtnWrapper=$("#bet_button_wrapper"),q._$autoWrapper=$("#Autoplay_button_wrapper"),q._$featurePanel=$("#feature_panel"),q._$panelBackground=$("#panel_background"),q._$panelBackground2=$("#panel_background2"),q._$panelBgShape=$("#panel_bg_shape"),$(document).on("click","#button_audio",function(){e.coreEvents.emit(l.EVENT_SET_MUTE,!l.globalSounds.isMuted),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK")}),q._$buttonAuto=$("#button_auto_cp"),q._$buttonAuto.on("click",function(){this._$textWin.text(" "),a.Common.Server._autoSpinsInfinite=!1,h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),l.globalSounds.isMuted||l.globalSounds.playCue("AUTOPLAY_CLICK"),"none"==this._$autoSettingsPanel.css("display")?(this.closeAllPanels(),this.autoSettingsPanel.reset(),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),this._$autoSettingsPanel.show(),this._$paytableButton.addClass("disabled"),this._$buttonSpin.addClass("disabled"),this._$buttonBetSettings.addClass("disabled"),this._$buttonSpin.css("pointer-events","none")):(this.closeAllPanels(),this._$paytableButton.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$buttonBetSettings.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"))}.bind(q)),q._$buttonCPStepperTotalBet=$("#cp_stepper_total_bet"),q._$buttonBetSettings=$("#cp_bet_settings"),q._$buttonBetSettings.on("click",function(){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),"none"==this._$betSettingsPanel.css("display")?(this.closeAllPanels(),this._$betSettingsPanel.show(),this._$buttonBetSettings.addClass("contract_icon"),this.showBet(),this._$paytableButton.addClass("disabled"),this._$buttonAuto.addClass("disabled"),this._$buttonSpin.addClass("disabled")):(this._$buttonBetSettings.removeClass("contract_icon"),this.closeAllPanels(),this._$paytableButton.removeClass("disabled"),this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"))}.bind(q)),q._$maxBetButton=$("#cp_max_bet"),q._$maxBetButton.on("click",function(){var b=a.Slots.SettingsPages.BettingSetup.coinValues.length,c=a.Slots.SettingsPages.BettingSetup.getMaxBetLevel();a.Slots.SettingsPages.BettingSetup.currentCoinLevel=b,a.Slots.SettingsPages.BettingSetup.currentBetLevel=c,h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{coinLevel:b,betLevel:c})}),h.instance.on(a.Common.Server.OperatorEvents.SET_BETTING_PARAMS,function(){return new a.Slots.SettingsPages.StepperTotalBet("cp_stepper_total_bet")}),q._$betSettingsPanel=$("#cp_bet_settings_panel"),q._$autoSettingsPanel=$("#cp_auto_settings_panel"),q._$spinBackground=$("#spin_background"),q._$featureSpinsWrapper=$("#feature_spins_wrapper"),q._$scatterWrapper=$("#scatter_wrapper"),q._$extraSpinWrapper=$("#extraSpin_wrapper"),q._$freeSpinWrapper=$("#freespin_wrapper"),q._$betWrapper=$("#bet_wrapper"),q._$balanceWrapper=$("#balance_wrapper"),q._$uiButtons=$("#ui_buttons"),q._$textBalance=$("#cp_balance"),q._$textWin=$("#cp_win"),q._$textBet=$("#cp_bet"),q._$textAutoSpins=$("#cp_autocount_label"),q._$featureSpins=$("#cp_feature_spins"),q._$extraSpin=$("#extraSpin_collect"),q._$fscollect=$("#freespin_collect"),q._$featureWin=$("#cp_feature_win"),q.onNoTouches(!0),q}return __extends(v,d),v.prototype.onResultsReady=function(a,b){this._currentGame=a,this.spinResponse=b,(!a.isBaseGame()||this._autoSpins&&!f.isDesktop()||this.spinResponse.getState().featureName.match("SANTA")||this.spinResponse.getState().featureName.match("PUMPKIN"))&&(this._autoSpins&&f.isDesktop()&&(this.spinResponse.getState().featureName.match("SANTA")||this.spinResponse.getState().featureName.match("PUMPKIN"))?this._$buttonStopSpin.addClass("disabled"):this._autoSpins&&f.isMobile()&&(this.spinResponse.getState().featureName.match("SANTA")||this.spinResponse.getState().featureName.match("PUMPKIN"))?this._$buttonStopSpin.addClass("disabled"):(this._$buttonStopSpin.fadeOut(),this._$betMobile.fadeOut()))},v.prototype.onBigWinStart=function(){},v.prototype.onWinSummary=function(){},v.prototype.onWinSummaryEnd=function(){p.current.getNextGameId()},v.prototype.onBigWinEnd=function(){this.disable(),this._$buttonWrapper.hide()},v.prototype.showBet=function(){if(0==$(".show-bet").length){for(var b="",c=a.Common.Server.betPanelValue,d=a.Common.Server.betLevel-1,e=0;e<c.length;e++)b+='<div class="show-bet" id ="'+e+'">'+m.format(c[e])+"</div>";var g="<div class ='bet-frame'>"+b+"</div>";if(f.isDesktop())$("#cp_bet_settings_panel").append(g);else{document.getElementById("tb-total").insertAdjacentHTML("afterend",g),$("#betPanelValue").append($("#"+d)[0].innerText)}$("#"+d).addClass("current-bet")}},v.prototype.onReelTease=function(){this._$buttonStopSpin.hide()},v.prototype.onGetGameResults=function(){this._$textWin.fadeOut(),this.closeAllPanels()},v.prototype.closeAllPanels=function(){this._$betSettingsPanel.hide(),this._$autoSettingsPanel.hide(),this._$buttonBetSettings.removeClass("contract_icon")},v.prototype.onUpdateFeatureDisplay=function(a){"NONE"==a.label?($("#feature_spins_wrapper").hide(),$("#cp_feature_win").hide()):($("#feature_spins_wrapper").show(),$("#cp_feature_win").show(),a.label&&(this._$featureSpinsWrapper.find(".meter_title").text(a.label),this._$scatterWrapper.find(".meter_title").text(a.label),this._$extraSpinWrapper.find(".meter_title").text(a.label),this._$freeSpinWrapper.find(".meter_title").text(a.label))),(a.spins||0==a.spins)&&(this._$featureSpins.text(a.spins),this._$fscollect.text(a.spins)),(a.extraSpin||0==a.extraSpin)&&this._$extraSpin.text(a.extraSpin),(a.win||0==a.win)&&this._$featureWin.text(m.format(a.win))},v.prototype.onNoTouches=function(a,b){a?(this._$div.css("pointer-events","none"),this.disable(),$(document).find("#button_audio").css("pointer-events","all")):(this._$div.css("pointer-events","all"),this.enable())},v.prototype.onGameReady=function(a,b){a.isBaseGame()&&(this._$featureSpins.text(""),this._$extraSpin.text(""),this._$fscollect.text(""),this._$featureWin.text(""))},v.prototype.onGameChanged=function(a,b){this.onResize(),a.isBaseGame()||a.isRespin()?(this._$footer.hide(),this.enable(),this._$featurePanel.fadeOut(),this._$buttonWrapper.fadeIn(),this._$betWrapper.fadeIn(),this._$info_bar.removeClass("bright"),f.isDesktop()&&(this._$balanceWrapper.css("right",""),this._$panelBackground.show(),this._autoSpins?(this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$textAutoSpins.show(),this._$panelBgShape.css("width","104%")):(this._$buttonAuto.fadeIn(),this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$panelBgShape.css("width","100%")))):(this._$textWin.text(" "),this._$textWin.hide(),this._$footer.show(),this._$buttonAuto.fadeOut(),this._$buttonAuto.hide(),this.onNoTouches(!0),this._$featurePanel.fadeIn(),this._$featureSpinsWrapper.fadeIn(),this._$scatterWrapper.fadeIn(),this._$extraSpinWrapper.fadeIn(),this._$freeSpinWrapper.fadeIn(),this._$info_bar.addClass("bright"),f.isDesktop()?(this._$buttonSpin.hide(),this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$featureSpinsWrapper.hide(),this._$panelBgShape.css("width","100%")):(this._$buttonSpin.fadeOut(),this._$betbtnWrapper.hide(),this._$autoWrapper.hide())),e.coreEvents.emit(l.EVENT_SET_MUTE,l.globalSounds.isMuted)},v.prototype.onReelsDropped=function(a){this._autoSpins>1?this._$buttonStopSpin.addClass("disabled"):this._$buttonStopSpin.hide()},v.prototype.onSettingsOpen=function(a){f.isDesktop()&&(this._$info_bar.addClass("bright"),$("div#settings").prepend($("#control_panel")),this._$autoSettingsPanel.hide(),this.onResize())},v.prototype.onSettingsClosed=function(b){this.showPanel(),f.isDesktop()?($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),!1===a.Common.Server.promotionalFreePlaysBoolean&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$info_bar.removeClass("bright"),$("div#game_wrapper").append($("#control_panel")),this.onResize()):($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),!1===a.Common.Server.promotionalFreePlaysBoolean&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),a.Common.Server._autoSpinsInfinite?this._$textAutoSpins.text("∞"):this._$textAutoSpins.text(b.autoSpins.toString()),this._$textAutoSpins.show()),this._autoSpins=b.autoSpins,this._autoSpins?(h.instance.emit(c.EVENT_AUTO_SPINS_START),this.onButtonSpin()):this._$textAutoSpins.hide()},v.prototype.onContinueGame=function(b,d){b.isBaseGame()&&(a.Common.Server._autoSpinsInfinite?(h.instance.emit(c.EVENT_AUTO_SPIN,this._autoSpins),this.onButtonSpin(),this.onPlayerPrompt(k.getPhrase("n_autospins_remaining",{spins:this._autoSpins})),this._$textAutoSpins.text("∞")):this._autoSpins>0&&!a.Common.Server.server._autoSpinsPaused?--this._autoSpins?(this._$textAutoSpins.text(this._autoSpins),setTimeout(function(){h.instance.emit(c.EVENT_AUTO_SPIN,this._autoSpins),0!=this._autoSpins&&a.Core.Time.juggler.setTimeout(function(){this.onButtonSpin()}.bind(this),100),this.onPlayerPrompt(k.getPhrase("n_autospins_remaining",{spins:this._autoSpins})),0==this._autoSpins&&(this.enable(),this._$buttonSpin.css("pointer-events","all"),this._$buttonSpin.fadeIn(),this.stopAutoSpins(),this._$buttonStopSpin.removeClass("disabled"),h.instance.emit(c.EVENT_AUTO_SPINS_END))}.bind(this),750)):(a.Common.Server.isAutoPlay=!1,this._$buttonSpin.fadeIn(),this.stopAutoSpins(),b.isBaseGame()&&this.enable(),this._$buttonSpin.css("pointer-events","all"),h.instance.emit(c.EVENT_AUTO_SPINS_END)):(this._$buttonStopSpin.hide(),this.enable(),this._$buttonSpin.css("pointer-events","all")))},v.prototype.stopAutoSpinsukgc=function(){this.stopAutoSpins()},v.prototype.stopAutoSpins=function(){h.instance.emit(c.EVENT_AUTO_SPINS_END),this._autoSpins=0,o.reset(),this._$textAutoSpins.hide(),this._$buttonStopAutoSpin.hide(),o.reset(),a.Common.Server._autoSpinsInfinite=!1,f.isDesktop()&&(this._$buttonStopSpin.hide(),this._$buttonAuto.show(),this._$buttonAuto.removeClass("disabled"),this._$buttonStopAutoSpin.hide(),this._$panelBgShape.css("width","100%"))},v.prototype.onButtonSpin=function(a){l.globalSounds.stopCue("WIN_COUNT"),this.closeAllPanels(),this._$textWin.fadeOut(),this._juggler.purge(),this._autoSpins||o.reset(),this._$buttonSpin.css("pointer-events","none"),f.isMobile()?setTimeout(this.startSpin.bind(this),250):this.startSpin()},v.prototype.onButtonBet=function(b){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_EVENT_OUTER)},v.prototype.onAutoplay=function(b){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),this._$textWin.text(" "),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTOPLAY_EVENT_OUTER)},v.prototype.startSpin=function(){g.current&&(a.Common.Server.gameBalance>=r.getTotalBetCash()||a.Common.Server.promotionalfreeplaysreelholidays?h.instance.emit(j.ON_GET_GAME_RESULTS):h.instance.emit(o.INSUFFICIENT_FUND)),this._autoSpins?(a.Common.Server._autoSpinsInfinite?this._$textAutoSpins.text("∞"):this._$textAutoSpins.text(this._autoSpins-1),this._$textAutoSpins.show(),f.isDesktop()?(this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$panelBgShape.css("width","104%")):this._$buttonStopAutoSpin.fadeIn(),a.Common.Server.isAutoPlay=!0):(f.isDesktop()?(this._$buttonAuto.show(),this._$buttonStopAutoSpin.hide(),this._$panelBgShape.css("width","100%")):this._$buttonStopAutoSpin.fadeOut(),a.Common.Server.isAutoPlay=!1)},v.prototype.updateBalance=function(a){this._$textBalance.text(m.format(100*a.toFixed(2)))},v.prototype.pushBalance=function(a){var b=100*(Number(a.data.balance)+Number(a.data.free_balance));this._$textBalance.text(m.format(b))},v.prototype.updateTimeDisplay=function(){var a=n.getFormattedTime(),b=$(this._$div).find(".local_time");if(f.isMobile()&&f.isLandscape()){q.current,k.getPhrase("game_title");b.html('<span id="local-time-land">'+a+"</span>")}else b.text(a)},v.prototype.onButtonSettings=function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),f.isDesktop()?(a.Common.Server.server.isPaytableVisible=!0,$("#bet_wrapper").addClass("disabled"),this._$paytableButton.addClass("disabled"),a.Common.Server.server.previousID,$("#settings_general").trigger("click"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,"settings_general"===a.Common.Server.server.previousID),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,"settings_general"!==a.Common.Server.server.previousID),$("#settings_pays").show(),$(document).find("#button_help").addClass("disabled"),this._$maxBetButton.addClass("disabled"),this._$buttonAuto.addClass("disabled"),this._$buttonSpin.addClass("disabled"),this._$buttonSettings.addClass("disabled"),this._$buttonSpin.css("pointer-events","none"),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase(" ")),this._$textWin.text(" "),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings")):(a.Common.Server.server.previousID,$("#settings_pays").trigger("click"),$("#settings_pays").hide(),$("#settings_general").hide(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,"settings_pays"===a.Common.Server.server.previousID),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,"settings_pays"!==a.Common.Server.server.previousID),this._$buttonSpin.css("pointer-events","none"),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase(" ")),this._$textWin.text(" "),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"))},v.prototype.onBetDisplay=function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),h.instance.emit(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,this.paytableShowHidePanel("visible")),$("#menu_mobile").addClass("disabled"),$("#mobileBetPanel").css("visibility","visible"),$("#confirmBet").css("pointer-events","none"),this.showBet()},v.prototype.onSelectedBetDisplay=function(b){var c=$(".current-bet")[0].id;$("#"+c).removeClass("current-bet"),$("#"+b).addClass("current-bet"),f.isDesktop()?(a.Common.Server.betLevel=Number(b)+1,a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{coinLevel:a.Common.Server.betLevel,betLevel:1})):($(".close-bet").css("pointer-events","none"),$("#confirmBet").css("pointer-events","all"),$("#confirmBet").removeClass("selectedConfirmButton"),$("#betPanelValue").empty(),$("#betPanelValue").append($("#"+b)[0].innerText))},v.prototype.removeBet=function(){h.instance.emit(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,this.paytableShowHidePanel("hidden")),$("#mobileBetPanel").css("visibility","hidden"),$("#menu_mobile").removeClass("disabled")},v.prototype.onDisplayWin=function(a){var b=1;if(!this.hasValue(a,"_response")&&this._autoSpins&&(b=.25),a.totalWinCash){this._$textWin.text(""),this._$textWin.show(),this._$textWin.addClass("win_update_throb");var c={win:0};TweenLite.to(c,b,{win:a.totalWinCash,onUpdate:function(){this._$textWin.text(m.format(c.win))}.bind(this),onComplete:function(){this._$textWin.removeClass("win_update_throb")}.bind(this)})}},v.prototype.hasValue=function(a,b){return a.hasOwnProperty(b)},v.prototype.onPlayerPrompt=function(a,b){var c=$(this._$div).find(".prompt");c.html(a),c.show()},v.prototype.disable=function(){this._$buttonSettings.addClass("disabled"),$(document).find("#button_help").addClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonPrev.addClass("disabled"),$(document).find("#button_home").addClass("disabled"),this._$buttonAuto.addClass("disabled"),this._$buttonSpin.addClass("disabled"),this._$buttonSpin.css("pointer-events","none"),this._$buttonBetSettings.addClass("disabled"),this._$buttonCPStepperTotalBet.addClass("disabled"),this._$btnautoplayouter.addClass("disabled"),this._$paytableButton.addClass("disabled")},v.prototype.freeplays=function(){this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all")},v.prototype.enableButtonAutoSpins=function(){$("#main_button_wrapper").show(),this._$buttonAuto.removeClass("disabled")},v.prototype.enable=function(b){a.Common.Server.promotionalfreeplaysreelholidays||a.Common.Server.freePlaysAfterFreespin&&void 0!==a.Common.Server.freePlaysAfterFreespin?a.Common.Server.freePlaysAfterFreespin&&this.freeplays():(f.isMobile()&&this._$btnautoplayouter.removeClass("disabled"),this._$buttonCPStepperTotalBet.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonBetSettings.removeClass("disabled"),this._$buttonSpin.fadeIn(),this._$paytableButton.removeClass("disabled"),
this._$buttonSettings.removeClass("disabled"),$(document).find("#button_help").removeClass("disabled"),$(document).find("#button_home").removeClass("disabled"),a.Slots.SettingsPages.BettingSetup.currentCoinLevel===a.Slots.SettingsPages.BettingSetup.coinValues.length?(this._$buttonPrev.removeClass("disabled"),this._$buttonNext.addClass("disabled")):100*a.Slots.SettingsPages.BettingSetup.currentCoinLevel===a.Slots.SettingsPages.BettingSetup.coinValues[0]?(this._$buttonPrev.addClass("disabled"),this._$buttonNext.removeClass("disabled")):(this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled")),a.Common.Server.freespinsContinue||a.Common.Server.isAutoPlay||(this._$buttonAuto.removeClass("disabled"),this._$btnautoplayouter.removeClass("disabled"),this._$buttonCPStepperTotalBet.removeClass("disabled")))},v.prototype.hidePanelInBrokenPopUp=function(){this._$panelBackground.hide()},v.prototype.showPanelInBrokenPopUp=function(){this._$panelBackground.show()},v.prototype.hidePanel=function(){this._$div.hide()},v.prototype.showPanel=function(){this._$div.fadeIn()},v.prototype.onAnyWinAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_any_win")),this.stopAutoSpins()},v.prototype.onFeatureStopAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_feature_stop")),this.stopAutoSpins(),f.isDesktop&&this._$buttonAuto.hide()},v.prototype.onSingleWinAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_single_win")),this.stopAutoSpins()},v.prototype.onTotalWinAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_total_win")),this.stopAutoSpins()},v.prototype.onCashLossAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_loss")),this.stopAutoSpins()},v.prototype.onRealityCheck=function(b){var c=this;a.Common.Server.server._autoSpinsPaused=!0,window.vex.dialog.buttons.YES.text=k.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=k.getPhrase("quit"),window.vex.dialog.confirm({message:k.getPhrase("reality_check_msg",{minutes:t(b)}),callback:function(b){b?a.Common.Server.server._autoSpinsPaused&&(a.Common.Server.server._autoSpinsPaused=!1,c.onContinueGame(c._currentGame,!1)):f.exit()}})},v.prototype.paytableShowHidePanel=function(a){"visible"==a?(this._$buttonWrapper.hide(),this._$betbtnWrapper.hide(),this._$autoWrapper.hide()):"hidden"==a?(this._$buttonWrapper.show(),this._$betbtnWrapper.show(),this._$autoWrapper.show()):"close"==a&&(this._$buttonWrapper.show(),this._$betbtnWrapper.show(),this._$autoWrapper.show(),f.isDesktop()||(document.getElementById("green-base").style.visibility="hidden"))},v.prototype.oninsufficientFund=function(){var b=this;window.vex.dialog.buttons.YES.text=k.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=k.getPhrase("quit"),this.stopAutoSpins(),this._$buttonStopSpin.hide(),window.vex.dialog.confirm({message:k.getPhrase("err_insufficient_funds"),callback:function(c){if(1==c){var d=(new Date).getTime();e.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,null,d),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase("click_spin_to_start")),h.instance.emit(j.ON_PLAYER_PROMPT_WIN,""),b._$buttonStopSpin.hide(),b.enable()}else f.exit()}})},v.prototype.onResize=function(){if(this._$gameWrapper)if(this.updateTimeDisplay(),f.isDesktop()||(f.isLandscape()?this._$gameWrapper.append($("#control_panel")):$("body").append($("#control_panel"))),this._$div=$("#control_panel"),f.isMobile()&&this._$spinBackground)f.isPortrait()?(this._$panelBackground.css("top",this._$gameWrapper.height()),this._$panelBackground.css("width",this._$gameWrapper.width()),this._$spinBackground.css("top",this._$panelBackground.position().top),this._$spinBackground.css("height",this._$footer.position().top-this._$spinBackground.position().top+65+"px"),this._$buttonWrapper.css("left",this._$spinBackground.width()/1.83+"px"),this._$buttonWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/2+10+"px"),this._$betbtnWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this._$autoWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this._isLeftHanded&&(this._$betbtnWrapper.css("left",""),this._$autoWrapper.css("left","72.1%")),this.$_betPanelMobile.css("height",document.documentElement.offsetHeight/2+"px").css("left","0px").css("top","auto").css("width","100%"),this._$settingPanel.css("height",document.documentElement.offsetHeight/4+"px").css("width","100%").css("top","auto").css("left","0"),this._$footer.append(this._$uiButtons)):(this._$panelBackground.css("bottom",""),this._$panelBackground.css("top",0),this._$buttonSettings.css("bottom",""),this._$panelBackground.css("width",this._$gameWrapper.width()),this._$panelBackground.append(this._$uiButtons),this._$buttonWrapper.css("top","57.5%"),this._$betbtnWrapper.css("top","38%"),this._$autoWrapper.css("top","79%"),this._isLeftHanded?(this._$buttonWrapper.css("right",""),this._$buttonWrapper.css("left","6%"),this._$betbtnWrapper.css("right",""),this._$betbtnWrapper.css("left","5%"),this._$autoWrapper.css("right",""),this._$autoWrapper.css("left","5.1%")):(this._$buttonWrapper.css("left","90%"),this._$buttonWrapper.css("right",""),this._$betbtnWrapper.css("left",""),this._$autoWrapper.css("left",""),this._$autoWrapper.css("right","")),this.$_betPanelMobile.css("height",document.documentElement.offsetHeight/2+100+"px").css("top",(document.documentElement.offsetHeight-this.$_betPanelMobile.height())/2+"px").css("width","50%").css("left",(document.documentElement.offsetWidth-this.$_betPanelMobile.width())/2+"px"),this._$settingPanel.css("width",document.documentElement.offsetWidth/1.5+"px").css("height",document.documentElement.offsetHeight/2+"px").css("top",document.documentElement.offsetHeight/4+"px").css("left",(document.documentElement.offsetWidth-this._$settingPanel.width())/2+"px"));else if(f.isDesktop()){var b=this._$gameWrapper.height()/720,c={transform:"scale("+b+")","transform-origin":"top left",width:"1280px",height:"720px"};a.Slots.SettingsPages.SliderWidget.scaleFactor=b;var d=$("div#settings");d&&"block"==d.css("display")?(this._$div.attr("style",""),this._$div.css({width:c.width,height:c.height}),d.css(__assign({},this._$gameWrapper.css(["height","width","margin-left","position","left","top","margin-top"]),c))):this._$div.css(c)}},v.prototype.onUserResponse=function(b,c){b.getBalance();(!u.getCurrentScene()||"$BASE"===u.getCurrentScene().getSceneProfile().id)&&this._$textBalance.text(m.format(a.Common.Server.gameBalance))},v.prototype.onOpenResponse=function(b,c){void 0===c&&(c="$BASE"),"$BASE"===b.getGameId()&&void 0!=g.current&&this._$textBalance.text(m.format(a.Common.Server.gameBalance))},v.isCheck=!1,v}(d);c.ControlPanel_HTML5=v;var w=function(){function b(c){var d=this;this.AUTO_SPIN_VALUES=[],this._state=x.COLLAPSED,this.changeAutoPlayButtonState=function(b){d._spinMultiselect.value()>0&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):!(d._spinMultiselect.value()+"").localeCompare("∞")&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):d._spinMultiselect.value()&&!a.Common.Server.UKGC?(d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):d._$startButton.addClass("disabled"),d._noOfAutoPlaySpin=d._spinMultiselect.value().toString()},this.updateToggleButton=function(a){if(f.isDesktop()){var b=d._$toggleContainer.html(),c=k.getPhrase(d.isChecked?"settings_autoplay_advanced":"settings_autoplay_basic"),e=k.getPhrase(d.isChecked?"settings_autoplay_basic":"settings_autoplay_advanced");d._$toggleContainer.html(b.replace(e,c)+(a?c:"")),d.isChecked?$("#cp_auto_toggle_button").removeClass("down"):$("#cp_auto_toggle_button").addClass("down")}},this._$div=$(c),this.AUTO_SPIN_VALUES=a.Common.Server.autoPlayList,a.Common.Server._autoSpinsInfinite=!1,this._$singleWinLimit=$("#cp_auto_single_win_limit"),this._$totalWinLimit=$("#cp_auto_total_win_limit"),this._$lossLimit=$("#cp_auto_loss_limit"),this._$stopOnFeatureWin=$("#cp_auto_stop_on_feature_win"),this._$stopOnAnyWin=$("#cp_auto_stop_on_any_win"),this._$startButton=$("#cp_auto_start_button"),this._$toggleContainer=$(".cp_auto_toggle_container"),this._$advancedInputs=$("#cp_auto_advanced");var e=a.Common.Server.UKGC;e&&(this._state=x.EXPANDED,this.updateToggleButton(!0)),this._state==x.COLLAPSED?(this._$advancedInputs.css("height","0"),$("#cp_auto_toggle_button").addClass("down")):this._$toggleContainer.on("click",function(a){a.stopImmediatePropagation(),a.preventDefault(),d._state=d.isChecked?x.EXPANDED:x.COLLAPSED,d._$advancedInputs.css("height",d.isChecked?"0":""),d.updateToggleButton()}),this._$singleWinLimit.attr("placeholder","0"),this._$totalWinLimit.attr("placeholder","0"),this._$lossLimit.attr("placeholder","0"),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,this.changeAutoPlayButtonState,this),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,this.changeAutoPlayButtonState,this),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,this.changeAutoPlayButtonState,this),this._singleWinLimit=new z(this._$singleWinLimit,function(b){d.changeAutoPlayButtonState(),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,b)}),this._totalWinLimit=new z(this._$totalWinLimit,function(b){d.changeAutoPlayButtonState(),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,b)}),this._lossLimit=new z(this._$lossLimit,function(c){b._lossLimitValue=isNaN(c)?0:c,(Number(d._noOfAutoPlaySpin)>0||"∞"==d._noOfAutoPlaySpin)&&(c>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$lossLimit.removeClass("flash-item"),d.changeAutoPlayButtonState(),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,c),d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):isNaN(c)||c<a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.addClass("disabled"),d._$lossLimit.addClass("flash-item")):d._$lossLimit.addClass("flash-item"))}),this._spinMultiselect=new y($("#spin_count_chooser"),this.AUTO_SPIN_VALUES,function(b){b>0?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):"∞"==b?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):d._$startButton.addClass("disabled"),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,a.Common.Server.server.isCheck),(d._spinMultiselect.value()+"").localeCompare("∞")||(a.Common.Server._autoSpinsInfinite=!0)}),this._$stopOnAnyWin.on("click",function(b){var c=this.checked;a.Common.Server.server.isCheck=c,o.setWinStop(c),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,c)}),this._$startButton.on("click",function(b){return h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,{autoSpins:d._spinMultiselect.value()})})}return Object.defineProperty(b.prototype,"isChecked",{get:function(){return this._state==x.COLLAPSED},enumerable:!0,configurable:!0}),b.prototype.reset=function(){this._$lossLimit.removeClass("flash-item"),this._spinMultiselect.reset(),this._lossLimit.reset(),this._singleWinLimit.reset(),this._totalWinLimit.reset(),this._$stopOnAnyWin.attr("checked",!1),this._$stopOnFeatureWin.attr("checked",!1),a.Common.Server.server.isCheck=!1},b}();c.AutoSettingsPanel=w;var x;!function(a){a[a.COLLAPSED=0]="COLLAPSED",a[a.EXPANDED=1]="EXPANDED"}(x=c.AutoSettingsPanelState||(c.AutoSettingsPanelState={}));var y=function(){function a(a,b,c){void 0===c&&(c=null);var d=this;this._$div=a,this._values=b,this._changeHandler=c,this._idx=0,this._maxIdx=0,this._selectedIdx=-1,this._$prevBtn=a.find(".button_arrow.left"),this._$nextBtn=a.find(".button_arrow.right"),this._$items=a.find(".multiselect-items .panel_icon").toArray().map(function(a){return $(a)}),this._maxIdx=Math.floor((this._values.length-1)/this._$items.length),this._$prevBtn.on("click",function(a){l.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx-1)}),this._$nextBtn.on("click",function(a){l.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx+1)});var e=this;a.find(".multiselect-items .panel_icon").on("click",function(a){l.globalSounds.playCue("GENERIC_CLICK"),e._selectedIdx=e.getIdx(e._idx,$(this).index()),e.updateItems(),c&&c(e._values[e._selectedIdx])}),this.updatePage(this._idx)}return a.prototype.value=function(){return this._selectedIdx>-1?this._values[this._selectedIdx]:0},a.prototype.reset=function(){this._selectedIdx=-1,this.updatePage(0),this._changeHandler&&this._changeHandler(0)},a.prototype.updatePage=function(a){this._idx=Math.max(Math.min(a,this._maxIdx),0),this.updateButtons(),this.updateItems()},a.prototype.updateButtons=function(){0==this._idx?this._$prevBtn.addClass("disabled"):this._$prevBtn.removeClass("disabled"),this._idx==this._maxIdx?this._$nextBtn.addClass("disabled"):this._$nextBtn.removeClass("disabled")},a.prototype.updateItems=function(){var a=this;this._$items.forEach(function(b,c){var d=a.getIdx(a._idx,c),e=a._values[d],f=d==a._selectedIdx;f?b.addClass("selected"):b.removeClass("selected"),b.val(e),b.find("span").text(""+e),b.find("radio").prop("checked",f)})},a.prototype.getIdx=function(a,b){return Math.max(Math.min(a*this._$items.length,this._values.length-this._$items.length),0)+b},a.prototype.getValue=function(a,b){return this._values[this.getIdx(a,b)]},a}();c.Multiselect=y;var z=function(){function a(a,b){void 0===b&&(b=null);var c=this;this._$div=a,this._changeHandler=b,this._$div.keydown(function(a){if(-1!==$.inArray(a.keyCode,[46,8,9,27,13,110,190])||65==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||67==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||88==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||a.keyCode>=35&&a.keyCode<=39){if(190==a.keyCode){var b=c._$div.val()+".",d=b.indexOf(".");if(0==d||d!=b.lastIndexOf("."))return a.preventDefault(),!1}return void c.callChangeHandler()}if((a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))return a.preventDefault(),!1;var b=c._$div.val(),d=b.indexOf(".");if(-1!=d&&b.length-d>2)return a.preventDefault(),!1;c.callChangeHandler()})}return a.prototype.reset=function(){this._changeHandler&&this._changeHandler(0),this._$div.val("")},a.prototype.callChangeHandler=function(){var a=this;setTimeout(function(){if(a._changeHandler){var b=parseFloat(a._$div.val());a._changeHandler(isNaN(b)?0:b)}},1)},a}();c.MoneyInput=z}(b.ControlPanel||(b.ControlPanel={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){var b=a.Core.HTML,c=a.Core.Renderer.SceneManager,d=a.Common.Server,e=a.Common.GameProfile,f=a.Core.AssetManager,g=a.Common.Server.ResponseAlert,h=a.Core.Utils,i=a.Core.Environment,j=a.Core.Lang,k=a.Common.GameEvents,l=a.Core.SoundManager,m=a.Core.HTML.PageManager,n=a.Common.Currency,o=a.Common.PlayerMonitoring,p=a.Common.ApplicationBase,q=a.Core.Events,r=a.Slots.SettingsPages.Settings,s=a.Slots.ControlPanel,t=function(t){function u(){var a=null!==t&&t.apply(this,arguments)||this;return a._gameLogic={},a._isFirstLoad=!0,a._isAutoPlay=!1,a}return __extends(u,t),u.prototype.onAppInit=function(){t.prototype.onAppInit.call(this),f.optimizeLoading=!1,f.forceHD=!0,q.coreEvents.on(m.EVENT_ON_PAGE_LOADED,function(a){"loader"==a.id&&(b.getPageManager("MAIN").showPage("loader"),$("#remove_after_load").css("display","none"))});var c=new a.Core.Utils.Queue;c.add(function(b){a.getConfig().languages.indexOf(i.launchVariables.lang)<0&&(i.launchVariables.lang="en"),j.loadDictionary(i.launchVariables.lang,b)}),c.add(function(a,b){p.instance.emit(d.REQUEST_PRELOAD_STARTED,this),a()}),c.add(function(a){$("body").append("<div id='game_wrapper'></div>"),window.vex.registerPlugin(window.vexDialog),window.vex.defaultOptions.className="vex-theme-plain",a()}),c.add(function(b){window.WebFont.load({custom:{families:a.getConfig().fonts}}),b()}),c.add(function(a){i.setVariant([i.DEVICE_MOBILE,i.DEVICE_DESKTOP],i.launchVariables.variant),a()}),c.add(function(c){b.getPageManager("MAIN").loadPages(a.getConfig().html_pages,function(a,b){},function(){c()})}),c.add(function(a){r.loadGameRules(a)}),c.add(function(b){a.Core.Renderer.SceneManager.init(a.getConfig().scenes),b()}),c.add(function(b){for(var c in a.getConfig().logic)this._gameLogic[c]=a.getConfig().logic[c];b()}.bind(this)),c.add(function(a){p.instance.on(d.RESPONSE_ERROR,this.onServerError,this),p.instance.on(d.RESPONSE_AUTH,this.onServerAuthenticate,this),p.instance.on(d.RESPONSE_ALERT,this.onServerAlert,this),p.instance.on(d.RESPONSE_USER,this.onServerUser,this),p.instance.on(d.RESPONSE_RESULTS,this.onServerResults,this),p.instance.on(d.RESPONSE_STATE,this.onServerState,this),p.instance.on(d.RESPONSE_OPEN,this.onServerOpen,this),p.instance.on(s.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart,this),p.instance.on(s.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd,this),p.instance.on(k.ON_GET_GAME_RESULTS,this.onGetGameResults,this),p.instance.on(k.ON_PLAYER_PROMPT,this.onGamePlayerPrompt,this),p.instance.on(k.ON_RESULTS_DISPLAYED,this.onGameResultsDisplayed,this),p.instance.on(k.ON_GAME_READY,this.onGameReady,this),a()}.bind(this)),c.add(function(b){i.launchVariables.operator=i.launchVariables.operator||"rfg",a.getConfig().server[i.launchVariables.operator]?d.createInstance(a.getConfig().server[i.launchVariables.operator],p.instance,b):d.createInstance(a.getConfig().server.rfg,p.instance,b)}),c.add(function(a,b){p.instance.emit(d.REQUEST_PRELOAD_STARTED,this),a()}),c.add(function(b){var c=a.getConfig().preload_manifests;a.getConfig().post_manifests;p.instance.emit(k.ON_LOAD_PROGRESS,0),c.forEach(function(a){f.get(a).load(a,function(){"./assets/renderer/splash/manifest.json"!==a&&"./assets/renderer/big_win/manifest.json"!==a&&(p.instance.emit(d.REQUEST_PROGRESS_UPDATED,this),b())},function(b){"./assets/renderer/splash/manifest.json"!==a&&"./assets/renderer/big_win/manifest.json"!==a&&"./assets/renderer/free_spins/manifest.json"!==a&&p.instance.emit(k.ON_LOAD_PROGRESS,b)}.bind(this))})}),c.add(function(a){setTimeout(function(){p.instance.emit(d.REQUEST_AUTH,this),a()},2e3)}),c.start()},u.prototype.onGetGameResults=function(a){this._currentGame.getResults(a)},u.prototype.onGameReady=function(b,d){if(b.isBaseGame())if(this._previousGame&&!this._previousGame.isBaseGame()||a.Common.Server.brokenBooleanAfterFreegame)if(a.Common.Server.brokenBooleanAfterFreegame&&(a.Common.Server.freeSpinTotalBalance=a.Common.Server.brokenTotalBalanceAfterFreegame),a.Common.Server.promotionalfreeplaysreelholidays&&0==a.Common.Server.freePlaysRemainingSpinsCount)c.showSceneAsOverlay("PROMOTIONAL_FREE_SPINS_SUMMARY",{callback:function(){a.Common.Server.freePlaysRemainingSpinsCount=void 0,c.closeOverlay()}.bind(this)});else{var e=$("#cp_balance");e.text(n.format(a.RendererScenes.Scene_FreeSpins.balanceBeforeWin)),c.showSceneAsOverlay("FREE_SPINS_SUMMARY",{callback:function(){e.text(n.format(a.Common.Server.gameBalance)),p.instance.emit(k.ON_CONTINUE_GAME,this._currentGame)}.bind(this)})}else this._previousGame||p.instance.emit(k.ON_CONTINUE_GAME,this._currentGame,d)},u.prototype.onGameResultsDisplayed=function(){p.instance.emit(d.REQUEST_OPEN)},u.prototype.onGamePlayerPrompt=function(a){},u.prototype.onServerOpen=function(b){var c=this,d=a.Core.Utils.getUrlVar("regulation")||"uk",e=0;void 0==a.Common.Server.endResponseBoolean&&(e=500),"uk"===d.toLowerCase()&&(e=500),this._currentGame&&this._currentGame.end(),this._previousGame=this._currentGame;var f=this.getGameLogic(b.getGameId(),b.getGameState());this._currentGame&&this._currentGame.getGameId()==f.getGameId()||this._isAutoPlay&&this._currentGame.getGameId()==f.getGameId()?(this._currentGame.setState(b.getGameState()),setTimeout(function(){p.instance.emit(k.ON_CONTINUE_GAME,c._currentGame),a.Common.Server.endResponseBoolean=void 0,a.Common.Server.promotionalfreeplaysreelholidays&&a.Common.Server.freePlaysAfterFreespin&&p.instance.emit(s.SPIN_BUTTON_ENABLE_AFTER_FREEPLAYS_INTRO)},e)):this.changeGame(f,!1)},u.prototype.onServerBaseBrokenOpen=function(a,b){var c=this.getGameLogic(a.getGameId(),a.getGameState());this.changeGame(c,!0,b)},u.prototype.onServerState=function(a){p.instance.emit(k.ON_STATE_READY,a)},u.prototype.onServerResults=function(a){if(this._currentGame.getGameId()!=a.getGameId())throw"[App] Game results mismatch.  Current game id : "+this._currentGame.getGameId()+", results game id : "+a.getGameId();a.getEvaluatedResults()?(this._currentGame.setState(a.getState()),p.instance.emit(k.ON_RESULTS_READY,this._currentGame,a,!1)):p.instance.emit(d.REQUEST_OPEN)},u.prototype.onServerUser=function(a){},u.prototype.onServerAlert=function(a){a.isFatal()?b.getPageManager("MAIN").showPage("error",a):window.vex.dialog.alert(a.getPlayerMessage())},u.prototype.onServerAuthenticate=function(b){e.init(a.getConfig().profile),n.isoCode=b.getPlayerCurrency(),n.prefixCurrency=b.getPrefixCurrency(),n.suffixCurrency=b.getSuffixCurrency(),n.currencyDecimalPlaces=Number(b.getCurrencyDecimalPlaces()),n.localeId="en","pt_br"==n.localeId.toLowerCase()&&(n.localeId="pt-BR"),o.init(),j.scanDOM(),p.instance.emit(d.REQUEST_OPEN)},u.prototype.onServerError=function(a){b.getPageManager("MAIN").showPage("error",a)},u.prototype.getGameLogic=function(a,b){if(!this._gameLogic[a])throw"Game logic module not defined : "+a;return new(h.getReference(this._gameLogic[a]))(b)},u.prototype.changeGame=function(d,e,g){var h=function(){c.showScene(d.getGameId(),{gameLogic:d},function(f,h){if(d.isGame("$FREE_SPINS")&&h){a.Common.Server.server.freeSpinsLoad=!0;var l=0;a.Common.Server.server.historyDataBoolean&&(l=1e3),setTimeout(function(){$("#freegame_loading").css("display","none")},l)}console.log("[App] Game scene loaded! :",d.getGameId()),this._currentGame=d,p.instance.emit(k.ON_GAME_CHANGED,d,e),p.instance.emit(k.ON_GAME_READY,d,e),"$FREE_SPINS"===d.getGameId()?p.instance.emit(k.ON_PLAYER_PROMPT,j.getPhrase(""),500):h&&d.isRespin()&&p.instance.emit(k.ON_PLAYER_PROMPT,j.getPhrase(" ")),this._isFirstLoad&&(this._isFirstLoad=!1,b.getPageManager("MAIN").showPage("main"),p.instance.emit(k.ON_GAME_INITIALIZED),a.Common.SwipeForFullScreen.init(),1==e?setTimeout(function(){p.instance.emit(k.ON_RESULTS_READY,this._currentGame,g,!0)}.bind(this),1e3):d.isBaseGame()&&(p.getAppValue("splashScreen")&&void 0===a.Common.Server.brokenBooleanAfterFreegame?(c.showSceneAsOverlay("INTRO"),i.isMobile()&&p.instance.emit("BASELAYOUT_SHOW_OFF")):(void 0==a.Common.Server.brokenBooleanAfterFreegame&&p.instance.emit(k.ON_PLAYER_PROMPT_IDLE),a.Common.Server.promotionalfreeplaysreelholidays&&a.Common.Server.freePlaysAfterFreespin&&p.instance.emit(a.Slots.ControlPanel.EVENT_SHOW_PROMOTIONAL_INTRO))))}.bind(this))}.bind(this),m=c.getSceneData(d.getGameId()),n=f.get(m.manifestFilename);if(n.isLoaded())setTimeout(h,this._currentGame&&this._currentGame.isBaseGame()?500:0);else{"$FREE_SPINS"==m.id&&(a.Common.Server.server.freeSpinsLoad=!1,$("#freegame_loading").css("display","block")),l.globalSounds.fadeMusicOut(0,1e3);var o=setInterval(function(){p.instance.emit(k.ON_LOAD_PROGRESS,n.loadProgress);var a=n.loadProgress;n.isLoaded()&&(a=1,console.log("[App] Polling complete - scene ready! :",d.getGameId())),p.instance.emit(k.ON_LOAD_PROGRESS,a),clearInterval(o),setTimeout(h,500)}.bind(this),1)}},u.prototype.onAutoSpinsStart=function(){this._isAutoPlay=!0},u.prototype.onAutoSpinsEnd=function(){this._isAutoPlay=!1},u.prototype.onAppResize=function(a,b){t.prototype.onAppResize.call(this,a,b),i.isDeviceMobile()&&($("#rotate_mask").remove(),$("body").append("<div id='rotate_mask' style='z-index:999999999; width:500%; height:500%;position: fixed; left:0; top:0;background-color: black'></div>"),setTimeout(function(){$("#rotate_mask").animate({opacity:0},250,function(){$("#rotate_mask").remove()})},250))},u.prototype.onAppExit=function(){t.prototype.onAppExit.call(this),b.getPageManager("MAIN").showPage("game_over"),b.getPageManager("MAIN").getPage("game_over").changeParent("body")},u.prototype.onAppLoseFocus=function(a,b){t.prototype.onAppLoseFocus.call(this,a,b)},u.prototype.onAppGetFocus=function(a,b){t.prototype.onAppGetFocus.call(this,a,b),p.instance.emit(d.REQUEST_USER)},u.prototype.onAppException=function(a){t.prototype.onAppException.call(this,a);var c=new g({lang:"err_server_generic",err:{msg:a},fatal:!0});b.getPageManager("MAIN").showPage("error",c)},u}(p);a.App=t}(DO||(DO={}));var DO;!function(a){function b(){return{profile:{games:{$BASE:{aperture:{viewport:{width:3,height:3,hidden_positions:null}},allow_bets:!0,paytable:{B1:{name:"SCATTER",rule:"$SCATTER",oak:{x3:{multiplier:0,feature:null}}},W1:{name:"Wild",rule:"$LINE_LEFT",oak:{x3:{multiplier:50,feature:null},x4:{multiplier:500,feature:null},x5:{multiplier:1e3,feature:null}},substitutes:["H1","H2","H3","M1","M2","M3","L1","L2","L3","L4","L5","L6"]},H1:{name:"Game Logo",rule:"$LINE_LEFT",oak:{x3:{multiplier:20,feature:null},x4:{multiplier:100,feature:null},x5:{multiplier:200,feature:null}}},H2:{name:"Queen",rule:"$LINE_LEFT",oak:{x3:{multiplier:20,feature:null},x4:{multiplier:100,feature:null},x5:{multiplier:200,feature:null}}},H3:{name:"Montage Postcard",rule:"$LINE_LEFT",oak:{x3:{multiplier:20,feature:null},x4:{multiplier:100,feature:null},x5:{multiplier:200,feature:null}}},M1:{name:"Portrait Frame",rule:"$LINE_LEFT",oak:{x3:{multiplier:10,feature:null},x4:{multiplier:50,feature:null},x5:{multiplier:100,feature:null}}},M2:{name:"Potion",rule:"$LINE_LEFT",oak:{x3:{multiplier:10,feature:null},x4:{multiplier:50,feature:null},x5:{multiplier:100,feature:null}}},M3:{name:"Easter egg",rule:"$LINE_LEFT",oak:{x3:{multiplier:10,feature:null},x4:{multiplier:50,feature:null},x5:{multiplier:100,feature:null}}},L1:{name:"Ace",rule:"$LINE_LEFT",oak:{x3:{multiplier:5,feature:null},x4:{multiplier:40,feature:null},x5:{multiplier:80,feature:null}}},L2:{name:"King",rule:"$LINE_LEFT",oak:{x3:{multiplier:5,feature:null},x4:{multiplier:30,feature:null},x5:{multiplier:60,feature:null}}},L3:{name:"Queen",rule:"$LINE_LEFT",oak:{x3:{multiplier:5,feature:null},x4:{multiplier:10,feature:null},x5:{multiplier:40,feature:null}}},L4:{name:"Jack",rule:"$LINE_LEFT",oak:{x3:{multiplier:5,feature:null},x4:{multiplier:10,feature:null},x5:{multiplier:40,feature:null}}},L5:{name:"Ten",rule:"$LINE_LEFT",oak:{x3:{multiplier:5,feature:null},x4:{multiplier:10,feature:null},x5:{multiplier:40,feature:null}}},L6:{name:"Gift Present",rule:"$LINE_LEFT"},W2:{name:"Bunny_Wild",rule:"$LINE_LEFT",substitutes:["H1","H2","H3","M1","M2","M3","L1","L2","L3","L4","L5","L6"]},W3:{name:"Santa_Wild",rule:"$LINE_LEFT",substitutes:["H1","H2","H3","M1","M2","M3","L1","L2","L3","L4","L5","L6"]},W4:{name:"Pumpkin_Wild",rule:"$LINE_LEFT",substitutes:["H1","H2","H3","M1","M2","M3","L1","L2","L3","L4","L5","L6"]},B2:{name:"SCATTER",rule:"$SCATTER",oak:{x3:{multiplier:0,feature:null}}},B3:{name:"SCATTER",rule:"$SCATTER",oak:{x3:{multiplier:0,feature:null}}},B4:{name:"SCATTER",rule:"$SCATTER",oak:{x3:{multiplier:0,feature:null}}},Blank:{name:"Blank",rule:"$LINE_LEFT"}},game_id:"$BASE",shawPayline:!0,paylines:[[2,5,8,11,14],[1,4,7,10,13],[3,6,9,12,15],[1,5,9,11,13],[3,5,7,11,15],[2,4,8,12,14],[2,6,8,10,14],[1,4,8,12,15],[3,6,8,10,13],[1,6,9,12,13],[2,4,7,10,14],[2,6,9,12,14],[1,5,8,11,13],[3,5,8,11,15],[2,5,7,11,14],[2,5,9,11,14],[3,4,9,10,15],[1,6,7,12,13],[3,4,8,10,15],[1,4,8,12,15]],symbolMask:{x:60,y:55,w:120,h:110,color:594196,alpha:1}},$FREE_SPINS:{aperture:{viewport:{width:3,height:3,hidden_positions:null}},game_id:"$FREE_SPINS",shawPayline:!0,paylines:[[2,5,8,11,14],[1,4,7,10,13],[3,6,9,12,15],[1,5,9,11,13],[3,5,7,11,15],[2,4,8,12,14],[2,6,8,10,14],[1,4,8,12,15],[3,6,8,10,13],[1,6,9,12,13],[2,4,7,10,14],[2,6,9,12,14],[1,5,8,11,13],[3,5,8,11,15],[2,5,7,11,14],[2,5,9,11,14],[3,4,9,10,15],[1,6,7,12,13],[3,4,8,10,15],[1,4,8,12,15]],symbolMask:{x:40,y:40,w:90,h:80,color:2103569,alpha:0}}}},server:{rfg:{game_id:c.launchVariables.gameId,url:c.launchVariables.gameURL,history_url:"",timeout:3e3,platform:"DO.Common.Server.Interface_RGS"}},preload_manifests:["./assets/renderer/splash/manifest.json","./assets/renderer/base/manifest.json","./assets/renderer/free_spins/manifest.json","./assets/renderer/big_win/manifest.json"],post_manifests:["./assets/renderer/big_win/manifest.json"],fonts:["roboto","Roboto-Bold","immortal","Berlin-Sans-FB-Demi-Bold","ELEPHNT","feastofflesh","BELLB","troika","Copperplate-Gothic-Regular","celebration-font","BD_Cartoon_Shout"],languages:["en","cz","bul","chi","lit","lav","fra","dan","slo","deu","gre","esp","swe","pol","nor","nld","fin","hun","isl","jpn","kor","est","ita","rus","srp","tha","tur","vie","rum","pbr","por","cze","multi"],html_pages:[{id:"loader",html:a.Core.Environment.launchVariables.branding?"./assets/html/loader.html":"./assets/html/loader-plain.html",module:"DO.HTMLPageClasses.Loader",variants_css:{default:"./assets/html/loader-default.css",mobile:{landscape:"./assets/html/loader-mobile-landscape.css",portrait:"./assets/html/loader-mobile-portrait.css"},mini:null}},{id:"error",html:"./assets/html/error.html",module:"DO.HTMLPageClasses.Error",variants_css:{default:"./assets/html/error-default.css",mobile:{landscape:null,portrait:null},mini:null}},{id:"dialog",html:"./assets/html/dialog.html",module:"DO.HTMLPageClasses.Dialog",variants_css:{default:"./assets/html/dialog-default.css",mobile:{landscape:null,portrait:null},mini:null}},{id:"main",html:"./assets/html/main.html",module:"DO.HTMLPageClasses.Main",variants_css:{default:"./assets/html/main-default.css",mobile:{landscape:"./assets/html/main-mobile-landscape.css",portrait:"./assets/html/main-mobile-portrait.css"},mini:null}},{id:"settings",html:{desktop:"./assets/html/settings-desktop.html",mobile:"./assets/html/settings-mobile.html"},module:"DO.Slots.SettingsPages.Settings",variants_css:{default:"./assets/html/settings-default.css",desktop:"./assets/html/settings-desktop.css",mobile:{landscape:"./assets/html/settings-mobile-landscape.css",portrait:"./assets/html/settings-mobile-portrait.css"},mini:null}},{id:"panel",html:{desktop:"./assets/html/panel-desktop.html",mobile:"./assets/html/panel-mobile.html"},module:"DO.Slots.ControlPanel.ControlPanel_HTML5",variants_css:{default:"./assets/html/panel-default.css",desktop:"./assets/html/panel-desktop.css",mobile:{landscape:"./assets/html/panel-mobile-landscape.css",portrait:"./assets/html/panel-mobile-portrait.css"},mini:null}},{id:"game_over",html:"./assets/html/game-over.html",module:"DO.HTMLPageClasses.GameOver",variants_css:{default:"./assets/html/game-over.css",mobile:{landscape:null,portrait:null},mini:null}}],scenes:{INTRO:{layout_id:"layout",module:"DO.RendererScenes.Scene_Intro",asset_manifest:"./assets/renderer/splash/manifest.json"},$BASE:{layout_id:"layout",module:"DO.RendererScenes.Scene_Base",asset_manifest:"./assets/renderer/base/manifest.json"},$FREE_SPINS:{layout_id:"layout",module:"DO.RendererScenes.Scene_FreeSpins",
asset_manifest:"./assets/renderer/free_spins/manifest.json"},FREE_SPINS_SUMMARY:{layout_id:"layout_summary",module:"DO.RendererScenes.Scene_FreeSpins_Summary",asset_manifest:"./assets/renderer/free_spins/manifest.json"},PROMOTIONAL_FREE_SPINS_SUMMARY:{layout_id:"promotional_layout_summary",module:"DO.RendererScenes.Scene_Promotional_FreeSpins_Summary",asset_manifest:"./assets/renderer/base/manifest.json"},BIG_WIN:{layout_id:"layout_big-win",module:"DO.RendererScenes.BigWin",asset_manifest:"./assets/renderer/big_win/manifest.json"},MEGA_WIN:{layout_id:"layout_mega-win",module:"DO.RendererScenes.BigWin",asset_manifest:"./assets/renderer/big_win/manifest.json"},SUPER_MEGA_WIN:{layout_id:"layout_super-mega-win",module:"DO.RendererScenes.BigWin",asset_manifest:"./assets/renderer/big_win/manifest.json"}},logic:{$BASE:"DO.RendererScenes.Logic_Base",$FREE_SPINS:"DO.RendererScenes.Logic_FreeSpins"}}}var c=a.Core.Environment;a.getConfig=b}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=a.Common.ApplicationBase,e=a.Common.GameEvents,f=a.Common.Server,g=a.Core.Lang,h=a.Core.Environment,i=function(b){function c(c,i){var j=b.call(this,c,i)||this;return j.on(a.Core.Events.ON_SHOWN,function(){$("#loading_txt").text(g.getPhrase("loading_txt")),h.isDesktop()||h.isLandscape()?$("html").css("background-image","url('./assets/html/images/settings/Loading_Screen.jpg')").css("background-size","cover").css("width","100%"):$("html").css("background-image","url('./assets/html/images/settings/Loading_Screen.jpg')"),$(".logo").css("background-image","url('./assets/html/images/settings/Logo.png')"),$("#logo_holder").fadeIn();var a=$("#loader_progress_bar");d.instance.on(e.ON_LOAD_PROGRESS,function(b){$("#progressMeter").text(Math.round(100*b)+"%"),d.instance.emit(f.LEANDER_REQUEST_PRELOAD_UPDATE,b),b<1?TweenLite.to(a,.5,{value:100*b,ease:Linear.easeNone}):TweenLite.to(a,.4,{value:100*b,ease:Linear.easeNone})},this),d.instance.emit(e.ON_LOAD_PROGRESS,0)}.bind(j)),j.on(a.Core.Events.ON_HIDDEN,function(){$("#control_panel").show()}.bind(j)),j}return __extends(c,b),c}(c);b.Loader=i}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.StageSetup,d=a.Core.Events,e=a.Core.HTML.Page,f=a.Core.Environment,g=a.Common.ApplicationBase,h=a.Common.GameEvents,i=function(b){function e(e,i){var j=b.call(this,e,i)||this;j.once(a.Core.Events.ON_CREATE,function(){this._stageSetup=new c,this._stageSetup.width=960,this._stageSetup.height=540,this._stageSetup.isTransparent=!0,this._stageSetup.resolution=2,this._stageSetup.divId="renderer_canvas",this._stage=new a.Core.Renderer.Stage,this._stage.init(this._stageSetup),f.isDeviceMobile(),this._stageSetup.fps=30,this.resizeGameWrapper(this._stageSetup)}.bind(j)),d.coreEvents.on(d.ON_APP_RESIZE,function(){this.resizeGameWrapper(this._stageSetup)},j);var k=function(a){$(a.target).hasClass("no_fullscreen")||(f.goFullScreen(),$("body").off("mouseup",k))};return g.instance.on(h.ON_GAME_INITIALIZED,function(){f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),d.coreEvents.on(f.EVENT_FULL_SCREEN,function(a){!a&&f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),j}return __extends(e,b),e.prototype.resizeGameWrapper=function(a){var b=$("#game_wrapper"),c=a.width/a.height,d=window.innerWidth,e=window.innerHeight;if(d/e>c?(d=e*c,b.css("height",e+"px"),b.css("width",d+"px")):(e=f.isPortrait()&&!f.isDesktop()?d/c+75:d/c,b.css("height",e+"px"),b.css("width",d+"px")),b.css("marginLeft",-d/2+"px"),b.css("position","absolute"),b.css("left","50%"),$("#renderer_canvas").css("transform","scale(1.08, 0.84)"),f.isPortrait()&&!f.isDesktop())b.css("top","0px"),b.css("marginTop","0px");else if("4:3"==f.getAspectRatio()){b.css("top","0px"),b.css("height","100%"),b.css("marginTop","0");var g=$("#renderer_canvas");g.css("transform","translateX(-50%) scaleX(1.3)"),g.css("left","50%")}else{var h=$("#renderer_canvas");h.css("transform","translateX(0) scaleX(1)"),h.css("left","0%"),b.css("top","50%"),b.css("marginTop",-e/2+"px")}window.scroll(0,1)},e}(e);b.Main=i}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.GameEvents,e=a.Core.HTML.Page,f=a.Core.Lang,g=function(b){function e(e,g){var h=b.call(this,e,g)||this;return h.on(a.Core.Events.ON_SHOWN,function(a){c.instance.emit(d.ON_FATAL_ERROR,a),$("#control_panel").remove(),window.vex.dialog.buttons.YES.text=f.getPhrase("reload_caps"),window.vex.dialog.alert({message:a.getPlayerMessage(),callback:function(a){window.location.reload()}})}.bind(h)),h}return __extends(e,b),e}(e);b.Error=g}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){alert("DIALOG")}.bind(e)),e}return __extends(c,b),c}(c);b.Dialog=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.exit_url);b&&("close"===b?window.close():window.location.replace(b))}.bind(e)),e}return __extends(c,b),c}(c);b.GameOver=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.GameEvents,e=a.Core.Renderer.SceneManager,f=a.Slots.Aperture,g=a.Core.Renderer.Scene,h=a.Core.Environment,i=a.Core.SoundManager,j=function(b){function g(){return null!==b&&b.apply(this,arguments)||this}return __extends(g,b),g.prototype.onCreate=function(){b.prototype.onCreate.call(this),this.onResize(),c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),c.instance.emit(a.Slots.ControlPanel.EVENT_HIDE),c.instance.on(f.PROMOTIONAL_PANEL_CHANGE,this.shiftPanel,this),this.on(a.Core.Events.ON_INTERACTION,function(b,f){h.isMobile()&&c.instance.emit("BASELAYOUT_SHOW"),"iOS"!==a.Core.Environment.getPlatformData().os.family&&h.isMobile()&&navigator.vibrate([100]),i.globalSounds.playCue("GENERIC_CLICK");var g=!this._layout.getComponent("splash_show_again_toggle").getState();a.Common.Server.server.spinButtonBoolean=!1,c.instance.emit(d.ON_PLAYER_PROMPT_IDLE),c.saveAppValue("splashScreen",g),e.closeOverlay(),c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),c.instance.emit(a.Slots.ControlPanel.EVENT_SHOW),1==a.Common.Server.promotionalfreeplaysreelholidays&&"COMPLETE"!=a.Common.Server.freePlaysStatus&&c.instance.emit(a.Slots.ControlPanel.EVENT_SHOW_PROMOTIONAL_INTRO),h.isFullScreenAvailable()&&h.isMobile()&&h.goFullScreen()}.bind(this))},g.prototype.onResize=function(a,c){b.prototype.onResize.call(this,a,c),h.isLandscape()&&h.isMobile()?(this._layout.getComponent("background").visible=!0,this._layout.getComponent("black_background").visible=!0,this._layout.getComponent("Bunny_text").x=230,this._layout.getComponent("Bunny_frame").x=144,this._layout.getComponent("Pumpkin_text").x=610,this._layout.getComponent("Bunny_Wild").x=130,this._layout.getComponent("Apr").x=9.6,this._layout.getComponent("Santa_text").x=950,this._layout.getComponent("Santa_frame").x=816,this._layout.getComponent("Santa_Wild").x=814,this._layout.getComponent("Dec").x=681.6):h.isPortrait()&&h.isMobile()&&(this._layout.getComponent("background").visible=!1,this._layout.getComponent("black_background").visible=!1,this._layout.getComponent("Bunny_text").x=265,this._layout.getComponent("Bunny_frame").x=180,this._layout.getComponent("Bunny_Wild").x=160,this._layout.getComponent("Apr").x=40,this._layout.getComponent("Pumpkin_text").x=603,this._layout.getComponent("Santa_text").x=920,this._layout.getComponent("Santa_frame").x=785,this._layout.getComponent("Santa_Wild").x=780,this._layout.getComponent("Dec").x=650)},g.prototype.shiftPanel=function(){h.isDesktop()&&(this._layout.getComponent("splash_show_again_toggle").y=513,this._layout.getComponent("splash_show_again_Label").y=523.8)},g}(g);b.Scene_Intro=j}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.SubGame,e=a.Common.GameSceneBase,f=a.Slots.Aperture,g=a.Slots.WinManager,h=a.Common.GameEvents,i=a.Slots.SpinResults,j=a.Core.Utils.Queue,k=a.Core.Utils,l=a.Core.SoundManager,m=a.Slots.ControlPanel,n=a.Core.Renderer.Scene,o=a.Common.Currency,p=a.Core.Renderer.SceneManager,q=a.Common.Server,r=a.Core.Lang,s=a.Slots.SettingsPages.BettingSetup,t=a.Core.Environment,u=function(a){function b(b){var c=a.call(this,b)||this;return c.addForce(),c}return __extends(b,a),b.prototype.addForce=function(){$("#force_select").remove(),$("body").append('<select style="z-index: 1000000; color:black; position: fixed; top:100px; left: 10px" id="force_select" class="cheat_style"><option value="none">None</option><option value="free_christmas">FREE SPINS Santa Mystery Symbols</option><option value="free_easter">FREE SPINS Bunny Random Wilds</option><option value="free_halloween">FREE SPINS Pumpkin Stack Wild</option><option value="christmas">BASE Santa Mystery Symbols</option><option value="easter">BASE Bunny Random Wilds</option><option value="halloween">BASE Pumpkin Stack Wild</option><option value="bigwin">BIGWIN</option><option value="megawin">MEGAWIN</option><option value="superwin">SUPERWIN</option></select>'),$("#force_select").change(function(){"none"!=$(this).val()?c.instance.emit("force_result",$(this).val()):c.instance.emit("force_result",null)})},b.prototype.end=function(){a.prototype.end.call(this)},b.prototype.getResults=function(a){c.instance.emit(q.REQUEST_RESULTS,{stake:{amount:.01},type:"$BASE"})},b}(d);b.Logic_Base=u;var v=function(b){function d(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(d,b),d.prototype.onCreate=function(){b.prototype.onCreate.call(this),l.globalSounds.playCue(this._layout.getLayoutParams().audio.music.spin,250,!0),$("#control_panel").hide(),l.globalSounds.stopMusic(),this._layout.triggerFX("create"),this._layout.setComponentText("msg_game_win",r.getPhrase("feature_pays_x_caps1",{win:a.Common.Currency.format(a.Common.Server.freePlaysWinAmount)})),this._layout.setComponentText("msg_played",r.getPhrase("freespins_played_promotional",{spins:a.Common.Server.freePlaysGameAwarded}));c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),this.interactive=!0,this.interactiveChildren=!0,this.on(a.Core.Events.ON_INTERACTION,this.onContinue),this.onResize(),$("#main_button_wrapper").hide(),$("#Autoplay_button_wrapper").hide(),$("#bet_button_wrapper").hide(),$("#max_button_wrapper").hide()},d.prototype.onResize=function(){t.isMobile()&&(t.isPortrait()&&!t.isDesktop()?($("#control_panel").hide(),"true"==t.launchVariables.forceUnifiedConsole&&(this._layout.getComponent("orientation").visible=!1,this.interactiveChildren=!0,this.interactive=!0,this._layout.getComponent("button_collect").visible=!0)):t.isLandscape()&&!t.isDesktop()&&($("#control_panel").hide(),"true"==t.launchVariables.forceUnifiedConsole&&(this._layout.getComponent("orientation").visible=!0,this.interactiveChildren=!1,this.interactive=!1,this._layout.getComponent("button_collect").visible=!1)))},d.prototype.onContinue=function(){var b=this,d=new k.Queue(this._juggler);this.off(a.Core.Events.ON_INTERACTION,this.onContinue),c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),a.Core.Renderer.SceneManager.closeOverlay(),$("#control_panel").show(),p.closeOverlay(),$("#main_button_wrapper").show(),$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"),a.Common.Server.promotionalFreeGameBool=!1;var e=g.getWinBand(a.Common.Server.freePlaysWinAmount/100),f=50*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),i=100*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),j=a.Common.Server.freePlaysWinAmount,l={totalWinCash:a.Common.Server.freePlaysWinAmount};if(e){switch(e){case"BIG_WIN":d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,celebrationEnd:!0,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_WIN_PRESENTATION_START,l),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,l),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}.bind(this));break;case"MEGA_WIN":d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:f,celebrationEnd:!1,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,Scene:"MEGA_WIN",tickupStart:f,celebrationEnd:!0,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_WIN_PRESENTATION_START,l),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,l),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}.bind(this));break;case"SUPER_MEGA_WIN":d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:f,celebrationEnd:!1,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("MEGA_WIN",{win:i,celebrationEnd:!1,tickupStart:f,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,celebrationEnd:!0,tickupStart:i,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_WIN_PRESENTATION_START,l),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,l),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}.bind(this))}d.start(function(){c.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE)}.bind(this))}else{if($("#main_button_wrapper").removeClass("disabled"),$("#button_spin").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),a.Common.Server.server.FreeSpinsEnd=!1,a.RendererScenes.Scene_FreeSpins.totalWin>0){var m={totalWinCash:a.RendererScenes.Scene_FreeSpins.totalWin};a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_WIN_PRESENTATION_START,m),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,m),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),b._data.callback(),a.Common.Server.server.spinButtonBoolean=!1},3e3)},100)}else c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback();c.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE)}},d}(n);b.Scene_Promotional_FreeSpins_Summary=v;var w=function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;return c._scattterNumCount=0,c._isAutoPlay=!1,c._autoSpinCount=0,c.AudioProfile=null,c.showWinTextAnimation=function(b){1==a.Common.Server.promotionalfreeplaysreelholidays&&c._layout.setComponentText("promotional_freeGame_winMeter_value",a.Common.Currency.format(a.Common.Server.freePlaysWinAmount));var d=c._layout.getComponent("win_amount");d.visible=!0,c.addChild(d),b.totalWinCash>0?d.setText(a.Common.Currency.format(b.totalWinCash,!0)):d.setText(a.Common.Currency.format(Number(b),!0));var e=new PIXI.Point(d.position.x,d.position.y),f=new TimelineLite;d.scale.x=.2,d.scale.y=.2,t.isDesktop()?(f.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(d.position,.4,{x:640,y:535,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=e,d.visible=!1,l.globalSounds.playCue("WIN_COLLECT")}})])):(t.isLandscape()||t.isPortrait())&&(f.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(d.position,.4,{x:640,y:50,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=e,d.visible=!1,l.globalSounds.playCue("WIN_COLLECT")}})]))},c}return __extends(d,b),d.prototype.onResize=function(a,c){if(b.prototype.onResize.call(this,a,c),t.isFullScreenAvailable()&&t.isMobile()&&t.goFullScreen(),$("html").css("background-image","url('./assets/renderer/base/Blur.jpg')"),$("html").css("background-size"," cover"),t.isMobile()){if(t.isPortrait()){this.setHTMLBackground("./assets/renderer/base/mobile/Basegame_Mobile_Portrait.jpg"),$("#banner1").css("backgound-image","url('./assets/renderer/base/mobile/Portrait_Logo.jpg')"),$("#banner1").css("visibility","visible");var d=this._layout.getComponent("aperture_holder");d.scale.x=1,d.scale.y=1;var e=this._layout.getComponent("Reel_Snow");e.scale.x=.5,e.scale.y=.5,this._layout.getComponent("background").visible=!1,this._layout.getComponent("banner").visible=!1}else if(t.isLandscape()){var d=this._layout.getComponent("aperture_holder");d.scale.x=.98,d.scale.y=.98;var e=this._layout.getComponent("Reel_Snow");e.scale.x=.48,e.scale.y=.48,this._layout.getComponent("background").visible=!0,this._layout.getComponent("banner").visible=!0}}else t.isDesktop()},d.prototype.onGameReady=function(c){b.prototype.onGameReady.call(this,c);var e=t.launchVariables.lang.toLowerCase();if(a.Common.Server.server.RTP=o.format(100*a.Common.Server.server.RTP,!0)+"%",t.launchVariables.rm&&"dk"===t.launchVariables.rm.toLowerCase()&&$("#quick_spin").css("display","none"),t.launchVariables.language)$("#"+e).html(function(){return $(this).html().replace("demo",a.Common.Server.server.RTP)});else{this.stopAnim(),$("#banner1").css("visibility","visible"),!t.isDesktop()&&t.isLandscape()&&(this._layout.getComponent("banner").visible=!0);var f=l.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500);void 0!=f&&f.volume(.1),d.lastResults&&this._aperture.restoreAperture(d.lastResults.aperture.getAperture())}},d.prototype.onCreate=function(){var d=this;b.prototype.onCreate.call(this),$("#banner1").css("background-image","url('./assets/renderer/base/mobile/Portrait_Logo.png')"),t.isDesktop()&&this.animation(),l.globalSounds.stopMusic(),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this._fxLayer=new PIXI.Container,this._fxLayer1=new PIXI.Container,this.addChild(this._fxLayer),this._aperture.addChild(this._fxLayer1),this._movieLayer=new PIXI.Container,this.addChild(this._movieLayer),this._movieLayer1=new PIXI.Container,this.addChild(this._movieLayer1),this._movieLayer2=new PIXI.Container,this.addChild(this._movieLayer2),c.instance.on(h.ON_SPIN_PROMOTIONAL_COUNT,this.remainingPromotionalSpins,this),c.instance.on(h.PROMOTIONAL_END,this.promotionalEnd,this),c.instance.on(h.PROMOTIONAL_WIN,this.promotionalWinCount,this),c.instance.on(f.EVENT_REELS_SPIN_START,this.onSpinStart,this),c.instance.on(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),c.instance.on(f.EVENT_REEL_DROPPED,this.onReelDropped,this),c.instance.on(f.EVENT_REELS_DROPPED,this.onReelsDropped,this),c.instance.on(f.EVENT_TEASE_REEL,this.onReelTease,this),c.instance.on(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),c.instance.on(g.EVENT_SHOW_5AOK,this.onShow5OAK,this),c.instance.on(g.EVENT_SHOW_WIN,this.onShowWin,this),c.instance.on(g.EVENT_WIN_PRESENTATION_END,this.onWinsShown,this),c.instance.on(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),c.instance.once(g.EVENT_SHOW_WIN_TEXT_ANIMATION,function(a){return d.showWinTextAnimation(a)}),c.instance.on(m.EVENT_SHOW_PROMOTIONAL_INTRO,this.promotionalIntroScreen,this),c.instance.on("BASELAYOUT_SHOW",this.layoutmethod,this),c.instance.on("BASELAYOUT_SHOW_OFF",this.layoutmethodOfff,this),c.instance.on(m.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart,this),c.instance.on(m.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd,this),c.instance.on(m.EVENT_AUTO_SPIN,this.onAutoSpin,this),c.instance.on(m.EVENT_INTERRUPT_SPIN,this.onInterruptSpin,this),c.instance.on(m.EVENT_STOP_SPIN,this.onInterruptSpinInError,this),c.instance.on(h.ON_PLAYER_PROMPT,this.onPlayerPrompt,this),c.instance.on(h.ON_PLAYER_PROMPT_IDLE,this.idleMessages,this),c.instance.on(h.ON_PLAYER_PROMPT_IDLE_KILL,this.killIdleMsgTween,this),c.instance.on(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn,this),this._layout.triggerFX("scene_start"),a.Common.Server.freePlaysAfterFreespin?(this._layout.getComponent("promotional_freegame_count").visible=!0,this._layout.getComponent("promotional_freeGame_value").visible=!0,this._layout.getComponent("promotional_freegame_win_meter").visible=!0,this._layout.getComponent("promotional_freeGame_winMeter_value").visible=!0,this._layout.setComponentText("promotional_freeGame_value",a.Common.Server.freePlaysRemainingSpinsCount),this._layout.setComponentText("promotional_freeGame_winMeter_value",a.Common.Currency.format(a.Common.Server.freePlaysWinAmount)),c.instance.emit(m.SPIN_BUTTON_ENABLE_AFTER_FREEPLAYS_INTRO),a.Common.Server.freePlaysAfterFreespin=!1):(this._layout.getComponent("promotional_freegame_count").visible=!1,this._layout.getComponent("promotional_freeGame_value").visible=!1,this._layout.getComponent("promotional_freegame_win_meter").visible=!1,this._layout.getComponent("promotional_freeGame_winMeter_value").visible=!1)},d.prototype.onExpandColumn=function(b){console.log("[ExpandingSymbols] ",b);var d=this._assets.getMovieClip("Expanding_Wild");l.globalSounds.playCue("W4:WIN"),d.scale=new PIXI.Point(.52,.5);var e=this._winManager.getAperture().getReel(b-1),f=e.getCentroid(this._movieLayer);t.isMobile()?(d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-40,d.position.y=f.y-93.5):(d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-38.5,d.position.y=f.y-95),this._movieLayer.addChild(d),d.loop=!1,d.play(),d.onComplete=function(){},a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_MODIFY_APERTURE_END)},1e3)},d.prototype.shiftPanel=function(){$("#panel_background").css("transform","scale(1)"),$("#panel_background").css("bottom","0px"),this._layout.getComponent("player_prompt").scale=new PIXI.Point(1,1),this._layout.getComponent("player_prompt").x=238.07999999999998,this._layout.getComponent("player_prompt").y=496.8,t.isDesktop()&&(this._layout.getComponent("UI_Base").y=513)},d.prototype.animation=function(){var b=this._layout.getComponent("BAT1"),c=this._layout.getComponent("BAT2"),d=new PIXI.Point(b.position.x,b.position.y),e=new PIXI.Point(c.position.x,c.position.y),f=new TimelineLite({onComplete:function(){this.restart(!0)}}),g=new TimelineLite({onComplete:function(){this.restart(!0)}});f.to(b.position,6,{x:1e3,y:200,ease:Linear.easeNone,onComplete:function(){b.position.x=d.x,b.position.y=d.y}}),a.Core.Time.juggler.setTimeout(function(){g.to(c.position,6,{x:1050,y:250,ease:Linear.easeNone,onComplete:function(){c.position.x=e.x,c.position.y=e.y}})},750)},d.prototype.showCalender=function(a){var b=this._layout.getComponent(a);this._movieLayer2.addChild(b),b.visible=!0},d.prototype.onInteraction=function(a,c){b.prototype.onInteraction.call(this,a,c)},d.prototype.onInterruptSpin=function(){a.Common.Server.interruptSpinBool=!0,this._teaseAudio&&(this._teaseAudio=null)},d.prototype.onInterruptSpinInError=function(){this._aperture.onStopReelSpinning()},d.prototype.remainingPromotionalSpins=function(){this._layout.setComponentText("promotional_freeGame_value",a.Common.Server.freePlaysRemainingSpinsCount)},d.prototype.promotionalWinCount=function(){this._layout.setComponentText("promotional_freeGame_winMeter_value",a.Common.Currency.format(a.Common.Server.freePlaysWinAmount))},d.prototype.promotionalEnd=function(){if("COMPLETE"==a.Common.Server.freePlaysStatus&&0==a.Common.Server.freePlaysRemainingSpinsCount&&(void 0==this._lastResults||this._lastResults&&"$BASE"==this._lastResults.getRaw().next_game)){var b=new k.Queue,c=k.touchToSkip(function(){b.skip()}.bind(this));this.promotionalFinished(),p.showSceneAsOverlay("PROMOTIONAL_FREE_SPINS_SUMMARY",{callback:function(){p.closeOverlay(),a.Common.Server.freePlaysRemainingSpinsCount=void 0,c()}.bind(this)})}},d.prototype.layoutmethod=function(){this._layout.getComponent("aperture_holder").visible=!0,this._layout.getComponent("Reel_Snow").visible=!0,this._layout.getComponent("player_prompt").visible=!0,this._layout.getComponent("Bunny").visible=!0,this._layout.getComponent("Santa").visible=!0,this._layout.getComponent("Pumpkin").visible=!0,1==a.Common.Server.promotionalfreeplaysreelholidays&&(this._layout.getComponent("promotional_freegame_count").visible=!0,this._layout.getComponent("promotional_freegame_win_meter").visible=!0)},d.prototype.layoutmethodOfff=function(){this._layout.getComponent("aperture_holder").visible=!1,this._layout.getComponent("Reel_Snow").visible=!1,this._layout.getComponent("player_prompt").visible=!1,this._layout.getComponent("Bunny").visible=!1,this._layout.getComponent("Santa").visible=!1,this._layout.getComponent("Pumpkin").visible=!1,1==a.Common.Server.promotionalfreeplaysreelholidays&&(this._layout.getComponent("promotional_freegame_count").visible=!1,this._layout.getComponent("promotional_freegame_win_meter").visible=!1)},d.prototype.promotionalIntroScreen=function(){var b=this._layout.getComponent("promotional_announcer");b.visible=!0,c.instance.emit(m.EVENT_RE_SPIN_BUTTON_HIDE),b.alpha=1,0==a.Common.Server.freePlaysGameAwarded?(this._layout.getComponent("promotional_more_you_have_won2").visible=!1,this._layout.setComponentText("promotional_spin_count",a.Common.Server.freePlaysGameAwarded.toString()),this._layout.triggerFX("announce_retrigger"),this._layout.triggerFX("announce_retrigger1")):(this._layout.getComponent("promotional_more_you_have_won1").visible=!1,this._layout.setComponentText("promotional_spin_count",a.Common.Server.freePlaysRemainingSpinsCount.toString()),this._layout.triggerFX("announce_retrigger"),this._layout.triggerFX("announce_retrigger2")),setTimeout(function(){l.globalSounds.fadeMusicIn(1),this._layout.triggerFX("end_retrigger"),this._layout.triggerFX("scene_start"),this._layout.setComponentText("promotional_freeGame_value",a.Common.Server.freePlaysRemainingSpinsCount),this._layout.setComponentText("promotional_freeGame_winMeter_value",a.Common.Currency.format(a.Common.Server.freePlaysWinAmount)),this._layout.getComponent("promotional_freegame_count").visible=!0,this._layout.getComponent("promotional_freeGame_value").visible=!0,this._layout.getComponent("promotional_freegame_win_meter").visible=!0,this._layout.getComponent("promotional_freeGame_winMeter_value").visible=!0,c.instance.emit(m.SPIN_BUTTON_ENABLE_AFTER_FREEPLAYS_INTRO)}.bind(this),3e3)},d.prototype.promotionalFinished=function(){this._layout.getComponent("promotional_freegame_count").visible=!1,this._layout.getComponent("promotional_freeGame_value").visible=!1,this._layout.getComponent("promotional_freegame_win_meter").visible=!1,this._layout.getComponent("promotional_freeGame_winMeter_value").visible=!1},d.prototype.onResultsRequested=function(){b.prototype.onResultsRequested.call(this),this._layout.getComponent("win_amount").visible=!1,null!==this.AudioProfile&&(l.globalSounds.stopCue(this.AudioProfile),this.AudioProfile=null),a.Common.Server.gameBalance>=s.getTotalBetCash()||a.Common.Server.promotionalfreeplaysreelholidays?(this._subGame.isBaseGame()&&c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@footer_no_win")),this._aperture.startSpin(!1,this._subGame)):this._isAutoPlay&&a.Common.ApplicationBase.instance.emit(m.EVENT_AUTO_SPIN_STOP)},d.prototype.onResultsReady=function(a,c){b.prototype.onResultsReady.call(this,a,c);var e=new i(a.getRaw());d.lastResults=e,console.log(d.lastResults.getRaw()),e.getState().featureName.match("PUMPKIN")&&e.getState().featureOffset.length>0?this.presentPumpkinWilds(e):this.dropSymbols(e);try{window.hasOwnProperty("gameWrapper")&&window.gameWrapper.setIdle()}catch(a){}},d.prototype.dropSymbols=function(b){var d=new j;b.getState().featureName.match("SANTA")&&(d.add(function(a){this.santaSymbols(b,a)}.bind(this)),d.add(function(a){this.placedSantaGift(b,a)}.bind(this))),d.add(function(a){this._aperture.dropSymbols(b,a)}.bind(this)),b.getState().featureName.match("SANTA")&&d.add(function(c){var d=this;a.Core.Time.juggler.setTimeout(function(){d.santaRevealSymbol(b,c)},1e3)}.bind(this)),
b.getState().featureName.match("BUNNY")&&d.add(function(a){this.bunnyRandomWild(b,a)}.bind(this)),d.add(function(a){this._winManager.displaySpinResults(b,a)}.bind(this)),"$FREE_SPINS"==b.getRaw().next_game&&b.getRaw().next_game_state.month&&d.add(function(c){void 0===a.Common.Server.freePlaysAfterFreespin||a.Common.Server.freePlaysAfterFreespin||this.promotionalFinished(),this.showCalender(b.getRaw().next_game_state.month),setTimeout(function(){c()},1600)}.bind(this)),d.start(function(){c.instance.emit(h.ON_RESULTS_DISPLAYED,b)}.bind(this))},d.prototype.presentPumpkinWilds=function(b){var d=this;c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@pumpkin_PromtMsg"));var e=b.getState().featureOffset,f=this._layout.getComponent("fx_container"),i=new TimelineLite,k=new j;e.forEach(function(e){k.add(function(h){d._layout.getComponent("Pumpkin").visible=!1,(t.isDesktop()||t.isMobile())&&(d.fadeOut(d._layout.getComponent("Santa")),d.fadeOut(d._layout.getComponent("Bunny")));var j=d._assets.getMovieClip("Pumpkin:Splash",!0);j.loop=!1,j.scale=new PIXI.Point(.6,.6),j.x=895,j.y=360;var k=d._aperture.convertIntoReel(b.getState().featureName,e);f.addChild(j);var m=k.x+87,n=k.y+25;t.isMobile()&&(m-=0,n-=10);var o=j.position.y,p=d._assets.getMovieClip("SYMBOL:W4:WIN",!0),q=d._assets.getMovieClip("Pumpkin_Particles",!0);i.to(j.position,.25,{y:o-50,ease:Linear.easeNone,onStart:function(){j.gotoAndPlay(0)}}).to(j.position,.25,{y:o,ease:Linear.easeNone,onComplete:function(){l.globalSounds.playCue("SG_Pumpkin_Jump")}}).to(j.position,.25,{y:o-50,ease:Linear.easeNone}).to(j.position,.25,{y:o,ease:Linear.easeNone,onComplete:function(){l.globalSounds.playCue("SG_Pumpkin_Jump")}}).to(j.position,.6,{x:m+10,y:n+10,ease:Linear.easeNone,onStart:function(){},onComplete:function(){d._layout.getComponent("Pumpkin").visible=!0,f.removeChildren(),p.loop=!1,t.isMobile()?(p.scale=new PIXI.Point(.6,.6),p.x=k.x+100,p.y=k.y+77):(p.scale=new PIXI.Point(.53,.53),p.x=k.x+87,p.y=k.y+62),f.addChild(p),"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),p.gotoAndPlay(0),q.loop=!1,q.scale=new PIXI.Point(.5,.5),q.x=k.x+85,q.y=k.y+60,t.isMobile()&&(q.x+=20,q.y+=25),f.addChild(q),l.globalSounds.playCue("SG_Pumpkin_Transition"),q.gotoAndPlay(0)}},"+=0.10"),p.onComplete=function(){f.removeChildren(),(t.isDesktop()||t.isMobile())&&(d.fadeIn(d._layout.getComponent("Santa")),d.fadeIn(d._layout.getComponent("Bunny"))),setTimeout(function(){c.instance.emit(g.EVENT_MODIFY_APERTURE_START,e)},100),setTimeout(function(){h()},2e3)}})}),k.start(function(){d.dropSymbols(b)})},d.prototype.santaSymbols=function(b,d){var e=this;c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@santa_PromtMsg"));var f=this._aperture.getSymbolProfile("L6"),g=b.getState().featureOffset,i=this._layout.getComponent("fx_container");new j;a.Core.Time.juggler.setTimeout(function(){e._layout.getComponent("Santa").visible=!1,(t.isDesktop()||t.isMobile())&&(e.fadeOut(e._layout.getComponent("Bunny")),e.fadeOut(e._layout.getComponent("Pumpkin")))},350);g.forEach(function(a,b){if(f.getMovieClipId()){var c=e._assets.getMovieClip("snap"),d=e._assets.getMovieClip("Particle",!0),g=e._assets.getMovieClip("Overlay",!0),h=(new TimelineLite,e._aperture.getAbsolutePositionCentre(a));c.scale=new PIXI.Point(.58,.58),c.x=755,c.y=9,d.scale=new PIXI.Point(.58,.58),d.x=800,d.y=100,t.isMobile()&&t.isLandscape()&&(c.scale=new PIXI.Point(.5,.5),c.x=810,c.y=45,d.x=750),c.loop=!1,d.loop=!1,g.loop=!1,l.globalSounds.playCue("santaclick",void 0,!1,.2),c.gotoAndPlay(0),i.addChild(c);var j=h.x+85,k=h.y+70;t.isMobile()&&(j+=10,k+=15),c.onComplete=function(){i.addChild(d),d.visible=!0,TweenLite.to(d.position,1,{x:j,y:k,ease:Linear.easeNone,onStart:function(){d.gotoAndPlay(0),l.globalSounds.playCue("santadust",void 0,!1,.2)},onComplete:function(){g.scale=new PIXI.Point(.58,.58),g.x=h.x+90,g.y=h.y+70,t.isMobile()&&(g.x+=10),i.addChild(g),g.gotoAndPlay(0),g.onComplete=function(){d.visible=!1}}.bind(e)})}}}),a.Core.Time.juggler.setTimeout(function(){d()},2500)},d.prototype.placedSantaGift=function(b,c){var d=this,e=this._aperture.getSymbolProfile("L6"),f=b.getState().featureOffset,g=this._layout.getComponent("fx_container");g.removeChildren(),this._layout.getComponent("Santa").visible=!0,"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),f.forEach(function(a,b){if(e.getMovieClipId()){var c=d._aperture.getSymbolProfile("L6"),f=d._assets.getPIXISprite(c.getTextureId()),h=d._aperture.getAbsolutePositionCentre(a);f.scale=new PIXI.Point(.54,.54),f.x=h.x+4,f.y=h.y+7,t.isMobile()&&(f.x=h.x+12,f.y=h.y+20),g.addChild(f)}}),c()},d.prototype.santaRevealSymbol=function(b,c){var d=this,e=this._layout.getComponent("fx_container");e.removeChildren();var f,g=new j,h=b.getState().featureOffset,i=0;g.add(function(a){h.forEach(function(a){d._aperture.getSymbolAtPosition(a).setSymbol("Blank"),f=d._assets.getMovieClip("SYMBOL:Anim"),f.scale=new PIXI.Point(.5,.5);var b=d._aperture.getAbsolutePositionCentre(a);f.x=b.x+10,f.y=b.y+14,t.isMobile()&&(f.x=b.x+21,f.y=b.y+25),e.addChild(f),0==i&&(l.globalSounds.playCue("santarevelgift",void 0,!1,.2),i++),f.loop=!1,f.play()}),a()}),g.add(function(b){a.Core.Time.juggler.setTimeout(function(){e.removeChildren(),(t.isDesktop()||t.isMobile())&&(d.fadeIn(d._layout.getComponent("Bunny")),d.fadeIn(d._layout.getComponent("Pumpkin"))),b()},1200)}),g.start(function(){e.removeChildren(),h.forEach(function(a){d._aperture.getSymbolAtPosition(a).setSymbol(b.getState().revealSymbol)}),a.Core.Time.juggler.setTimeout(c,500)})},d.prototype.fadeIn=function(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=.5,b.visible=!0,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1})},c)},d.prototype.fadeOut=function(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=1,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1,onComplete:function(){b.alpha=.5}})},c)},d.prototype.bunnyRandomWild=function(b,d){var e=this;c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@bunny_PromtMsg"));var f=this._layout.getComponent("fx_container");this._layout.getComponent("Bunny").visible=!1;var g=new j,i=b.getState().featureOffset;(t.isDesktop()||t.isMobile())&&(this.fadeOut(this._layout.getComponent("Santa")),this.fadeOut(this._layout.getComponent("Pumpkin")));var k=this._assets.getMovieClip("Bunny:Anim",!0);k.loop=!1,k.scale=new PIXI.Point(.5,.5),k.x=50,k.y=330,f.addChild(k);var m=new TimelineLite;i.forEach(function(c){g.add(function(d){var g=e._aperture.convertIntoReel(b.getState().featureName,c);m.to(k.position,.5,{x:g.x+20,y:340,ease:Cubic.easeIn,onStart:function(){k.gotoAndPlay(0),l.globalSounds.playCue("SG_Bunny_Jump",void 0,!1,.8)}}),k.onComplete=function(){var b=e._assets.getMovieClip("Egg:Splash");"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),b.loop=!1,b.scale=new PIXI.Point(.5,.5);var g=e._aperture.getAbsolutePositionCentre(c);b.x=g.x+8,b.y=g.y+21,t.isMobile()&&(b.x+=25,b.y-=5),f.addChild(b),b.gotoAndPlay(0),l.globalSounds.playCue("SG_Bunny_Transition"),setTimeout(function(){e._aperture.getSymbolAtPosition(c).setSymbol("Blank")},250),setTimeout(function(){e._aperture.getSymbolAtPosition(c).setSymbol("W2"),d()},600)}})}),g.add(function(a){m.to(k.position,.5,{x:1100,y:340,ease:Cubic.easeIn,onStart:function(){k.gotoAndPlay(0),l.globalSounds.playCue("SG_Bunny_Jump",void 0,!1,.8)},onComplete:function(){k.alpha=0,a()}}),k.onComplete=function(){}}),g.add(function(a){k.x=0,k.y=330,m.to(k.position,.25,{x:50,y:330,ease:Cubic.easeIn,onStart:function(){k.alpha=1,k.gotoAndPlay(0)},onComplete:function(){a()}})}),g.add(function(a){e._layout.getComponent("Bunny").visible=!0,a()}),g.add(function(b){f.removeChildren(),i.forEach(function(a,b){e._aperture.getSymbolAtPosition(a).setSymbol("Blank");var c=e._assets.getMovieClip("SYMBOL:W2:WIN");l.globalSounds.playCue("W2:WIN"),c.loop=!1,c.scale=new PIXI.Point(.5,.5);var d=e._aperture.getAbsolutePositionCentre(a);c.x=d.x+10,c.y=d.y-23,t.isMobile()&&(c.x+=13,c.y+=12.4),f.addChild(c),c.gotoAndPlay(0)}),a.Core.Time.juggler.setTimeout(function(){b()},1900)}),g.start(function(){f.removeChildren(),(t.isDesktop()||t.isMobile())&&(e.fadeIn(e._layout.getComponent("Santa")),e.fadeIn(e._layout.getComponent("Pumpkin"))),i.forEach(function(a){e._aperture.getSymbolAtPosition(a).setSymbol("W1")}),d()})},d.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),c.instance.off(f.EVENT_REELS_SPIN_START,this.onSpinStart),c.instance.off(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),c.instance.off(f.EVENT_REEL_DROPPED,this.onReelDropped),c.instance.off(f.EVENT_REELS_DROPPED,this.onReelsDropped),c.instance.off(f.EVENT_TEASE_REEL,this.onReelTease),c.instance.off(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),c.instance.off(g.EVENT_SHOW_5AOK,this.onShow5OAK),c.instance.off(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),c.instance.off(g.EVENT_SHOW_WIN,this.onShowWin),c.instance.off(g.EVENT_WIN_PRESENTATION_END,this.onWinsShown),c.instance.removeAllListeners(g.EVENT_SHOW_WIN_TEXT_ANIMATION),c.instance.off(m.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart),c.instance.off(m.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd),c.instance.off(m.EVENT_AUTO_SPIN,this.onAutoSpin),c.instance.off(h.ON_PLAYER_PROMPT,this.onPlayerPrompt),c.instance.off(h.ON_PLAYER_PROMPT_IDLE,this.idleMessages),c.instance.off(h.ON_PLAYER_PROMPT_IDLE_KILL,this.killIdleMsgTween),c.instance.off(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn)},d.prototype.onReelsDropped=function(b){a.Common.Server.server.stopWinTogglingInPopUp=!1,l.globalSounds.stopCue("ReeL_spin"),l.globalSounds.stopCue("RESPIN_SPIN"),a.Common.Server.server.History_LogoFlag=!1,a.Common.Server.spacebarToQuickSpin=void 0},d.prototype.onPlayerPrompt=function(a){var b=this._layout.getComponent("player_prompt");a.length?(b.alpha=1,this._layout.setComponentText("player_prompt_text",a.toUpperCase())):TweenLite.to(b,.75,{alpha:0})},d.prototype.scatterFeature=function(b,c){if("B3"==b.symbolId||"B2"==b.symbolId||"B4"==b.symbolId){this._scattterNumCount++,this._scattterNumCount<=2?"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]):3==this._scattterNumCount&&"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]);var d=new PIXI.Sprite(this._assets.getPIXITexture("Scatter_Jan","STATIC-SYMBOLS")),e=3*c.reelIndex+c.rowIndex+1;d.x=this._aperture.getSymbolAtPosition(e).getLocalCoords(this._aperture).x,d.y=this._aperture.getSymbolAtPosition(e).getLocalCoords(this._aperture).y,d.anchor.set(.5),d.scale.set(.5),this._fxLayer1.addChild(d)}},d.prototype.idleMessages=function(){var a=this._layout.getComponent("player_prompt");this._tweenRollUp=new TimelineLite({onComplete:function(){a.visible=!0,this.restart()}}),this._tweenRollUp.to(a.position,5,{onComplete:function(){c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@first_msg"))}}).to(a.position,5,{onComplete:function(){c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@second_msg"))}}).to(a.position,5,{onComplete:function(){c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@third_msg"))}}).to(a.position,5,{onComplete:function(){c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@fourth_msg"))}}).to(a.position,5,{onComplete:function(){c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@fifth_msg"))}})},d.prototype.killIdleMsgTween=function(){this._tweenRollUp.kill()},d.prototype.onSpinStart=function(){null!==this.AudioProfile&&(l.globalSounds.stopCue(this.AudioProfile),this.AudioProfile=null),this.StopSoundToPlayinIdolCycle=0,this._movieLayer.removeChildren(),l.globalSounds.playCue("SPIN_BUTTON",void 0,!1,.7),a.Common.Server.interruptSpinBool=!1;try{window.hasOwnProperty("gameWrapper")&&window.gameWrapper.setBusy()}catch(a){}this._layout.getComponent("October").visible=!1,this._layout.getComponent("December").visible=!1,this._layout.getComponent("April").visible=!1,c.instance.emit(h.ON_PLAYER_PROMPT_IDLE_KILL),l.globalSounds.playCue(this._layout.getLayoutParams().audio.music.spin,void 0,!0,.4),this._teaseCount=0,this._scatterCount=0},d.prototype.onContinueGame=function(a,b){var c=l.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500);void 0!=c&&c.volume(.1),1==b&&this._aperture.startSpin(!0,a)},d.prototype.onReelDropped=function(a,b){b||l.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],void 0,!1,.4),4==a.reelIndex&&l.globalSounds.stopCue("ReeL_spin")},d.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();this._layout.getLayoutParams().scatters.indexOf(c.getId())>-1?l.globalSounds.playCue(c.getAudioDropId(),this._scatterCount++):l.globalSounds.playCue(c.getAudioDropId()),console.log(d.lastResults,"beat"),"$FREE_SPINS"==d.lastResults.getRaw().next_game&&this.scatterFeature(a,b)},d.prototype.onReelTease=function(a,b){this._teaseAudio=l.globalSounds.playCue(b.getTeaseAudioId(this._teaseCount++)),c.instance.emit(h.ON_PLAYER_PROMPT,r.getPhrase("@scatter_PromtMsg"))},d.prototype.onReelTeaseEnd=function(a,b){l.globalSounds.stopCue("TEASE")},d.prototype.onWinSummary=function(b){this.getWinCount=b.getWinCount(),this._fxLayer1.removeChildren(),a.Common.Server.server.LogoFlag=!1,!t.isDesktop()&&t.isPortrait()?($("#banner1_Rainbow").css("visibility","hidden"),$("#banner1").css("visibility","visible")):(this._layout.getComponent("banner").visible=!0,$("#banner1_Rainbow").css("visibility","hidden"),"hidden"===$("#banner1_Rainbow").css("visibility")&&$("#banner1").css("visibility","visible")),1===b.getWinCount()&&("H1"==b.getSingleWin().getSymbolId()?l.globalSounds.playCue(this._aperture.getSymbolProfile(b.getSingleWin().getSymbolId()).getAudioWinId(),void 0,!1,.8):l.globalSounds.playCue(this._aperture.getSymbolProfile(b.getSingleWin().getSymbolId()).getAudioWinId())),l.globalSounds.playCue("WIN_COUNT"),a.Core.Time.juggler.setTimeout(function(){l.globalSounds.playCue("WIN_SUMMARY")},50),this.showWinTextAnimation(b)},d.prototype.onShowWin=function(b,c,d,e){if(c){if(this.StopSoundToPlayinIdolCycle++,e?this.StopSoundToPlayinIdolCycle<=this.getWinCount&&(l.globalSounds.playCue("WIN_TOOGLE"),this.AudioProfile=d.getAudioWinId(),"H1:WIN"==this.AudioProfile?l.globalSounds.playCue(d.getAudioWinId(),void 0,!1,.8):l.globalSounds.playCue(d.getAudioWinId(),void 0,!1)):(l.globalSounds.playCue("WIN_TOOGLE"),this.AudioProfile=d.getAudioWinId(),"H1:WIN"==this.AudioProfile?l.globalSounds.playCue(d.getAudioWinId(),void 0,!1,.8):l.globalSounds.playCue(d.getAudioWinId(),void 0,!1)),b.getWinCash()>0){var f=this._layout.getComponent("win_amount");f.setText(a.Common.Currency.format(b.getWinCash(),!0)),f.visible=!0;var g=new j,h=new PIXI.Point(f.x,f.y);f.scale.x=.5,f.scale.y=.5,g.add(function(b){f.scale.x=.3,f.scale.y=.3,TweenLite.to(f.scale,.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){a.Core.Time.juggler.setTimeout(b,1e3)}})}),g.add(function(a){f.position=h,f.visible=!1,a()}),g.start()}}else{var i=this._layout.getComponent("win_amount");i.setText(a.Common.Currency.format(b.getWinCash())),i.visible=!0;var k=new PIXI.Point(i.x,i.y);i.scale.x=.5,i.scale.y=.5,TweenLite.to(i.scale,1,{x:.6,y:.6,ease:Cubic.easeOut}),a.Core.Time.juggler.setTimeout(function(){i.position=k,i.visible=!1},1500)}},d.prototype.onShow5OAK=function(){var b=this._layout.getComponent("5OAK");b.visible=!0,a.Core.Renderer.UI.FX.popOut(b),l.globalSounds.playCue("5ok"),this._movieLayer1.addChild(b),a.Common.Server.server.winlength=0,a.Core.Renderer.UI.FX.fadeOut(b,2e3,1)},d.prototype.onWinsShown=function(){this._isAutoPlay||($("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()),b.prototype.onWinsShown.call(this)},d.prototype.onAutoSpinsEnd=function(){this._isAutoPlay=!1,a.Common.Server.server.isAutoPlay=!1,this._autoSpinCount=0,$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()},d.prototype.onAutoSpinsStart=function(){this._isAutoPlay=!0,this._autoSpinCount=0,l.globalSounds.setMusicRestorePoint(this._layout.getLayoutParams().audio.music.spin,0)},d.prototype.onAutoSpin=function(b){c.instance.emit(a.Slots.WinManager.EVENT_FREE_SPINS_END),this._isAutoPlay=!0,this._autoSpinCount++,1===b&&c.instance.emit(m.EVENT_AUTO_SPINS_ENDS)},d.prototype.stopAnim=function(){this._layout.getComponent("fx_container").removeChildren()},d.startReelsSpinning=!1,d}(e);b.Scene_Base=w}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.SubGame,e=a.Common.GameSceneBase,f=a.Slots.Aperture,g=a.Slots.WinManager,h=a.Common.GameEvents,i=a.Slots.SpinResults,j=a.Core.Utils.Queue,k=a.Core.SoundManager,l=a.Slots.ControlPanel,m=a.Common.Currency,n=a.Core.Utils,o=a.Common.Server,p=a.Common.Server.ResponseState,q=a.Common.Server.ResponseUser,r=a.Core.Renderer.Scene,s=a.Core.Lang,t=a.Core.Environment,u=function(a){function b(b){return a.call(this,b)||this}return __extends(b,a),b}(d);b.Logic_FreeSpins=u;var v=function(b){function d(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(d,b),d.prototype.onCreate=function(){b.prototype.onCreate.call(this),a.Common.Server.totalBunnyWildOffsets=[],t.isMobile()&&(t.isMobile()&&t.isPortrait()?(this._layout.getComponent("banner").visible=!1,$("#banner1").css("backgound-image","url('./assets/renderer/base/mobile/Portrait_Logo.jpg')").css("visibility","visible")):t.isLandscape()&&t.isMobile()&&(this._layout.getComponent("banner").visible=!0,$("#banner1").css("visibility","hidden"))),this._layout.getComponent("button_collect")._label.y-=5,a.Common.Server.brokenBooleanAfterFreegame||k.globalSounds.stopMusic(),a.Common.Server.isWinSummary=!0,k.globalSounds.playCue("FREE_SPINS:SUMMARY"),this._layout.triggerFX("create"),this._aperture=this._layout.getComponent("aperture"),this._layout.setComponentText("win_amount",s.getPhrase("feature_pays_x_caps",{win:m.format(a.Common.Server.freeSpinTotalBalance)})),c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),this.interactive=!0,this.interactiveChildren=!0,this.on(a.Core.Events.ON_INTERACTION,this.onContinue),$("#button_spin").show().addClass("disabled"),$("#Autoplay_button_wrapper").hide(),$("#bet_button_wrapper").hide(),$("#cp_win").text(" "),setTimeout(function(){$("#button_spin").css("pointer-events","none")},400)},d.prototype.onResize=function(a,c){b.prototype.onResize.call(this,a,c),t.isPortrait()&&!t.isDesktop()?(this._layout.getComponent("banner").visible=!1,$("#banner1").css("backgound-image","url('./assets/renderer/base/mobile/Portrait_Logo.jpg')").css("visibility","visible")):t.isLandscape()&&!t.isDesktop()&&(this._layout.getComponent("banner").visible=!0,$("#banner1").css("visibility","hidden"))},d.prototype.onContinue=function(){var b=this;a.Common.Server.remain=-1;var d=new n.Queue(this._juggler);k.globalSounds.playCue("GENERIC_CLICK"),"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),this.interactive=!1,this.interactiveChildren=!1,a.Common.Server.freePlaysAfterFreespin&&0!=a.Common.Server.freePlaysRemainingSpinsCount&&c.instance.emit(l.SPIN_BUTTON_ENABLE_AFTER_FREEPLAYS_INTRO),this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.Server.isWinSummary=!1,a.Core.Renderer.SceneManager.closeOverlay();var e=g.getWinBand(a.Common.Server.freeSpinTotalBalance/100),f=50*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),i=100*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),j=a.Common.Server.freeSpinTotalBalance,m={totalWinCash:a.Common.Server.freeSpinTotalBalance};if(a.Common.Server.brokenBooleanAfterFreegame&&(a.Common.Server.brokenBooleanAfterFreegame=void 0),"COMPLETE"==a.Common.Server.freePlaysStatus&&0==a.Common.Server.freePlaysRemainingSpinsCount)c.instance.emit(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END);else if(e){switch(e){case"BIG_WIN":a.Common.Server.WinSceneGlobal=!1,d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,celebrationEnd:!0,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){$("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),c.instance.emit(g.EVENT_WIN_PRESENTATION_START,m),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,m),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),k.globalSounds.playCue("CELEBRATION_END"),$("#button_spin").removeClass("disabled"),b()}})}.bind(this));break;case"MEGA_WIN":d.add(function(b){a.Common.Server.WinSceneGlobal=!1,a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:f,celebrationEnd:!1,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Common.Server.WinSceneGlobal=!0,a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,Scene:"MEGA_WIN",tickupStart:f,celebrationEnd:!0,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){$("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),c.instance.emit(g.EVENT_WIN_PRESENTATION_START,m),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,m),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),k.globalSounds.playCue("CELEBRATION_END"),$("#button_spin").removeClass("disabled"),b()}})}.bind(this));break;case"SUPER_MEGA_WIN":d.add(function(b){a.Common.Server.WinSceneGlobal=!1,a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:f,celebrationEnd:!1,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Common.Server.WinSceneGlobal=!0,a.Core.Renderer.SceneManager.showSceneAsOverlay("MEGA_WIN",{win:i,celebrationEnd:!1,tickupStart:f,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Common.Server.WinSceneGlobal=!1,a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,celebrationEnd:!0,tickupStart:i,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){$("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),c.instance.emit(g.EVENT_WIN_PRESENTATION_START,m),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,m),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),k.globalSounds.playCue("CELEBRATION_END"),$("#button_spin").removeClass("disabled"),b()}})}.bind(this))}d.start(function(){c.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE)}.bind(this))}else{if($("#main_button_wrapper").removeClass("disabled"),$("#button_spin").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),a.Common.Server.server.FreeSpinsEnd=!1,a.Common.Server.freeSpinTotalBalance>0){var o={totalWinCash:a.Common.Server.freeSpinTotalBalance};a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_WIN_PRESENTATION_START,o),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,o),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),b._data.callback(),a.Common.Server.server.spinButtonBoolean=!1},3e3)},100)}else c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback();c.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE)}},d}(r);b.Scene_FreeSpins_Summary=v;var w=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;return a.AudioProfile=null,a.stopDropSymbol=!1,a.flagForFirstLoad=!1,a.totalBunnyWildOffsetSetup=[],a}return __extends(d,b),Object.defineProperty(d,"totalWin",{get:function(){return d._totalWin},set:function(a){isNaN(a)&&console.log("==>",(new Error).stack),d._totalWin=a},enumerable:!0,configurable:!0}),d.prototype.soundFreeGame=function(a){if("wildreel"==a){var b=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[2],1500);void 0!=b&&b.volume(.1)}else if("symbolreveal"==a){var c=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[0],1500);void 0!=c&&c.volume(.1)}else if("bunny"==a){var d=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[1],1500);void 0!=d&&d.volume(.1)}},d.prototype.onResize=function(c,d){switch(b.prototype.onResize.call(this,c,d),a.Common.Server.month){case"April":this.featureName="Bunny";break;case"October":this.featureName="Pumpkin";break;case"December":this.featureName="Santa"}if(t.isDesktop());else if(t.isMobile())if(t.isPortrait()){switch($("#cp_feature_spins").show(),a.Common.Server.month){case"April":this.setHTMLBackground("./assets/renderer/free_spins/mobile/Easter_Mobile_Portrait.jpg");break;case"October":this.setHTMLBackground("./assets/renderer/free_spins/mobile/Hallowen_Mobile_Portrait.jpg");break;case"December":this.setHTMLBackground("./assets/renderer/free_spins/mobile/Freegame_Mobile_Portrait.jpg")}$("#banner1").css("visibility","none"),this._layout.getComponent("FreeSpinsLeft_text").visible=!1,this._layout.getComponent("FreeSpinsLeft_Bunny").visible=!1,this._layout.getComponent("FreeSpinsLeft_Pumpkin").visible=!1,this._layout.getComponent("FreeSpinsLeft_Santa").visible=!1,this._layout.getComponent("FreeSpinsWin_text").visible=!1,this._layout.getComponent("FreeSpinsWin_"+this.featureName).visible=!1,this._layout.getComponent("background_Santa").visible=!1,this._layout.getComponent("background_Bunny").visible=!1,this._layout.getComponent("background_Pumpkin").visible=!1,this._layout.getComponent("freeSpins_Santa").visible=!1,this._layout.getComponent("freeSpins_Pumpkin").visible=!1,this._layout.getComponent("freeSpins_Bunny").visible=!1,this._layout.getComponent("total_win_value").visible=!1,this._layout.getComponent("spins_Count").visible=!1}else t.isLandscape()&&($("#cp_feature_spins").hide(),this.setHTMLBackground(""),this._layout.getComponent("background_"+this.featureName).visible=!0,this._layout.getComponent("freeSpins_"+this.featureName).visible=!0,this._layout.getComponent("total_win_value").visible=!0,this.flagForFirstLoad&&(this._layout.getComponent("FreeSpinsLeft_text").visible=!0,this._layout.getComponent("FreeSpinsLeft_"+this.featureName).visible=!0,this._layout.getComponent("FreeSpinsWin_text").visible=!0,this._layout.getComponent("FreeSpinsWin_"+this.featureName).visible=!0,this._layout.getComponent("total_win_value").visible=!0,this._layout.getComponent("spins_Count").visible=!0))},d.prototype.onGameReady=function(e){switch(b.prototype.onGameReady.call(this,e),e.getState().month){case"April":this.featureName="Bunny",this._layout.setComponentText("FreeSpinsName",s.getPhrase("EASTER")),t.isDesktop()&&(this._layout.getComponent("Freegame_Stars_Blink0").visible=!1,this._layout.getComponent("Freegame_Stars_Blink1").visible=!1),t.isMobile()&&($("html").css("background-image","url('./assets/renderer/free_spins/mobile/Easter_Mobile_Portrait.jpg')"),$("html").css("background-size"," cover"));break;case"October":this.featureName="Pumpkin",this._layout.setComponentText("FreeSpinsName",s.getPhrase("HALLOWEEN")),t.isMobile()&&($("html").css("background-image","url('./assets/renderer/free_spins/mobile/Hallowen_Mobile_Portrait.jpg')"),$("html").css("background-size"," cover"));break;case"December":this.featureName="Santa",this._layout.setComponentText("FreeSpinsName",s.getPhrase("CHRISTMAS")),t.isMobile()&&($("html").css("background-image","url('./assets/renderer/free_spins/mobile/Freegame_Mobile_Portrait.jpg')"),$("html").css("background-size"," cover"))}this._layout.getComponent(this.featureName).visible=!0,(t.isDesktop()||t.isLandscape())&&(this._layout.getComponent("freeSpins_"+this.featureName).visible=!0,this._layout.getComponent("background_"+this.featureName).visible=!0),a.Common.Server.brokenGameBoolean||c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{label:s.getPhrase("spins"),spins:this._subGame.getState().remain-1}),e.getState().remain==e.getState().total?(d.totalWin=0,k.globalSounds.stopMusic(),this._aperture.visible=!0,k.globalSounds.playCue("FREESPINS:INTRO",0,!0),this._layout.getComponent(this.featureName+"_announcer_character").visible=!0,this._layout.getComponent("announcer_"+this.featureName+"_popup").visible=!0,this._layout.setComponentText("spin_count",e.getState().total.toString()),$("#Autoplay_button_wrapper").hide(),$("#bet_button_wrapper").hide(),$("#main_button_wrapper").hide(),$("#feature_spins_wrapper").hide(),$("#feature_win_wrapper").hide(),$("#cp_feature_win").hide(),this.soundFreeGame(a.Common.Server.freeGameFeature),this.showAnnouncer("announcer"),this._layout.getComponent("aperture_frame").visible=!0,(t.isDesktop()||t.isLandscape())&&(this._layout.getComponent("FreeSpinsLeft_text").visible=!1,this._layout.getComponent("FreeSpinsLeft_"+this.featureName).visible=!1,this._layout.getComponent("FreeSpinsWin_text").visible=!1,this._layout.getComponent("FreeSpinsWin_"+this.featureName).visible=!1,this._layout.getComponent("spins_Count").visible=!1)):(this.soundFreeGame(a.Common.Server.freeGameFeature),a.Common.Server.brokenGameBoolean&&(this.soundFreeGame(a.Common.Server.freeGameFeature),(t.isDesktop()||t.isLandscape())&&(this._layout.getComponent("FreeSpinsLeft_text").visible=!0,this._layout.getComponent("FreeSpinsLeft_"+this.featureName).visible=!0,this._layout.getComponent("FreeSpinsWin_text").visible=!0,this._layout.getComponent("FreeSpinsWin_"+this.featureName).visible=!0,this._layout.getComponent("spins_Count").visible=!0)),$("#feature_spins_wrapper").show(),$("#feature_win_wrapper").show(),$("#cp_feature_win").show(),this.onGameAccepted())},d.prototype.onCreate=function(){b.prototype.onCreate.call(this),t.isMobile()&&t.isPortrait()&&("wildreel"==a.Common.Server.freeGameFeature?$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/halloween_free_spins.png')").css(" background-repeat","no-repeat"):"symbolreveal"==a.Common.Server.freeGameFeature?$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/chirstmas_free_spins.png')").css(" background-repeat","no-repeat"):$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/easter_free_spins.png')").css(" background-repeat","no-repeat")),this._layout.getComponent("button_start_feature")._label.y-=4,
$("html").css("background-image","url('./assets/renderer/base/Blur.jpg')"),$("html").css("background-size"," cover"),d.balanceBeforeWin=q.current.getBalance(),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this._fxLayer=new PIXI.Container,this._fxLayer1=new PIXI.Container,this.addChild(this._fxLayer),this._aperture.addChild(this._fxLayer1),this._movieLayer=new PIXI.Container,this.addChild(this._movieLayer),this._movieLayer1=new PIXI.Container,this.addChild(this._movieLayer1),c.instance.on(f.EVENT_REELS_SPIN_START,this.onSpinStart,this),c.instance.on(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),c.instance.on(f.PROMOTIONAL_PANEL_CHANGE,this.shiftPanel,this),c.instance.on(f.EVENT_REEL_DROPPED,this.onReelDropped,this),c.instance.on(f.EVENT_TEASE_REEL,this.onReelTease,this),c.instance.on(g.EVENT_SHOW_5AOK,this.onShow5OAK,this),c.instance.on(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),c.instance.on(f.EVENT_REELS_DROPPED,this.onReelsDropped,this),c.instance.on(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),c.instance.on(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn,this),c.instance.on(h.ON_PLAYER_PROMPT,this.onPlayerPrompt,this),this._layout.triggerFX("create"),d.startReelsSpinning&&(this._sounds.stopCue("WIN_COUNT"),this._aperture.startSpin(!0,this._subGame),d.startReelsSpinning=!1),p.current&&(this.onStateReady(p.current),p.current=void 0)},d.prototype.showIntro=function(a){this._layout.triggerFX("accept_game"),(new j).start(function(){a()}.bind(this))},d.prototype.onExpandColumn=function(b){console.log("[ExpandingSymbols] ",b);var d=this._assets.getMovieClip("Expanding_Wild");k.globalSounds.playCue("W4:WIN");var e=this._winManager.getAperture().getReel(b-1),f=e.getCentroid(this._movieLayer);t.isMobile()?(d.scale=new PIXI.Point(.51,.506),d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-40,d.position.y=f.y-92.8):(d.scale=new PIXI.Point(.53,.5),d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-40,d.position.y=f.y-98),this._movieLayer.addChild(d),d.loop=!1,d.play(),d.onComplete=function(){},a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_MODIFY_APERTURE_END)},1e3)},d.prototype.onResultsRequested=function(){b.prototype.onResultsRequested.call(this),o.server.historyDataBoolean&&(c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{win:this._subGame.getState().total_win_cash}),o.server.historyDataBoolean=!1),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase("@footer_no_win"))},200),c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{spins:this._subGame.getState().remain-1}),(t.isLandscape()||t.isDesktop())&&this._layout.setComponentText("spins_Count",(this._subGame.getState().remain-1).toString()),this._aperture.isSpinning||(null!==this.AudioProfile&&(k.globalSounds.stopCue(this.AudioProfile),this.AudioProfile=null),this._aperture.startSpin(!1,this._subGame))},d.prototype.onStateReady=function(e){b.prototype.onStateReady.call(this,e);var f=e.getState();switch(f.month){case"April":this.featureName="Bunny",this._layout.setComponentText("FreeSpinsName",s.getPhrase("EASTER")),t.isDesktop()&&(this._layout.getComponent("Freegame_Stars_Blink0").visible=!1,this._layout.getComponent("Freegame_Stars_Blink1").visible=!1);break;case"October":this.featureName="Pumpkin",this._layout.setComponentText("FreeSpinsName",s.getPhrase("HALLOWEEN"));break;case"December":this.featureName="Santa",this._layout.setComponentText("FreeSpinsName",s.getPhrase("CHRISTMAS"))}d.totalWin=f.total_win_cash||0,a.Common.Server.brokenGameBoolean&&(c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{spins:f.remain-1}),this._layout.setComponentText("spins_Count",(f.remain-1).toString()))},d.prototype.onResultsReady=function(a,c){b.prototype.onResultsReady.call(this,a,c);var e=new i(a.getRaw());d.lastResults=e,d.totalWin=e.getState().total_win_cash,console.log("DS Total:",d.totalWin),e.getState().featureName.match("PUMPKIN")?this.presentPumpkinWilds(e):this.dropSymbols(e)},d.prototype.dropSymbols=function(b){var d=new j;b.getState().featureName.match("SANTA")&&(d.add(function(a){this.santaSymbols(b,a)}.bind(this)),d.add(function(a){this.placedSantaGift(b,a)}.bind(this))),d.add(function(a){this._aperture.dropSymbols(b,a)}.bind(this)),b.getState().featureName.match("SANTA")&&d.add(function(c){var d=this;a.Core.Time.juggler.setTimeout(function(){d.santaRevealSymbol(b,c)},1e3)}.bind(this)),b.getState().featureName.match("BUNNY")&&b.getState().featureOffset.length>0&&d.add(function(a){c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase("@bunny_PromtMsgFree")),this.bunnyRandomWild(b,a)}.bind(this)),d.add(function(a){this._winManager.displaySpinResults(b,a)}.bind(this)),b.getState().featureName.match("BUNNY")&&b.getState().featureOffset.length>0&&d.add(function(a){this.bunnyFeatureStickyWild(a,b)}.bind(this)),d.start()},d.prototype.presentPumpkinWilds=function(b){var d=this;c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase("@pumpkin_PromtMsgFree"));var e=b.getState().featureOffset,f=this._layout.getComponent("fx_container"),i=new TimelineLite,l=new j;e.forEach(function(e){l.add(function(h){d._layout.getComponent("Pumpkin").visible=!1;var j=d._assets.getMovieClip("Pumpkin:Splash",!0);j.loop=!1,j.scale=new PIXI.Point(.6,.6),j.x=895,j.y=360;var l=d._aperture.convertIntoReel(b.getState().featureName,e);f.addChild(j);var m=l.x+87,n=l.y+25;t.isMobile()&&(m-=0,n-=10);var o=j.position.y;d.stopDropSymbol=!0;var p=d._assets.getMovieClip("SYMBOL:W4:WIN",!0),q=d._assets.getMovieClip("Pumpkin_Particles",!0);i.to(j.position,.25,{y:o-50,ease:Linear.easeNone,onStart:function(){j.gotoAndPlay(0)}}).to(j.position,.25,{y:o,ease:Linear.easeNone,onComplete:function(){k.globalSounds.playCue("SG_Pumpkin_Jump")}}).to(j.position,.25,{y:o-50,ease:Linear.easeNone}).to(j.position,.25,{y:o,ease:Linear.easeNone,onComplete:function(){k.globalSounds.playCue("SG_Pumpkin_Jump")}}).to(j.position,.6,{x:m+10,y:n+10,ease:Linear.easeNone,onStart:function(){},onComplete:function(){d._layout.getComponent("Pumpkin").visible=!0,f.removeChildren(),p.loop=!1,t.isMobile()?(p.scale=new PIXI.Point(.5,.5),p.x=l.x+100,p.y=l.y+75):(p.scale=new PIXI.Point(.54,.54),p.x=l.x+105,p.y=l.y+60),f.addChild(p),"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([100]),k.globalSounds.playCue("SG_Pumpkin_Transition"),p.gotoAndPlay(0),q.loop=!1,q.scale=new PIXI.Point(.5,.5),q.x=l.x+110,q.y=l.y+85,t.isMobile()&&(q.y-=10),f.addChild(q),k.globalSounds.playCue("SG_Pumpkin_Transition"),q.gotoAndPlay(0)}},"+=0.10"),p.onComplete=function(){f.removeChildren(),setTimeout(function(){c.instance.emit(g.EVENT_MODIFY_APERTURE_START,e)},100),setTimeout(function(){d.stopDropSymbol=!1,h()},2e3)}})}),l.start(function(){d.stopDropSymbol||(d.dropSymbols(b),d.stopDropSymbol=!1)})},d.prototype.santaSymbols=function(b,d){var e=this;c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase("@santa_PromtMsgFree"));var f=this._aperture.getSymbolProfile("L6"),g=b.getState().featureOffset,i=this._layout.getComponent("fx_container");new j;a.Core.Time.juggler.setTimeout(function(){e._layout.getComponent("Santa").visible=!1},350);g.forEach(function(a,b){if(f.getMovieClipId()){var c=e._assets.getMovieClip("snap"),d=e._assets.getMovieClip("Particle",!0),g=e._assets.getMovieClip("Overlay",!0),h=(new TimelineLite,e._aperture.getAbsolutePositionCentre(a));c.scale=new PIXI.Point(.58,.58),c.x=-25,c.y=242,d.scale=new PIXI.Point(.58,.58),d.x=210,d.y=350,c.loop=!1,d.loop=!1,g.loop=!1;var j=h.x+110,l=h.y+80;t.isMobile()&&(c.scale=new PIXI.Point(.5,.5),c.x=810,c.y=100,d.x=900,d.y=150,j+=5,l+=20),k.globalSounds.playCue("santaclick"),c.gotoAndPlay(0),i.addChild(c),c.onComplete=function(){i.addChild(d),d.visible=!0,TweenLite.to(d.position,1,{x:j,y:l,ease:Linear.easeNone,onStart:function(){d.gotoAndPlay(0),k.globalSounds.playCue("santadust",void 0,!1,.2)},onComplete:function(){g.scale=new PIXI.Point(.58,.58),g.x=h.x+100,g.y=h.y+85,t.isMobile()&&(g.y-=5),i.addChild(g),g.gotoAndPlay(0),g.onComplete=function(){d.visible=!1}}.bind(e)})}}}),a.Core.Time.juggler.setTimeout(function(){d()},2500)},d.prototype.placedSantaGift=function(b,c){var d=this,e=this._aperture.getSymbolProfile("L6"),f=b.getState().featureOffset,g=this._layout.getComponent("fx_container");g.removeChildren(),this._layout.getComponent("Santa").visible=!0,"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),f.forEach(function(a,b){if(e.getMovieClipId()){var c=d._aperture.getSymbolProfile("L6"),f=d._assets.getPIXISprite(c.getTextureId()),h=d._aperture.getAbsolutePositionCentre(a);f.scale=new PIXI.Point(.55,.54),f.x=h.x+20,f.y=h.y+10,t.isMobile()&&(f.x-=5,f.y+=13),g.addChild(f)}}),c()},d.prototype.santaRevealSymbol=function(b,c){var d=this,e=this._layout.getComponent("fx_container");e.removeChildren();var f=0,g=new j,h=b.getState().featureOffset;g.add(function(a){h.forEach(function(a){d._aperture.getSymbolAtPosition(a).setSymbol("Blank");var b=d._assets.getMovieClip("SYMBOL:Anim");b.scale=new PIXI.Point(.5,.5);var c=d._aperture.getAbsolutePositionCentre(a);b.x=c.x+30,b.y=c.y+17,t.isMobile()&&(b.x+=-8,b.y+=10),e.addChild(b),0==f&&(k.globalSounds.playCue("santarevelgift"),f++),b.play()}),a()}),g.add(function(b){a.Core.Time.juggler.setTimeout(function(){e.removeChildren(),b()},1200)}),g.start(function(){e.removeChildren(),h.forEach(function(a){d._aperture.getSymbolAtPosition(a).setSymbol(b.getState().revealSymbol)}),a.Core.Time.juggler.setTimeout(c,500)})},d.prototype.bunnyRandomWild=function(b,c){var d=this,e=this._layout.getComponent("fx_container");this._layout.getComponent("Bunny").visible=!1;var f=new j,g=b.getState().featureOffset,h=this._assets.getMovieClip("Bunny:Anim",!0);h.loop=!1,h.scale=new PIXI.Point(.5,.5),h.x=50,h.y=330,e.addChild(h);var i=new TimelineLite;g.forEach(function(c){f.add(function(f){var g=d._aperture.convertIntoReel(b.getState().featureName,c);t.isMobile()&&t.isPortrait()&&(g.y=g.y+30),i.to(h.position,.5,{x:g.x+20,y:g.y,ease:Cubic.easeIn,onStart:function(){h.gotoAndPlay(0),k.globalSounds.playCue("SG_Bunny_Jump",void 0,!1,.8)}}),h.onComplete=function(){var b=d._assets.getMovieClip("Egg:Splash");"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),b.loop=!1,b.scale=new PIXI.Point(.5,.5);var g=d._aperture.getAbsolutePositionCentre(c);b.x=g.x+30,b.y=g.y+15,t.isMobile()&&(b.x+=5,b.y+=5),e.addChild(b),b.gotoAndPlay(0),k.globalSounds.playCue("SG_Bunny_Transition"),setTimeout(function(){d._aperture.getSymbolAtPosition(c).setSymbol("Blank")},250),setTimeout(function(){d._aperture.getSymbolAtPosition(c).setSymbol("W2"),f()},600)}})}),f.add(function(a){i.to(h.position,.5,{x:1100,y:340,ease:Cubic.easeIn,onStart:function(){h.gotoAndPlay(0),k.globalSounds.playCue("SG_Bunny_Jump",void 0,!1,.8)},onComplete:function(){h.alpha=0,a()}}),h.onComplete=function(){}}),f.add(function(a){h.x=0,h.y=330,i.to(h.position,.25,{x:50,y:330,ease:Cubic.easeIn,onStart:function(){h.alpha=1,h.gotoAndPlay(0)},onComplete:function(){a()}})}),f.add(function(a){d._layout.getComponent("Bunny").visible=!0,a()}),f.add(function(b){e.removeChildren(),g.forEach(function(a,b){d._aperture.getSymbolAtPosition(a).setSymbol("Blank");var c=d._assets.getMovieClip("SYMBOL:W2:WIN");k.globalSounds.playCue("W2:WIN"),c.loop=!1,c.scale=new PIXI.Point(.5,.5);var f=d._aperture.getAbsolutePositionCentre(a);c.x=f.x+29,c.y=f.y-17,t.isMobile()&&(c.y+=13.5,c.x-=7),e.addChild(c),c.gotoAndPlay(0)}),a.Core.Time.juggler.setTimeout(function(){b()},1900)}),f.start(function(){e.removeChildren(),g.forEach(function(a){d._aperture.getSymbolAtPosition(a).setSymbol("W1")}),c()})},d.prototype.onInteraction=function(d,e){b.prototype.onInteraction.call(this,d,e),c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase(" ")),k.globalSounds.playCue("GENERIC_CLICK"),this._aperture.visible=!0,(t.isDesktop()||t.isLandscape())&&(a.Core.Time.juggler.setTimeout(function(){this._layout.getComponent("spins_Count").visible=!0}.bind(this),500),this._layout.getComponent("FreeSpinsLeft_text").visible=!0,this._layout.getComponent("FreeSpinsLeft_"+this.featureName).visible=!0,this._layout.getComponent("FreeSpinsWin_text").visible=!0,this._layout.getComponent("FreeSpinsWin_"+this.featureName).visible=!0),$("#feature_spins_wrapper").show(),$("#feature_win_wrapper").show(),$("#cp_feature_win").show(),a.Common.Server.brokenGameBoolean||this.soundFreeGame(a.Common.Server.freeGameFeature),this.onGameAccepted()},d.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),c.instance.off(f.EVENT_REELS_SPIN_START,this.onSpinStart),c.instance.off(g.EVENT_SHOW_5AOK,this.onShow5OAK),c.instance.off(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),c.instance.off(f.PROMOTIONAL_PANEL_CHANGE,this.shiftPanel),c.instance.off(f.EVENT_REEL_DROPPED,this.onReelDropped),c.instance.off(f.EVENT_TEASE_REEL,this.onReelTease),c.instance.off(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),c.instance.off(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),c.instance.off(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn),c.instance.off(h.ON_PLAYER_PROMPT,this.onPlayerPrompt),c.instance.off(f.EVENT_REELS_DROPPED,this.onReelsDropped)},d.prototype.onReelsDropped=function(){a.Common.Server.server.stopWinTogglingInPopUp=!1,t.isDesktop()&&c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase(" "))},d.prototype.onGameAccepted=function(){try{window.hasOwnProperty("gameWrapper")&&window.gameWrapper.setBusy()}catch(a){}this._announcer&&(this._announcer.visible=!1,this._layout.getComponent(this.featureName+"_announcer_character").visible=!1,this._layout.getComponent("announcer_"+this.featureName+"_popup").visible=!1),this._aperture.visible=!0,this.startGame()},d.prototype.startGame=function(){this._layout.getComponent("aperture_frame").visible=!0,this._aperture.visible=!0,t.isDesktop()&&(this._layout.getComponent("player_prompt").visible=!0),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_GET_GAME_RESULTS)},1e3),this.soundFreeGame(a.Common.Server.freeGameFeature),c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{win:d.totalWin}),(t.isLandscape()||t.isDesktop())&&this._layout.setComponentText("spins_Count",(this._subGame.getState().remain-1).toString()),this._layout.setComponentText("total_win_value",m.format(d.totalWin))},d.prototype.onPlayerPrompt=function(a){var b=this._layout.getComponent("player_prompt");a.length?(b.alpha=1,this._layout.setComponentText("player_prompt_text",a.toUpperCase())):TweenLite.to(b,.75,{alpha:0})},d.prototype.onSummaryAccepted=function(){b.prototype.onSummaryAccepted.call(this),this.soundFreeGame(a.Common.Server.freeGameFeature)},d.prototype.onSpinStart=function(){this._teaseCount=0,this.flagForFirstLoad=!0,k.globalSounds.playCue(this._layout.getLayoutParams().audio.music.spin,250,!1,.4)},d.prototype.onContinueGame=function(b){a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_GET_GAME_RESULTS)},1e3)},d.prototype.onReelDropped=function(b,c){a.Common.Server.brokenGameBoolean&&(a.Common.Server.brokenGameBoolean=void 0),c||k.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[b.reelIndex],void 0,!1,.4),4==b.reelIndex&&k.globalSounds.stopCue("ReeL_spin")},d.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();this._layout.getLayoutParams().scatters.indexOf(c.getId())>-1&&(k.globalSounds.stopCue(c.getAudioDropId()),k.globalSounds.playCue(c.getAudioDropId()))},d.prototype.onShow5OAK=function(){var b=this._layout.getComponent("5OAK");a.Core.Renderer.UI.FX.popOut(b),b.visible=!0,k.globalSounds.playCue("5ok"),this._movieLayer1.addChild(b),a.Common.Server.server.winlength=0,a.Core.Renderer.UI.FX.fadeOut(b,2e3,1)},d.prototype.onReelTease=function(a,b){k.globalSounds.playCue(b.getTeaseAudioId(this._teaseCount++))},d.prototype.bunnyFeatureStickyWild=function(b,c){for(var d=c.getState().featureOffset,e=0;e<d.length;e++)this.totalBunnyWildOffsetSetup.push(d[e]);a.Common.Server.totalBunnyWildOffsets=this.totalBunnyWildOffsetSetup,console.log("hela:"+a.Common.Server.totalBunnyWildOffsets);for(var f=0;f<a.Common.Server.totalBunnyWildOffsets.length;f++){var g=new PIXI.Sprite(this._assets.getPIXITexture("Wild_Symbol","STATIC-SYMBOLS"));g.position=this._aperture.getSymbolAtPosition(a.Common.Server.totalBunnyWildOffsets[f]).getLocalCoords(this._aperture),g.anchor.set(.5),g.scale.set(.5),this._fxLayer1.addChild(g)}setTimeout(function(){},500)},d.prototype.onReelTeaseEnd=function(a,b){k.globalSounds.stopCue("TEASE")},d.prototype.onWinSummary=function(b){this.soundFreeGame(a.Common.Server.freeGameFeature),this._layout.getComponent("fx_container").removeChildren(),1===b.getWinCount()&&k.globalSounds.playCue(this._aperture.getSymbolProfile(b.getSingleWin().getSymbolId()).getAudioWinId()),k.globalSounds.playCue("WIN_COUNT"),a.Core.Time.juggler.setTimeout(function(){k.globalSounds.playCue("WIN_SUMMARY")},250);var c=this._layout.getComponent("win_amount");c.visible=!0,this.addChild(c),c.setText(m.format(b.totalWinCash,!0));var d=new PIXI.Point(c.position.x,c.position.y),e=new TimelineLite;c.scale.x=.2,c.scale.y=.2,t.isDesktop()?(e.add(TweenLite.to(c.scale,1.75,{x:.8,y:.8,ease:Cubic.easeOut})),e.add([TweenLite.to(c.position,.5,{x:640,y:535,ease:Cubic.easeIn}),TweenLite.to(c.scale,.5,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=d,c.visible=!1,k.globalSounds.playCue("WIN_COLLECT")}})])):t.isMobile&&(t.isLandscape()||t.isPortrait())&&(e.add(TweenLite.to(c.scale,1.75,{x:.8,y:.8,ease:Cubic.easeOut})),e.add([TweenLite.to(c.position,.5,{x:640,y:50,ease:Cubic.easeIn}),TweenLite.to(c.scale,.5,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=d,c.visible=!1,k.globalSounds.playCue("WIN_COLLECT")}})]))},d.prototype.onShowWin=function(b,c,d){if(c){this.AudioProfile=d.getAudioWinId(),k.globalSounds.playCue(d.getAudioWinId());var e=this._layout.getComponent("win_amount");e.setText(m.format(b.getWinCash(),!0)),e.visible=!0;var f=new j,g=new PIXI.Point(e.x,e.y);e.scale.x=.5,e.scale.y=.5,f.add(function(b){e.scale.x=.3,e.scale.y=.3,TweenLite.to(e.scale,.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){a.Core.Time.juggler.setTimeout(b,1e3)}})}),f.add(function(a){e.position=g,e.visible=!1,a()}),f.start()}},d.prototype.onWinsShown=function(){c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{win:d.totalWin}),this._layout.setComponentText("total_win_value",m.format(d.totalWin)),this._lastResults&&this._lastResults.isGame("$FREE_SPINS")&&this._lastResults.isNextGame("$BASE")?a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_RESULTS_DISPLAYED)}.bind(this),1500):c.instance.emit(h.ON_RESULTS_DISPLAYED)},d.prototype.shiftPanel=function(){$("#panel_background").css("transform","scale(1)"),$("#panel_background").css("bottom","0px"),this._layout.getComponent("aperture_holder").y=280,this._layout.getComponent("player_prompt").scale=new PIXI.Point(1,1),this._layout.getComponent("player_prompt").x=238.07999999999998,this._layout.getComponent("player_prompt").y=496.8,t.isDesktop()&&(this._layout.getComponent("UI_Base").y=513)},d.startReelsSpinning=!1,d._totalWin=0,d}(e);b.Scene_FreeSpins=w}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Environment,g=a.Core.Utils.Queue,h=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.winTickUp=0,f}return __extends(c,b),c.prototype.onResize=function(c,d){b.prototype.onResize.call(this,c,d);var e,g;"en"==f.launchVariables.lang?(e=this._layout.getComponent("TYPE_1_Eng"),e.visible=!0,!f.isDesktop()&&f.isMobile()&&void 0!=a.Common.Server.WinSceneGlobal&&("MEGA_WIN"!=a.Common.Server.WinSceneGlobal?e.x=280:e.x=180)):(e=this._layout.getComponent("TYPE_1"),e.visible=!0,g=this._layout.getComponent("WIN"),g.visible=!0,!f.isDesktop()||"freespin"!=a.Common.Server.gameStateForBigWin&&0!=a.Common.Server.remain||(e.x=487,g.x=487),f.isMobile()&&(e.x=486,g.x=486)),this._layout.getComponent("Rays")},c.prototype.onCreate=function(){this._layout.triggerFX("create"),d.globalSounds.startMusic(this._layout.getLayoutParams().audio,0,!1,!1),this._cancelSkip=a.Core.Utils.touchToSkip(function(){this.onSkipped()}.bind(this));var b=this._layout.getComponent("win_text");switch(this._sceneProfile.id){case"MEGA_WIN":case"SUPER_MEGA_WIN":this.winTickUp=this._data.tickupStart;break;default:this.winTickUp=0}var c,g,h={win:this.winTickUp};"en"==f.launchVariables.lang?(c=this._layout.getComponent("TYPE_1_Eng"),!f.isDesktop()&&f.isMobile()&&void 0!=a.Common.Server.WinSceneGlobal&&(1!=a.Common.Server.WinSceneGlobal?c.x=280:c.x=180),c.visible=!0):(c=this._layout.getComponent("TYPE_1"),c.visible=!0,g=this._layout.getComponent("WIN"),g.visible=!0,!f.isDesktop()||"freespin"!=a.Common.Server.gameStateForBigWin&&0!=a.Common.Server.remain||(c.x=487,g.x=487),f.isMobile()&&(c.x=486,g.x=486),this.animationText(c,g)),this._layout.getComponent("Rays"),this._tweenRollUp=TweenLite.to(h,this._layout.getLayoutParams().rollup_duration,{win:this._data.win,ease:Cubic.easeOut,onUpdate:function(){b.setText(e.format(h.win,!0))},onComplete:function(){a.Core.Time.juggler.setTimeout(this.onSkipped.bind(this),0)}.bind(this)})},c.prototype.onSkipped=function(){this._cancelSkip(),d.globalSounds.stopMusic(),clearInterval(this._animInterval),this._tweenRollUp.kill(),a.Core.Renderer.SceneManager.closeOverlay(),this._data.OnComplete(),this._data.callback()},c.prototype.animationText=function(b,c){var d=new g;d.add(function(d){a.Core.Renderer.UI.FX.popOut(b,500),a.Core.Renderer.UI.FX.popOut(c,100),setTimeout(function(){d()},1e3)}.bind(this)),d.add(function(a){var d=0,e=0,f=setInterval(function(){e++;var g=.004*Math.sin(d);b.scale.x+=g,b.scale.y+=g,g=.004*Math.sin(d+10),c.scale.x+=g,c.scale.y+=g,d+=.06,200==e&&(clearInterval(f),a())},0)}.bind(this)),d.start()},c}(c);b.BigWin=h}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.ApplicationBase,f=a.Common.GameProfile,g=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._lineSprites=[],e.drawLineMask=function(a){var b=this._winManager.getAperture().getPositionCentreList(a.getPositions(),this._winManager),c=b.slice(),d=new PIXI.Graphics;d.beginFill(this._gameProfile.get().symbolMask.color,0);for(var e=this._gameProfile.get().symbolMask.x,f=this._gameProfile.get().symbolMask.y,g=this._gameProfile.get().symbolMask.w,h=this._gameProfile.get().symbolMask.h,i=0;i<b.length;i++){var j=c.shift();d.drawRect(j.x-e,j.y-f,g,h)}d.endFill(),this._lineContainer.addChild(d)},e._winManager=a,e}return __extends(d,c),d.prototype.init=function(){if(this._gameProfile=f.getSubGameProfile(this._params.game_id),e.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),e.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary,this),e.instance.on(b.ControlPanel.EVENT_BET_CHANGE,this.onBetChanged,this),e.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete,this),this._lineContainer=new PIXI.Container,this._winManager.addChild(this._lineContainer),this._gameProfile.get().paylines&&this._gameProfile.get().shawPayline)for(var a=this._gameProfile.get().paylines,c=this,d=1;d<=a.length;d++)!function(b){if(c._params.lineImages){var d=c._winManager.getAperture().getPositionCentreList(a[b-1],c._winManager),e=d.slice(),f=(e.shift(),c._assets.getMovieClip(c._params.lineImages[b-1],!1));c._lineSprites.push(f)}else{var g=new PIXI.Graphics,h=c._winManager.getAperture().getPositionCentreList(a[b-1],c._winManager),i=function(a,b,c){var d=h.slice();a=a||5,g.lineStyle(a,b,c);var e=d.shift();for(g.moveTo(e.x,e.y);d.length;)e=d.shift(),g.lineTo(e.x-20,e.y),g.lineTo(e.x+20,e.y)};i(2.2*c._params.line_styling.width,0,.6),i(c._params.line_styling.width,16711680,1),c._lineSprites.push(g)}}(d)},d.prototype.drawLines=function(){},d.prototype.destroy=function(){e.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),e.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary),e.instance.off(b.ControlPanel.EVENT_BET_CHANGE,this.onBetChanged),e.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete)},d.prototype.validate=function(){if(c.prototype.validate.call(this),a.Core.isDebugMode()&&!this._params.game_id)throw"[PaylineRenderer] missing parameter : game_id"},d.prototype.onBetChanged=function(a){},d.prototype.onWinPresentationComplete=function(){this._lineContainer.removeChildren()},d.prototype.onShowWin=function(a,c,d){switch(this._lineContainer.removeChildren(),a.getType()){case b.SlotWin.TYPE_LINE:if(this._lineSprites&&this._lineSprites.length>0){var e=this._lineSprites[a.getLine()-1];this._lineContainer.addChild(e)}this.drawLineMask(a);break;case b.SlotWin.TYPE_SCATTER:case b.SlotWin.TYPE_WAY:}},d.prototype.onShowWinSummary=function(a){this._lineContainer.removeChildren(),a.applyToAllWins(function(a){switch(a.getType()){case b.SlotWin.TYPE_LINE:case b.SlotWin.TYPE_SCATTER:this.drawLineMask(a);break;case b.SlotWin.TYPE_WAY:}}.bind(this))},d}(d);c.PaylineRenderer=g}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.ApplicationBase,f=a.Common.GameProfile,g=a.Common.GameEvents,h=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._teaseCount=0,e._winManager=a,e._sounds=d.getSoundManager(),e}return __extends(d,c),d.prototype.init=function(){this._gameProfile=f.getSubGameProfile(this._params.game_id),e.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),e.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear,this),e.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),e.instance.on(g.ON_GET_GAME_RESULTS,this.onGetGameResults,this),e.instance.on(g.ON_GAME_CHANGED,this.clear,this),e.instance.on(b.Aperture.EVENT_TEASE_REEL,this.teaseReel,this),e.instance.on(b.Aperture.EVENT_TEASE_REEL_END,this.teaseReelEnd,this),e.instance.on(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop,this),e.instance.on(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped,this),e.instance.on(g.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults,this),e.instance.on(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim,this)},d.prototype.destroy=function(){e.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),e.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear),e.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),e.instance.off(g.ON_GET_GAME_RESULTS,this.onGetGameResults),e.instance.off(g.ON_GAME_CHANGED,this.clear),e.instance.off(b.Aperture.EVENT_TEASE_REEL,this.teaseReel),e.instance.off(b.Aperture.EVENT_TEASE_REEL_END,this.teaseReelEnd),e.instance.off(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop),e.instance.off(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped),e.instance.off(g.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults),e.instance.off(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim)},d.prototype.validate=function(){if(c.prototype.validate.call(this),a.Core.isDebugMode()&&!this._params.game_id)throw"[SymbolAnimator] missing parameter : game_id"},d.prototype.clear=function(){this._movieLayer&&this._movieLayer.removeChildren(),this._teaseBackground&&this._winManager.getAperture().getBackContainer().removeChild(this._teaseBackground),this._teaseCount=0},d.prototype.onGetGameResults=function(){this._movieLayer||(this._movieLayer=a.Core.Renderer.SceneManager.getCurrentScene().getLayout().getComponent(this._params.anim_container)),this._movieLayer.visible=!0,this.clear()},d.prototype.onReelsDropped=function(){this.clear()},d.prototype.onSymbolDrop=function(b){if(b.getSymbolProfile().getActiveClipId()){var c=this._assets.getMovieClip(b.getSymbolProfile().getActiveClipId(),!0);c.position=b.getLocalCoords(this._movieLayer),c.loop=!0,this._movieLayer.addChild(c),c.gotoAndPlay(a.Core.Maths.getRandomRange(0,c.totalFrames-1))}if(b.getSymbolProfile().getDropClipId()){var d=this._assets.getMovieClip(b.getSymbolProfile().getDropClipId(),!0);d.position=b.getLocalCoords(this._movieLayer),d.loop=!1,this._movieLayer.addChild(d),d.play(),d.onComplete=function(){this._movieLayer.removeChild(d)}.bind(this)}},d.prototype.teaseReel=function(a,b){if(this._params.tease){var c=this._params.tease[b.getId()];if(c){if(c.frame){this._teaseFrame=this._teaseFrame||this._assets.getMovieClip(c.frame.movieclip,!0),this._teaseFrame.visible=!0,this._teaseFrame.position=a.getCentroid(this._movieLayer);var d=c.frame.offsets;d&&(this._teaseFrame.position.x+=d.x||0,this._teaseFrame.position.y+=d.y||0),this._movieLayer.addChild(this._teaseFrame),this._teaseFrame.play()}if(c.background){this._teaseBackground=this._teaseBackground||this._assets.getMovieClip(c.background.movieclip,!0),this._teaseBackground.position=a.getCentroid(this._winManager.getAperture().getBackContainer());var d=c.background.offsets;d&&(this._teaseBackground.position.x+=d.x||0,this._teaseBackground.position.y+=d.y||0),this._winManager.getAperture().getBackContainer().addChild(this._teaseBackground),this._teaseBackground.play(),this._teaseBackground.visible=!0}this._teaseCount++}}},d.prototype.teaseReelEnd=function(a,b){},d.prototype.onWinSummary=function(a){var b=0;this._winManager.getAperture().getAllSymbols().forEach(function(a){a.alpha=.3,b++}),a.applyToAllWins(function(a){this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(b){this.animateSymbol(b,a)}.bind(this))}.bind(this))},d.prototype.animateSymbol=function(a,b){var c=a.animate(b);if(c.frameClip&&(c.frameClip.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c.frameClip),c.frameClip.play()),c.animationClip&&(c.animationClip.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c.animationClip),c.animationClip.loop=!1,c.animationClip.play(),c.animationClip.x+=a.getSymbolProfile().getMovieClipOffsets().x,c.animationClip.y+=a.getSymbolProfile().getMovieClipOffsets().y,c.animationClip.alpha=.5,TweenLite.to(c.animationClip,.25,{alpha:1}),this._params.popout)){var d=c.animationClip.position,e=c.animationClip.scale;TweenLite.to(c.animationClip,this._params.popout.duration||.5,{x:c.animationClip.x+this._params.popout.offsets.x||-5,y:c.animationClip.y+this._params.popout.offsets.y||-5,ease:Power1.easeInOut,onComplete:function(){c.animationClip.position=d,c.animationClip.scale=e}}),this._params.popout.scale&&TweenLite.to(c.animationClip.scale,this._params.popout.duration||.5,{x:this._params.popout.scale,y:this._params.popout.scale,ease:Power1.easeInOut,onComplete:function(){c.animationClip.position=d}})}},d.prototype.onShowWin=function(a,b,c){this._winManager.getAperture().getAllSymbols().forEach(function(a){a.stopAnimation(),a.alpha=.3}),this._movieLayer.removeChildren(),this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(b){this.animateSymbol(b,a)}.bind(this))},d.prototype.stopSymbolAnim=function(){this.clear()},d}(d)
;c.SymbolAnimator=h}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Core.Environment,f=a.Common.ApplicationBase,g=a.Common.Server,h=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._winManager=a,e}return __extends(d,c),d.prototype.destroy=function(){f.instance.off(b.WinManager.EVENT_MODIFY_APERTURE_START,this.onExpandColumn),f.instance.off(g.REQUEST_RESULTS,this.onResultsRequested)},d.prototype.onResultsRequested=function(a){this._movieLayer.removeChildren()},d.prototype.onModifierStart=function(a){},d.prototype.validate=function(){c.prototype.validate.call(this)},d.prototype.onExpandColumn=function(c){console.log("[ExpandingSymbols] ",c);var d=this._params.tease.SCATTER.background,g=this._assets.getMovieClip("Expanding_Wild");g.scale=new PIXI.Point(.52,.48);var h=this._winManager.getAperture().getReel(c-1),i=h.getCentroid(this._movieLayer);e.isMobile(),g.pivot.x=g.width/2,g.pivot.y=g.height/2,g.position.x=i.x-37,g.position.y=i.y-100,this._movieLayer.addChild(g),g.loop=!1,g.play(),g.onComplete=function(){},a.Core.Time.juggler.setTimeout(function(){f.instance.emit(b.WinManager.EVENT_MODIFY_APERTURE_END)},d.duration||1e3)},d}(d);c.ExpandingSymbols=h}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));